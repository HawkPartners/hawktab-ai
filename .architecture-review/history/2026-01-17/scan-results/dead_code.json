{
  "root": "hawktab-ai",
  "orphaned_files": [
    {
      "path": "src/components/ui/form.tsx",
      "last_modified": "2025-08-07T15:51:03.957692",
      "reason": "no imports found"
    },
    {
      "path": "src/lib/utils/bugTrackerTemplate.ts",
      "last_modified": "2026-01-03T09:05:59.615542",
      "reason": "no imports found"
    },
    {
      "path": "src/components/ui/separator.tsx",
      "last_modified": "2025-08-07T15:41:48.397021",
      "reason": "no imports found"
    },
    {
      "path": "src/components/ui/switch.tsx",
      "last_modified": "2025-08-07T15:51:03.962757",
      "reason": "no imports found"
    },
    {
      "path": "src/components/LoadingModal.tsx",
      "last_modified": "2025-08-09T14:09:36.114803",
      "reason": "no imports found"
    },
    {
      "path": "src/guardrails/outputValidation.ts",
      "last_modified": "2025-08-08T14:54:44.110479",
      "reason": "no imports found"
    }
  ],
  "unused_exports": [],
  "todo_fixme_comments": [
    {
      "file": "scripts/test-r-script-v2.ts",
      "line": 3,
      "tag": "DEPRECATED",
      "content": "@deprecated Use test-r-changes.ts instead."
    },
    {
      "file": "scripts/test-r-script-v2.ts",
      "line": 23,
      "tag": "XXX",
      "content": "npx tsx scripts/test-r-script-v2.ts temp-outputs/table-test-xxx/"
    },
    {
      "file": "scripts/test-verification-agent.ts",
      "line": 19,
      "tag": "XXX",
      "content": "npx tsx scripts/test-verification-agent.ts outputs/some-dataset/pipeline-xxx"
    },
    {
      "file": "scripts/test-verification-agent.ts",
      "line": 253,
      "tag": "WARNING",
      "content": "log(`Warning: Could not process datamap CSV: ${error}`, 'yellow');"
    },
    {
      "file": "scripts/test-verification-agent.ts",
      "line": 307,
      "tag": "XXX",
      "content": "Extract dataset name from input folder path (e.g., outputs/dataset-name/pipeline-xxx \u2192 dataset-name)"
    },
    {
      "file": "scripts/test-verification-agent.ts",
      "line": 337,
      "tag": "WARNING",
      "content": "for (const warning of surveyResult.warnings) {"
    },
    {
      "file": "scripts/test-verification-agent.ts",
      "line": 338,
      "tag": "WARNING",
      "content": "log(`  Warning: ${warning}`, 'yellow');"
    },
    {
      "file": "scripts/test-verification-agent.ts",
      "line": 342,
      "tag": "WARNING",
      "content": "log(`  Warning: Survey processing failed: ${error}`, 'yellow');"
    },
    {
      "file": "scripts/test-table-agent.ts",
      "line": 23,
      "tag": "XXX",
      "content": "npx tsx scripts/test-table-agent.ts outputs/some-dataset/pipeline-xxx/dataMap-verbose-xxx.json"
    },
    {
      "file": "scripts/calculate-metrics.ts",
      "line": 288,
      "tag": "WARNING",
      "content": "console.log('\\n\u26a0\ufe0f  Warning: Not all differences have been reviewed.');"
    },
    {
      "file": "scripts/test-pipeline.ts",
      "line": 272,
      "tag": "WARNING",
      "content": "log(`  [Path A] WARNING: Banner extraction had issues`, 'yellow');"
    },
    {
      "file": "scripts/test-pipeline.ts",
      "line": 478,
      "tag": "WARNING",
      "content": "log(`  WARNING: No tables.json generated`, 'yellow');"
    },
    {
      "file": "src/app/page.tsx",
      "line": 56,
      "tag": "WARNING",
      "content": "toast.warning('Review Required', {"
    },
    {
      "file": "src/app/page.tsx",
      "line": 294,
      "tag": "WARNING",
      "content": "toast.warning(`${reviewType} Required`, {"
    },
    {
      "file": "src/app/api/process-crosstab/route.ts",
      "line": 1385,
      "tag": "WARNING",
      "content": "warning: 'Excel generation failed. Check results/tables.json'"
    },
    {
      "file": "src/app/api/process-crosstab/route.ts",
      "line": 1395,
      "tag": "WARNING",
      "content": "warning: 'R execution failed. Scripts saved in r/master.R'"
    },
    {
      "file": "src/app/api/execute-r/[sessionId]/route.ts",
      "line": 74,
      "tag": "WARNING",
      "content": "if (stderr && !stderr.includes('Warning')) {"
    },
    {
      "file": "src/app/api/execute-r/[sessionId]/route.ts",
      "line": 86,
      "tag": "WARNING",
      "content": "warning: 'R script executed but no CSV files were generated',"
    },
    {
      "file": "src/agents/tools/scratchpad.ts",
      "line": 57,
      "tag": "TODO",
      "content": "TODO: Migrate existing agents to use agent-specific tools"
    },
    {
      "file": "src/lib/types.ts",
      "line": 63,
      "tag": "DEPRECATED",
      "content": "Deprecated (optional, for rollback purposes)"
    },
    {
      "file": "src/lib/jobStore.ts",
      "line": 40,
      "tag": "WARNING",
      "content": "warning?: string"
    },
    {
      "file": "src/lib/env.ts",
      "line": 107,
      "tag": "DEPRECATED",
      "content": "Deprecated"
    },
    {
      "file": "src/lib/env.ts",
      "line": 108,
      "tag": "DEPRECATED",
      "content": "Optional, deprecated"
    },
    {
      "file": "src/lib/env.ts",
      "line": 277,
      "tag": "DEPRECATED",
      "content": "These functions are deprecated but maintained for existing code"
    },
    {
      "file": "src/lib/env.ts",
      "line": 281,
      "tag": "DEPRECATED",
      "content": "@deprecated Use getCrosstabModel() instead"
    },
    {
      "file": "src/lib/env.ts",
      "line": 291,
      "tag": "DEPRECATED",
      "content": "@deprecated Use getBannerModel() instead"
    },
    {
      "file": "src/lib/env.ts",
      "line": 301,
      "tag": "DEPRECATED",
      "content": "@deprecated Use getCrosstabModelName() instead"
    },
    {
      "file": "src/lib/env.ts",
      "line": 309,
      "tag": "DEPRECATED",
      "content": "@deprecated Use getBannerModelName() instead"
    },
    {
      "file": "src/lib/env.ts",
      "line": 317,
      "tag": "DEPRECATED",
      "content": "@deprecated Use getCrosstabModelTokenLimit() instead"
    },
    {
      "file": "src/lib/env.ts",
      "line": 325,
      "tag": "DEPRECATED",
      "content": "@deprecated Use getBannerModelTokenLimit() instead"
    },
    {
      "file": "src/lib/env.ts",
      "line": 408,
      "tag": "DEPRECATED",
      "content": "Legacy compatibility exports (deprecated - will be removed in future)"
    },
    {
      "file": "src/lib/env.ts",
      "line": 412,
      "tag": "DEPRECATED",
      "content": "@deprecated Use getReasoningModel() or getBaseModel() instead based on task requirements"
    },
    {
      "file": "src/lib/env.ts",
      "line": 415,
      "tag": "DEPRECATED",
      "content": "console.warn('[env.ts] getModel() is deprecated. Use getReasoningModel() or getBaseModel() based on task requirements.');"
    },
    {
      "file": "src/lib/env.ts",
      "line": 422,
      "tag": "DEPRECATED",
      "content": "@deprecated Use getReasoningModelTokenLimit() or getBaseModelTokenLimit() instead"
    },
    {
      "file": "src/lib/env.ts",
      "line": 425,
      "tag": "DEPRECATED",
      "content": "console.warn('[env.ts] getModelTokenLimit() is deprecated. Use getReasoningModelTokenLimit() or getBaseModelTokenLimit().');"
    },
    {
      "file": "src/lib/env.ts",
      "line": 432,
      "tag": "DEPRECATED",
      "content": "@deprecated Model selection is now task-based, not environment-based"
    },
    {
      "file": "src/lib/env.ts",
      "line": 435,
      "tag": "DEPRECATED",
      "content": "console.warn('[env.ts] getModelConfig() is deprecated. Model selection is now task-based.');"
    },
    {
      "file": "src/lib/pipeline/TableQueue.ts",
      "line": 54,
      "tag": "WARNING",
      "content": "console.warn('[TableQueue] Warning: push called after markDone');"
    },
    {
      "file": "src/lib/r/RScriptGeneratorV2.ts",
      "line": 204,
      "tag": "WARNING",
      "content": "for (const warning of validation.warnings) {"
    },
    {
      "file": "src/lib/r/RScriptGeneratorV2.ts",
      "line": 205,
      "tag": "WARNING",
      "content": "console.warn(`  - ${warning}`);"
    },
    {
      "file": "src/lib/r/RScriptGeneratorV2.ts",
      "line": 275,
      "tag": "WARNING",
      "content": "WARNING: Some tables were skipped due to validation errors.');"
    },
    {
      "file": "src/lib/utils/bugTrackerTemplate.ts",
      "line": 2,
      "tag": "BUG",
      "content": "Bug Tracker Template Generator"
    },
    {
      "file": "src/lib/utils/bugTrackerTemplate.ts",
      "line": 16,
      "tag": "BUG",
      "content": "Generate the bug tracker template markdown content"
    },
    {
      "file": "src/lib/utils/bugTrackerTemplate.ts",
      "line": 22,
      "tag": "BUG",
      "content": "Bug Tracker - Run ${runTimestamp}"
    },
    {
      "file": "src/lib/utils/bugTrackerTemplate.ts",
      "line": 41,
      "tag": "BUG",
      "content": "Copy this template for each bug found:"
    },
    {
      "file": "src/lib/utils/bugTrackerTemplate.ts",
      "line": 44,
      "tag": "BUG",
      "content": "## Bug X: [Short description]"
    },
    {
      "file": "src/lib/utils/bugTrackerTemplate.ts",
      "line": 96,
      "tag": "BUG",
      "content": "| Bug | Category | Severity | Status | Description |"
    },
    {
      "file": "src/lib/utils/bugTrackerTemplate.ts",
      "line": 115,
      "tag": "BUG",
      "content": "Create the bug tracker template file in the output folder"
    },
    {
      "file": "src/lib/utils/bugTrackerTemplate.ts",
      "line": 135,
      "tag": "BUG",
      "content": "Check if bug tracker already exists for this run"
    },
    {
      "file": "src/lib/processors/SPSSReader.ts",
      "line": 173,
      "tag": "WARNING",
      "content": "console.warn(`[SPSSReader] Warning: Could not close SPSS file:`, closeError);"
    },
    {
      "file": "src/lib/processors/SPSSReader.ts",
      "line": 263,
      "tag": "WARNING",
      "content": "console.warn(`[SPSSReader] Warning: Could not close SPSS file:`, closeError);"
    }
  ],
  "todo_fixme_count": {
    "DEPRECATED": 18,
    "XXX": 4,
    "WARNING": 20,
    "TODO": 1,
    "BUG": 8
  },
  "commented_code_blocks": [
    {
      "file": "scripts/test-table-agent.ts",
      "line": 1,
      "lines_count": 28,
      "preview": "#!/usr/bin/env npx tsx\n/**\n * TableAgent Test Script\n *\n * Purpose: Run TableAgent in isolation to validate table structure decisions.\n *\n * Usage:\n *   npx tsx scripts/test-table-agent.ts [input-path..."
    },
    {
      "file": "scripts/test-r-changes.ts",
      "line": 1,
      "lines_count": 24,
      "preview": "#!/usr/bin/env npx tsx\n/**\n * Test R Script Changes\n *\n * Purpose: Test changes to RScriptGeneratorV2 without running the full pipeline.\n * Uses existing pipeline outputs and generates new results to ..."
    },
    {
      "file": "src/app/api/pipelines/[pipelineId]/review/route.ts",
      "line": 1,
      "lines_count": 12,
      "preview": "/**\n * Review API for Human-in-the-Loop CrosstabAgent Review\n *\n * GET /api/pipelines/[pipelineId]/review\n * - Returns crosstab-review-state.json for the pipeline\n * - Shows flagged columns with mappi..."
    },
    {
      "file": "src/agents/BannerAgent.ts",
      "line": 347,
      "lines_count": 18,
      "preview": "  /**\n   * Convert DOC/DOCX to PDF using LibreOffice headless mode.\n   *\n   * This preserves all formatting (tables, colors, shading) so the model\n   * sees the document exactly as the user sees it in..."
    },
    {
      "file": "src/agents/VerificationAgent.ts",
      "line": 1,
      "lines_count": 14,
      "preview": "/**\n * VerificationAgent\n *\n * Purpose: Enhance TableAgent output using the actual survey document\n * Reads: TableAgent output (table definitions) + Survey markdown + Datamap context\n * Writes (dev): ..."
    },
    {
      "file": "src/agents/TableAgent.ts",
      "line": 350,
      "lines_count": 13,
      "preview": "/**\n * Process question groups with callback for each table produced.\n * Used by PathBCoordinator for producer-consumer pipeline.\n *\n * This function enables overlapping execution with VerificationAge..."
    },
    {
      "file": "src/schemas/tableAgentSchema.ts",
      "line": 3,
      "lines_count": 18,
      "preview": "/**\n * TableAgent Schemas\n * Purpose: Define input/output structures for the TableAgent that decides how to display\n * survey data as crosstabs.\n *\n * Key distinction:\n * - normalizedType: Data struct..."
    },
    {
      "file": "src/lib/retryWithPolicyHandling.ts",
      "line": 78,
      "lines_count": 26,
      "preview": "/**\n * Execute an async function with retry logic for content policy errors.\n *\n * Only retries on policy errors - other errors are propagated immediately.\n *\n * @example\n * ```typescript\n * const res..."
    },
    {
      "file": "src/lib/jobStore.ts",
      "line": 1,
      "lines_count": 10,
      "preview": "/**\n * Job Store\n * Purpose: Track background processing progress for client polling\n * Scope: In-memory map keyed by jobId; not persisted across server restarts\n *\n * Cancellation Support:\n * - Abort..."
    },
    {
      "file": "src/lib/env.ts",
      "line": 140,
      "lines_count": 10,
      "preview": "/**\n * Per-Agent Model Selection\n * Each agent has its own model configuration for flexibility:\n * - CrosstabAgent: Complex validation, R syntax generation (requires reasoning)\n * - BannerAgent: Visio..."
    },
    {
      "file": "src/lib/pipeline/TableQueue.ts",
      "line": 21,
      "lines_count": 19,
      "preview": "/**\n * Async queue for producer-consumer coordination between TableAgent and VerificationAgent.\n *\n * Usage:\n * ```typescript\n * const queue = new TableQueue();\n *\n * // Producer (TableAgent)\n * queue..."
    },
    {
      "file": "src/lib/tables/sortTables.ts",
      "line": 1,
      "lines_count": 13,
      "preview": "/**\n * Table Sorting Utility\n *\n * Purpose: Sort tables into a logical order for the final Excel output.\n *\n * Ordering rules:\n * 1. Screener questions (S1, S2, S2a, S2b, etc.) - sorted alphanumerical..."
    },
    {
      "file": "src/lib/r/RScriptGeneratorV2.ts",
      "line": 1,
      "lines_count": 16,
      "preview": "/**\n * R Script Generator V2\n *\n * Purpose: Generate R script that consumes VerificationAgent output and produces JSON\n *\n * Key features:\n * - Input: ExtendedTableDefinition[] (from VerificationAgent..."
    }
  ],
  "empty_directories": [
    "temp-outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-13T16-10-18-953Z",
    "docs/implementation-plans",
    "docs/decipher-api",
    "data/test-data/GVHD-Data_12.27.22",
    "data/test-data/UCB-Caregiver-ATU-W2-Data_9.1.23",
    "data/test-data/Leqvio-Segmentation-Data-HCP-W2_2.21.2025",
    "data/test-data/CART-Segmentation-Data_7.22.24_v2",
    "data/test-data/Leqvio-Demand-W2_8.16.24 v2",
    "data/test-data/Leqvio-Demand-W1_3.13.23",
    "data/test-data/Meningitis-Vax-Data_10.14.22",
    "data/test-data/Onc-CE-W4-Data_3.11.22",
    "data/test-data/UCB-Caregiver-ATU-W4-Data_8.16.24",
    "data/test-data/Leqvio-Segmentation-Data-HCP-W1_7.11.23",
    "data/test-data/Onc-CE-W5-Data_2.7.23",
    "data/test-data/Onc-CE-W3-Data_5.13.21",
    "data/test-data/Leqvio-Demand-W3_5.16.25",
    "data/test-data/UCB-Caregiver-ATU-W6-Data_1.23.24",
    "data/test-data/Onc-CE-W6-Data_3.18.24",
    "data/test-data/Onc-CE-W2-Data_5.10.20",
    "data/test-data/Cambridge-Savings-Bank-W2_4.1.25",
    "data/test-data/Spravato_4.23.25",
    "data/test-data/Cambridge-Savings-Bank-W1_4.9.24",
    "data/test-data/Iptacopan-Data_2.23.24",
    "data/test-data/UCB-Caregiver-ATU-W1-Data_1.11.23",
    "data/test-data/UCB-Caregiver-ATU-W5-Data_1.7.25",
    "data/test-data/Leqvio-Segmentation-Patients-Data_7.7.23",
    "data/leqvio-monotherapy-demand-NOV217/tabs",
    "data/leqvio-monotherapy-demand-NOV217/golden-datasets",
    "data/leqvio-monotherapy-demand-NOV217/inputs",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-17T13-50-12-807Z/crosstab",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-17T13-50-12-807Z/r",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-17T13-50-12-807Z/banner-images",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-17T13-50-12-807Z/results",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-17T13-50-12-807Z/verification",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-17T13-50-12-807Z/table",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-17T13-50-12-807Z/banner",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-17T13-50-12-807Z/inputs",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-15T16-30-17-495Z/crosstab",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-15T16-30-17-495Z/r",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-15T16-30-17-495Z/results",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-15T16-30-17-495Z/verification",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-15T16-30-17-495Z/table",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-15T16-30-17-495Z/banner",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-15T16-30-17-495Z/inputs",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-13T16-31-38-833Z/crosstab",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-13T16-31-38-833Z/r",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-13T16-31-38-833Z/results",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-13T16-31-38-833Z/verification",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-13T16-31-38-833Z/table",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-13T16-31-38-833Z/banner",
    "outputs/leqvio-monotherapy-demand-data/pipeline-2026-01-13T16-31-38-833Z/inputs",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-15T15-13-57-323Z/crosstab",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-15T15-13-57-323Z/r",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-15T15-13-57-323Z/results",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-15T15-13-57-323Z/verification",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-15T15-13-57-323Z/table",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-15T15-13-57-323Z/banner",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T16-54-54-155Z/crosstab",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T16-54-54-155Z/r",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T16-54-54-155Z/results",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T16-54-54-155Z/verification",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T16-54-54-155Z/table",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T16-54-54-155Z/banner",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T21-38-19-554Z/crosstab",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T21-38-19-554Z/r",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T21-38-19-554Z/results",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T21-38-19-554Z/verification",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T21-38-19-554Z/table",
    "outputs/leqvio-monotherapy-demand-NOV217/pipeline-2026-01-09T21-38-19-554Z/banner"
  ],
  "summary": {
    "orphaned_files_count": 6,
    "total_todo_comments": 51,
    "todo_by_type": {
      "DEPRECATED": 18,
      "XXX": 4,
      "WARNING": 20,
      "TODO": 1,
      "BUG": 8
    },
    "commented_code_blocks_count": 13,
    "empty_directories_count": 69,
    "files_analyzed": 111
  }
}
