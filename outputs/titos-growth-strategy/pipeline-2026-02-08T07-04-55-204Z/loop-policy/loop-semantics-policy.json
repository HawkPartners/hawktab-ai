{
  "policyVersion": "1.0",
  "bannerGroups": [
    {
      "groupName": "Needs State",
      "anchorType": "entity",
      "shouldPartition": true,
      "stackedFrameName": "stacked_loop_1",
      "implementation": {
        "strategy": "alias_column",
        "aliasName": ".hawktab_needs_state",
        "sourcesByIteration": [
          {
            "iteration": "1",
            "variable": "S10a"
          },
          {
            "iteration": "2",
            "variable": "S11a"
          }
        ],
        "notes": "Create an alias that picks S10a for .loop_iter==1 and S11a for .loop_iter==2; stacked-frame cuts should use the alias (e.g. .hawktab_needs_state == 1) instead of OR-ing S10a|S11a."
      },
      "confidence": 0.95,
      "evidence": [
        "Cuts use OR between S10a and S11a for the same categorical options (e.g. S10a == 1 | S11a == 1) — classic pattern of the same concept recorded separately for each iteration.",
        "Datamap shows S10a and S11a are the same question (reason for having a drink) for different presented locations.",
        "pagetime variables (pagetimeS10a -> iteration 1, pagetimeS11a -> iteration 2) provide deterministic evidence that S10a/S11a map to different loop iterations.",
        "Answer options are a single-select categorical question (mutually exclusive), so each entity should belong to exactly one cut (shouldPartition=true)."
      ]
    },
    {
      "groupName": "Location",
      "anchorType": "respondent",
      "shouldPartition": false,
      "stackedFrameName": "stacked_loop_1",
      "implementation": {
        "strategy": "none",
        "aliasName": "",
        "sourcesByIteration": [],
        "notes": "Use the listed hLOCATIONr* variables as-is (no per-iteration aliasing). These appear to be binary flags for many different location types (different concepts), not parallel per-iteration variables that require aliasing."
      },
      "confidence": 0.6,
      "evidence": [
        "Datamap describes hLOCATIONr1..hLOCATIONr16 as separate hidden binary flags for different location types (e.g., 'at your home', 'at someone else's home', 'at work/office', etc.), which matches the banner's mapping of each cut to a different hLOCATIONrN variable.",
        "The cuts map each location type to a distinct flag (hLOCATIONr1 == 1, hLOCATIONr2 == 1, hLOCATIONr3 == 1, ...). This is analogous to multi-select / multiple binary flags for different concepts (respondent-level assignment) rather than OR-ing parallel per-iteration variables for the same concept.",
        "There is ambiguity because deterministic findings include some hLOCATION* and related variables mapped to specific iterations (e.g., hLOCATIONr1/hLOCATIONr2 appear in the iteration-linked list). That deterministic evidence introduces uncertainty about whether these particular hLOCATIONrN variables are iteration-linked in this dataset or are respondent-level flags."
      ]
    }
  ],
  "humanReviewRequired": true,
  "warnings": [
    "The 'Location' group is ambiguous: datamap text indicates hLOCATIONr1..hLOCATIONr16 are binary flags representing different location TYPES (which argues for respondent-anchored), but deterministic findings include some hLOCATION*/hLOCATIONS* variables mapped to specific iterations (which argues for entity-anchored). I classified 'Location' as respondent-anchored and left no alias, but this should be reviewed by a human to confirm whether the hLOCATIONrN variables are per-iteration or per-respondent in the final stacked data.",
    "If any of the hLOCATIONr* variables are actually iteration-specific (i.e., there is one hLOCATION variable per loop-iteration in the wide source), the group should be converted to entity-anchored and an alias column must be created mapping each .loop_iter to the correct hLOCATION variable. Do not proceed without human confirmation."
  ],
  "reasoning": "Needs State: clear OR pattern S10a | S11a for identical categorical options plus pagetime mapping -> entity-anchored; created alias .hawktab_needs_state mapping S10a→iter1 and S11a→iter2. Location: variables named hLOCATIONr1..r16 look like distinct binary flags for different location types (respondent-level); cuts reference different flags rather than OR-ing parallel per-iteration variables, so I treated it as respondent-anchored. However deterministic findings include some hLOCATION* variables linked to iterations, producing ambiguity — flagged for human review."
}