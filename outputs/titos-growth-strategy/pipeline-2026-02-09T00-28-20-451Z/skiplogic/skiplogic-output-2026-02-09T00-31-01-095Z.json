{
  "extraction": {
    "rules": [
      {
        "ruleId": "rule_s6a_hispanic_filter",
        "surveyText": "ASK IF S6=1\n\nFamily Origin\n\nS6a. Which of the following best describes your family's country or region of origin? _Select all that apply._",
        "appliesTo": [
          "S6a"
        ],
        "plainTextRule": "Show S6a only for respondents who answered 'Yes' to S6 (Are you of Hispanic or Latino origin?).",
        "ruleType": "table-level",
        "conditionDescription": "Respondent must have S6 = 1 (Yes to Hispanic/Latino origin).",
        "translationContext": "S6 is the Hispanic question with codes: 1 = Yes, 2 = No. S6a exists only when S6=1."
      },
      {
        "ruleId": "rule_s10b_conditional_responses",
        "surveyText": "S10b. You said your reason for having a drink **[INSERT LOCATION 1]** in the past week was best described as **[INSERT S10a WITH LOWERCASE \"a\" AT THE BEGGINNING OF THE ANSWER CHOICE**]. More specifically, what best describes that moment? _Select one._\n\n**PN: SHOW RESPONSES BASED ON S10a SELECTION. DO NOT SHOW HEADERS.** **RANDOMIZE** ~~**KEEPING SUBCATEGORIES WITHIN A HEADING TOGETHER**~~",
        "appliesTo": [
          "S10b"
        ],
        "plainTextRule": "The response options shown at S10b depend on the respondent's answer to S10a (show only the subset of S10b options that correspond to the S10a selection).",
        "ruleType": "row-level",
        "conditionDescription": "Display S10b response options conditionally based on S10a selection (i.e., S10b is a conditional response set mapped from S10a).",
        "translationContext": "S10a is the top-level reason (e.g., Connection/Belonging, Status/Image, etc.). The survey provides grouped S10b option lists under each S10a heading (multiple numerical codes and 'Other' anchors such as 100,101,102...). Downstream translator: map S10a categories to the specific S10b option codes shown under each heading in the instrument."
      },
      {
        "ruleId": "rule_s11b_conditional_responses",
        "surveyText": "S11b. You said your reason for having a drink **[INSERT LOCATION 2]** in the past week was primarily described as **[INSERT S11a WITH LOWERCASE \"a\" AT BEGINNING OF ANSWER CHOICE**]. More specifically, how would you describe that moment? _Select one._\n\n**PN: SHOW RESPONSES BASED ON S11a SELECTION (SAME LIST PROVIDED AT S10B). DO NOT SHOW HEADERS.**",
        "appliesTo": [
          "S11b"
        ],
        "plainTextRule": "The response options shown at S11b depend on the respondent's answer to S11a (show only the subset of S11b options that correspond to the S11a selection).",
        "ruleType": "row-level",
        "conditionDescription": "Display S11b response options conditionally based on S11a selection (conditional response set mirroring S10b logic).",
        "translationContext": "S11a is the top-level reason for Location 2 (same categories as S10a). The instrument uses the same grouped option lists as S10b; downstream translator should map S11a categories to the specific S11b option codes as shown in the questionnaire."
      },
      {
        "ruleId": "rule_a5_form_of_drink",
        "surveyText": "ASK IF A4=7,8,9,10, 11, 12, OR 13\n\nForm of drink 1 and 2\n\nA5. When you had the **[INSERT A4]**, which of the following reflects the form of the drink?",
        "appliesTo": [
          "A5"
        ],
        "plainTextRule": "Ask A5 (form of drink) only for respondents who selected spirit-type A4 answers with codes 7-13 (vodka, whiskey/bourbon, tequila/mezcal, rum, gin, cordial, cognac).",
        "ruleType": "table-level",
        "conditionDescription": "Respondent must have A4 in {7,8,9,10,11,12,13}.",
        "translationContext": "A4 coding: the A4 question lists many beverage choices; the instruction above explicitly asks A5 only when A4 equals those numeric codes. Note: A4 also had fielding termination rules tied to S10C/S11C (these are fielding-level consistency checks and not captured as analysis filters here)."
      },
      {
        "ruleId": "rule_a6_on_premise_filter",
        "surveyText": "**ASK IF LOCATION 1/LOCATION 2 IS ON-PREMISE**\n\nWhen decided on drink 1 and 2\n\nA6. Which of the following reflect why you drank **[INSERT A4]**?",
        "appliesTo": [
          "A6"
        ],
        "plainTextRule": "Ask A6 only when the occasion's location is classified as ON-PREMISE.",
        "ruleType": "table-level",
        "conditionDescription": "Respondent's location code for the occasion must be in the ON-PREMISE set.",
        "translationContext": "Survey maps S9 values to ON-PREMISE and OFF-PREMISE. ON-PREMISE = S9 in {5,6,7,8,9,10,11,12,13,14,16} (per the 'ON-PREMISE' table). Use the S9 value for the corresponding loop occasion to resolve this."
      },
      {
        "ruleId": "rule_a10_number_people",
        "surveyText": "**ASK IF A9 DOES NOT EQUAL 1**\n\nNumber of people 1 and 2\n\nA10. Including yourself, how many people were with you when you had this drink? _Enter a whole number_.",
        "appliesTo": [
          "A10"
        ],
        "plainTextRule": "Ask A10 (number of people) only if A9 does not equal 'I was alone' (i.e., A9 <> 1).",
        "ruleType": "table-level",
        "conditionDescription": "Respondent must have selected an A9 response other than 1 ('I was alone').",
        "translationContext": "A9 is a 'Select all that apply' question with option 1 = 'I was alone' flagged as anchor/mutually exclusive; A10 shows only when A9 != 1."
      },
      {
        "ruleId": "rule_a13_brand_occasion",
        "surveyText": "ASK IF A4=~~4,5,~~7,8,9,10, 11, 12, OR 13\n\nBrand Occasion 1 and 2\n\nA13. What brand of **[INSERT A4]** did you have? _Select one_.",
        "appliesTo": [
          "A13"
        ],
        "plainTextRule": "Ask A13 (brand) only for the specified A4 beverage types. The strikethrough removes values 4 and 5 from the condition; the effective condition is A4 in {7,8,9,10,11,12,13}.",
        "ruleType": "table-level",
        "conditionDescription": "Respondent must have A4 in {7,8,9,10,11,12,13}. (Note: the source text shows values 4 and 5 struck through: ASK IF A4=~~4,5,~~7,8,9,10,11,12, OR 13 → interpret as A4 ∈ {7,8,9,10,11,12,13}).",
        "translationContext": "Strikethrough (~~4,5,~~) indicates values 4 and 5 were removed from the condition in the instrument; use the post-strikethrough set. A13 presents an 'INPUT BRAND LIST' and 'Store brand/Other/Don't know' anchors."
      },
      {
        "ruleId": "rule_a13b_followup",
        "surveyText": "**ASK A13b IF A13a=1**\n\nA13b. What other drinks did you have in addition to **[INSERT A4]**? Select all that apply.",
        "appliesTo": [
          "A13b"
        ],
        "plainTextRule": "Ask A13b only when A13a = 1 (respondent indicated they had additional drinks).",
        "ruleType": "table-level",
        "conditionDescription": "Respondent must have A13a = 1 (Yes, they had one or more other drinks).",
        "translationContext": "A13a is the immediate follow-up to A13 asking whether the respondent had other drinks in addition to the named A4 drink."
      },
      {
        "ruleId": "rule_a14a_a19_off_premise",
        "surveyText": "**ASK A14a-A19 IF LOCATION 1/LOCATION 2 IS OFF-PREMISE**\n\nPurchaser of Alcohol\n\nA14a. When you recently had a drink **[LOCATION]**, which of the following best describes your role in the original purchase of **[INSERT A4]** for it? _Select one._",
        "appliesTo": [
          "A14a",
          "A14b",
          "A15",
          "A16",
          "A17",
          "A18",
          "A19"
        ],
        "plainTextRule": "Ask A14a through A19 only for occasions where the location is classified as OFF-PREMISE.",
        "ruleType": "table-level",
        "conditionDescription": "Respondent's location code for the occasion must be in the OFF-PREMISE set.",
        "translationContext": "Survey maps S9 values to OFF-PREMISE. OFF-PREMISE = S9 in {1,2,3,4,15} (per the ON-/OFF-PREMISE coding table). Use the S9 value for the corresponding loop occasion to resolve this."
      },
      {
        "ruleId": "rule_a15_vodka_size",
        "surveyText": "**ASK IF A4=7 WAS CHOSEN FOR LOCATION 1/LOCATION 2 AND A14a=1**\n\nVodka Size 1 and 2\n\nA15. What size was the bottle of vodka you purchased at **[INSERT A14b ANSWER WITHOUT PARENTHESES]**? _Select one_, _your best estimate is fine if you can't remember._",
        "appliesTo": [
          "A15"
        ],
        "plainTextRule": "Ask A15 (vodka bottle size) only when A4 = 7 (Vodka) and A14a = 1 (respondent purchased the alcohol themself).",
        "ruleType": "table-level",
        "conditionDescription": "Respondent must have A4 = 7 (Vodka) AND A14a = 1 (I went to the store/made the purchase myself).",
        "translationContext": "A4 code 7 is Vodka per the A4 coding. A14a captures purchaser role; A15 is only relevant when the respondent purchased the vodka themself."
      },
      {
        "ruleId": "rule_a16_purchase_intent",
        "surveyText": "**A14a=1**\n\nPurchase Intent 1 and 2\n\nA16. Which of the following ~~best describes~~ describe why you decided to purchase **[INSERT A4]**? _Select_ ~~_one_~~ _all that apply._",
        "appliesTo": [
          "A16"
        ],
        "plainTextRule": "Ask A16 only when A14a = 1 (respondent was the purchaser of the alcohol).",
        "ruleType": "table-level",
        "conditionDescription": "Respondent must have A14a = 1 (I went to the store/made the purchase myself).",
        "translationContext": "A16 is placed under the A14a=1 heading, indicating it is only asked for respondents who purchased the product themselves."
      },
      {
        "ruleId": "rule_a17_intent_location",
        "surveyText": "**A14a=1**\n\nIntent for Location of Purchase 1 and 2\n\nA17. Earlier you said you purchased **[INSERT A4]** from **[INSERT A14b WITHOUT PARENTHESIS]**. Why did you purchase it there? _Select all that apply._",
        "appliesTo": [
          "A17"
        ],
        "plainTextRule": "Ask A17 only when A14a = 1 (respondent purchased the alcohol themself).",
        "ruleType": "table-level",
        "conditionDescription": "Respondent must have A14a = 1 (I went to the store/made the purchase myself).",
        "translationContext": "A17 appears under the A14a=1 heading; instrument notes to randomize answer order."
      },
      {
        "ruleId": "rule_a18_purchase_reason",
        "surveyText": "**A14a=1**\n\nPurchase Reason 1 and 2\n\nA18. Which of the following **best** describes why you chose to buy **[INSERT A4]** instead of another type of alcohol? _Select one._",
        "appliesTo": [
          "A18"
        ],
        "plainTextRule": "Ask A18 only when A14a = 1 (respondent was the purchaser).",
        "ruleType": "table-level",
        "conditionDescription": "Respondent must have A14a = 1.",
        "translationContext": "A18 is grouped under the A14a=1 section; PN: responses randomized."
      },
      {
        "ruleId": "rule_a19_brand_choice_reasons",
        "surveyText": "**A14a=1**\n\nPurchase Reason 1 and 2\n\nA19. When you purchased the **[INSERT A4]**, which of the following ~~best~~ describes why you chose **[INSERT BRAND FROM A13; IF A13=99:** that brand**]? _Select all that apply_.",
        "appliesTo": [
          "A19"
        ],
        "plainTextRule": "Ask A19 only when A14a = 1 (respondent was the purchaser).",
        "ruleType": "table-level",
        "conditionDescription": "Respondent must have A14a = 1 (I went to the store/made the purchase myself).",
        "translationContext": "A19 is a multi-select of reasons for choosing the brand; it appears in the A14a=1 block. PN: randomize answer order; note anchors."
      },
      {
        "ruleId": "rule_a22_brand_attribute",
        "surveyText": "**ASK IF ANY BRAND SELECTED IN A21**\n\nA22. Which of the following brands do you associate with the following attribute: **[INSERT ATTRIBUTE FROM ATTRIBUTE BRAND LIST IN APPENDIX IN BOLD/BLUE]**? _Select all that apply._\n\n**PN: ASK A22 ONCE FOR EACH ATTRIBUTE**-**RANDOMIZE ATTRIBUTE ORDER**; SHOW BRANDS SELECTED IN A21\\]",
        "appliesTo": [
          "A22"
        ],
        "plainTextRule": "Ask A22 only if the respondent selected at least one brand in A21. When asked, A22 should show only the brands the respondent selected in A21 and is repeated once per attribute.",
        "ruleType": "table-level",
        "conditionDescription": "Respondent must have selected one or more brands in A21 (A21 contains a selectable list of brands). Additionally, A22 is executed once per attribute from the ATTRIBUTE BRAND LIST and should display only the brands the respondent selected in A21.",
        "translationContext": "A21 is the brand awareness checklist (brands include Tito's, Grey Goose, Ketel One, Maker's Mark, Casamigos, Don Julio, None). ATTRIBUTE BRAND LIST contains attributes like Premium, Approachable, Authentic, etc. The programming note: 'ASK A22 ONCE FOR EACH ATTRIBUTE - RANDOMIZE ATTRIBUTE ORDER; SHOW BRANDS SELECTED IN A21'. Downstream translator: locate A21 selected-brand flags to drive which brand rows to display for each A22 attribute loop."
      },
      {
        "ruleId": "rule_a23_consideration_grid",
        "surveyText": "A23. How likely are you to consider the following brands the next time you have a drink? _Select one._\n\nPN: SHOW BRANDS SELECTED IN A21-RANDOMIZE BRAND LIST",
        "appliesTo": [
          "A23"
        ],
        "plainTextRule": "In the A23 grid, show only the brand rows that the respondent selected in A21 (i.e., each respondent sees only the brands they indicated at A21).",
        "ruleType": "row-level",
        "conditionDescription": "Display A23 rows only for brands where the respondent selected that brand in A21.",
        "translationContext": "A21 contains respondent brand selections. A23 uses those selections to define which brand rows to show. The response scale is 1-5 (Very Unlikely to Very Likely). Downstream translator should map A21 brand flags to A23 row inclusion."
      }
    ]
  },
  "metadata": {
    "rulesExtracted": 16,
    "durationMs": 143991
  },
  "processingInfo": {
    "timestamp": "2026-02-09T00:31:01.095Z",
    "aiProvider": "azure-openai",
    "model": "azure/gpt-5-mini",
    "reasoningEffort": "high"
  }
}