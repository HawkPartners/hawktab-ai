openapi: 3.0.1
info:
  title: Decipher Rest API
  version: '1.0'
  description: |
    The Decipher REST API allows comprehensive automation of your private or shared Decipher instance.

    # Introduction

    The new Decipher API is [RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer). This means that a
    URL represents a certain resource or collection of resources:

     * a collection of surveys available to you -- `/api/v1/rh/companies/all/surveys`
     * a specific survey -- `/api/v1/surveys/your/survey`
     * a list of all users -- `/api/v1/rh/users`
     * a specific user -- `/api/v1/rh/users/joe@yourcompany.com` or `/api/rh/users/4321`

    The convention is that accessing the "collection" URL gives you a list of resources, and appending the resource's ID
    lets you read or write that particular resource.

    A HTTP request to that resource will do something different depending on what HTTP method (verb) is used. This maps into
    the classical CRUD pattern: Create (POST), Read (GET), Update (POST), Delete (DELETE).

    # Accessing the API

    All API requests must happen over HTTPS only, with a base URL of `/api/v1/`. For example,
    you might send a GET request to `/api/v1/surveys/your/survey/data` to get the data for your
    survey using the "Data Out" API.

    In the distant future, we might upgrade the API to version 2. This will happen only if we need to make backwards incompatible
    changes. If at all possible, new parameters to existing functions will be added with default values. Old versions will
    be maintained for at least 3 years after being obsolete.

    Language support:

     * Python: https://pypi.python.org/pypi/decipher -- install using `[sudo] pip install decipher`

    The Python library includes a script called `beacon` that lets you easily call the API from the command line. The
    script will be more comfortable to use than a a tool like `curl`. Running `beacon login` will let you record
    your API key in a file and then let you run `beacon get surveys/your/survey/datamap format=json` to get a datamap.

    # API Keys

    To use the API, access the Portal and from your user menu select "API access".
    Select "Create API key" to create a new key. You can have any amount of keys per account which
    makes sense if you use the security restrictions to assign different roles and security levels to the keys.

    You may further restrict the usage of the API key to only certain calls, certain IP networks and also add
    an expiry date to the key. You may also want to create a user account specifically for API calls and grant that account
    access to a subset of your projects.

    The generated key should be sent in any requests via an HTTP header named "x-apikey".

    ```http
    GET /api/v1/hello
    x-apikey: 3efrh03ejve1wuv3wv3tt8xxf0ur8g7fcy25j7nkx0cgr40tfph515e7k1c8kv4r
    ```

    If you want to explore the API, the `beacon` script in the Python package above can be used to temporarily login to
    the system without requiring creation of an API key. See the [documentation](https://pypi.python.org/pypi/decipher).

    The API key is split into two parts: the first 32 characters are used to uniquely identify the key and never change
    once created. The last 32 characters are the secret (or password).

    # Error States

    The following HTTP response codes are used:

     + 200 - success; your data is in the response body
     + 401 - invalid authentication; your API key is invalid, expired or not valid from this IP or action
     + 402 - payment required: you have exceeded your monthly API calls
     + 403 - invalid authorization: your API key is valid but you are not allowed access to this survey
     + 404 - not found: you asked for a survey or other resource that does not exist
     + 405 - method not allowed: you tried to e.g. DELETE something that does not support deletion
     + 428 - reactivation required: the survey is hibernated and requires [reactivation](https://forstasurveys.zendesk.com/hc/en-us/articles/4409469957531-Forsta-Surveys-REST-API#7:_Response_Codes_and_Error_States) to access
     + 429 - too many concurrent requests
     + 400 - other invalid parameter not covered above, e.g. survey cannot be loaded due to an error

    A complete error response will look like this:

    ```http
    HTTP/1.0 401 invalid key. Verify the spelling of your key by accessing the Research Hub
    Content-Length: 108
    Content-Type: application/json

    {
     "$error": "invalid key. Verify the spelling of your key by accessing the Research Hub",
     "$code": 401
    }

    ```

    The `201 Created` response code (as recommended by some REST guides) is not currently used.


    # Accounting

    The number of API calls and resources spent for each call are tracked.
    Currently we do not set a limit on amount of calls or resource usage for each
    call. Future releases may have restrictions of number of monthly calls, burst
    calls and number of simultaneous calls.

    Every API response includes a header that shows number of API calls and resources used today:
      `x-usage-today: 26 2481`

    You can view a monthly usage report from your Portal "User Links" page.

    # Content-types and RESTfulness

    If your HTTP library can only use the POST method, pass instead a `_method` argument set to the real method you want.

    The URL to send data to always starts with the path `/api/v1/`. Afterwards you select a resource type and possibly the
    resource ID. Each resource may then have an additional action to perform. Examples:

     * `GET /api/v1/rh/companies/all/surveys` -- list all surveys (just as if you had accessed the Portal)
     * `GET /api/v1/surveys/demo/bapi20/datamap` -- get this survey's datamap
     * `POST /api/v1/surveys/demo/bapi20/state/close`  -- close this survey
     * `GET /api/v1/rh/apikeys` -- list API keys for your company's users
     * `GET /api/v1/rh/apikeys/12435678 ` -- get data for a specific API key
     * `DELETE  /api/v1/rh/apikeys/12435678` -- disable that key

    Not used REST features: caching, ETag, conditional requests (if-modified-since).

    The Decipher API supports XML output, as defined by the [IBM JSONX specification](http://pic.dhe.ibm.com/infocenter/wsdatap/v6r0m0/index.jsp?topic=%2Fcom.ibm.dp.xm.doc%2Fjson_jsonx.html).

    To retrieve an XML version of any resource, specify the header `accept: application/xml`. Example output:

    ```xml
    <array xmlns="http://www.ibm.com/xmlns/prod/2009/jsonx">
      <object>
        <null name="restrictions"/>
        <number name="user_id">505</number>
        <number name="calls">0</number>
        <string name="user_fullname"></string>
        <string name="created_on">2014-09-23T18:10:43Z</string>
        <string name="key">eektgvwv8ynuuye9vfgfc36bah79v42r</string>
        <boolean name="active">true</boolean>
        <number name="resource">0</number>
        <string name="user_name">apitest</string>
        <null name="user_email"/>
      </object>
    </array>
    ```

    Throughout the document, [JSON terminology](http://en.wikipedia.org/wiki/JSON) is used for data types. Thus an `object`
    is a mapping of `properties` (which are always strings) to `values` (also known as "dict", "dictionary",
    "hash" or "map" in other languages):

        {"property" : "some_value", "other_property" : [1,2,3]}

    An array is a sequence of elements:

        [element0, element1, element2]

    Each value in an array or object can be null, an object, an array, a string (which may contain any unicode character),
    a number (all numbers are floating points) or a boolean constant (`true` or `false`).

    # Dates

    Date times use the ISO-8601 standard. *You must specify a timezone* in all datetime parameters.

    Example formats:

     * `2014-01-10T20:08:08Z` -- GMT/UTC timezone (Z suffix)
     * `2014-01-10T20:08:08+00:00` -- GMT/UTC timezone (explicit offset)
     * `2014-01-10T15:08:08-05:00` -- Eastern Standard Time (UTC-5)
     * `2014-01-10T21:08:08+01:00` -- Central European Time (UTC+1)

    # Security

    A preferred option is to create a new user account for API usage with restricted access rather than user
    your own account that will have full access. You don't have to login to that user but can create an API key
    for them from your [API access page](https://selfserve.decipherinc.com/apps/api/keys).

    You can also create any amount of restricted API keys. Restrictions can allow:

     * only certain API calls to be used (i.e. you may only access the user list)
     * only certain methods to those calls to be used (i.e. you may only list users, but not create new ones)
     * force parameters (i.e. you can use the datamap API but only for survey X, Y, Z)

    A restriction configuration is an optional Javascript object. If it is {}, there are no restrictions. Otherwise it may
    contain the following values:

     * `networks`: limit access to only these IP addresses or networks. Specify an array such as `["1.2.3.4"]` or `["5.6.7.0/24", "3.4.5.3"]`.
     Each item must be an IP (v4) address only or a proper network (i.e. `5.6.7.0/24` is allowed but `5.6.7.1/24` is not: the network bits
     must be cleared).

    We had an old "data API" that used basic authentication. That old API will eventually be deprecated.

    When a API key is used to make a API request with a unsecure connection (HTTP) we assume that that key has been compromised
    and will deactivate that key immediately. A new key can be generated and used for HTTPS requests.

    # Additional features

    Every API supports simple projection to let you select a subset of data. Pass in `select` as an argument set to a
    comma-separated list of properties to return, e.g. `select=id,login,active` to view only those 3 fields when calling
    `rh/users`.

    APIs that return an array of objects can return data in Excel 2007 format instead of JSON. Pass in `contentType` set to
    `excel`. Pass in e.g. `top=5` to return only he first 5 objects of an array.

    API calls are normally synchronous, blocking the connection until fully complete. There's a 30 minute network timeout
    on such calls, and converting a large dataset to a proprietary format like SPSS SAV can take longer than that. As
    a workaround, you can force any API call to become a task by passing in `forceTask` parameter set to any value.

    Async tasks run in the background: the first API call will return an `ident` value you must pass to [/api/v1/status](/docs/decipher/api#operation/getStatus). 
    The status API will tell you when the task is done: if the API returns simple JSON it is returned as part of the status call. If the API returns a zip file,
    call [/api/v1/status/content](/docs/decipher/api#operation/getStatusContent) to get it.

    # Impersonation

    An API key belonging to a staff or supervisor user can change its identity to any other user for the duration fo the API call. This
    is useful when acting on behalf of that user without having to create separate API keys for each user. To perform impersonation,
    send the `x-impersonate` header containing the email address or numeric user ID. You must be able to manage this user in the
    portal to impersonate them. Additional information about this is logged in the audit log of the impersonator and the subject.
servers:
  - url: https://{server}/api/v1
    description: Replace server with your instance domain.
    variables:
      server:
        default: selfserve.decipherinc.com
        description: Server domain
security:
  - APIKey: []
tags:
  - name: Data Feed
    description: |
      Get data from multiple live surveys using a single API endpoint
      (optionally restrict by date and survey paths). A paginated response
      (10,000 records at a time) with data will be received; once
      it’s explicitly acknowledged by another API call, next call will
      receive new data since last call. Decipher 28. You can fetch data for
      qualified participants or all participants; you can fetch all answers
      or just e.g. UUID, source and status. You create any amount of
      simultaneous feeds and can also get data only for a subset of surveys
      rather than all available to your user.
  - name: Modifying Data
    description: |
      Allows for modification of the participant data. Depending on verb selected you are either deleting/disqualifying participants,
      modifying data of an existing participant or creating completely new participant records. This is similar to the actions possible
      through the "Edit Data" system as seen in [View/Edit Responses report](https://forstasurveys.zendesk.com/hc/en-us/articles/4409477217819)

      Support for this was added in `Decipher 28`.

      Return object:
      * `stats` (object): overall statistics of what happened with your data edit requested:
          * `created` (int): number of new records created
          * `deleted` (int): number of records deleted
          * `disqualified` (int): number of qualified records disqualified or deleted
          * `unseen` (int): number of rows that did not match existing records when not creating new records
          * `rewritten` (int): records where data was modified
          * `unchanged` (int): records where your updated data did not cause changes
          * `inrows` (int): total amount of records processed (rewritten + unchanged + deleted + created)
          * `fieldsIdentical` (int): data update requests not done because existing data was identical. This counts individual cells
          * `fieldsUpdated` (int): data fields updated by the request
          * `fieldsErronous` (int): data supplied that was not valid
          * `fieldsIgnored` (int): cells ignored because uploading into legacy weight/record values (this is for surveys older than 2005)
          * `fieldsProcessed` (int): total fields processed
          * `bad` (array): invalid values detected during edit/update
          * `rows` (int): number of fields in your input data
          * `unmatchedDeletions` (int): records that you asked to be deleted but did not match existing records


       * `backup` (string): where is the previous version of the data? This can be restored by support or a shell user on a Beacon Cloud installation

      Additional error codes:
      * 400 invalid key: the `key` supplied is not a valid variable
      * 400 bad variable \<name\>: some of the variables supplied in data do not exist or cannot be updated.


      **Performance notes**: The Decipher data files are geared towards analysis rather than editing and updates.
       During the data editing process, participants will be prevented from completing the survey.
       The time to complete a data edit will vary with amount of participants in the data file and number of variables but a
       typical speed is 1,000 records / 25,000 cells per second.

      After a data edit, many “cache entries” are cleared such as virtual data. If your report has a complex virtual
      question, the next report run might take extra time to complete.

      **Partial data:** Note that while you can modify partial participant data, if the participant returns and submits
      more data which is recovered or completes, the changes will be overwritten. Deleting a partial participant will
      stop further automatic recovery, but will not prevent the participant from completing again.

      **Errors:** An upload of a row with data that is not correct will **not stop** the correct data from being applied. E.g. you if you
      modify q1 to a valid value 2, and q2 to an invalid value 5 the application of q1 will still happen. If it's critical to avoid
      this, start by modifying the data in a `test` mode first and check that `fieldsErronous` is 0.

      **Data:**  Each data record may include different variables. Thus it is possible to change only variable q1 for one record
      and only change q2 for another record.  Any virtual variables included in the data will be ignored.

      **Special fields:** The `date` field must be supplied in the server's time format and time zone. On all but 1 of Decipher servers,
      the time format is `%m/%d/%Y %H:%M` i.e. Month, Day, Year (4 digit), then 24-hour and minute. Note that this means while
      seconds are stored in the data file, they can only be imported as 0.

      **Logging:** Changes through this API are logged, but do not trigger the data edit notification email.

      **Memory usage:** Importing a 50 megabyte file containing 1 million records each with 4 fields requires 1500 MB memory. The
      overhead comes mostly from number of cells in the data array imported at once.

      + Parameters
          + survey (string)... The survey to edit data in. You must have `data edit` permission for the project.
          + key:`uuid` (string) - The field used to match your participant data. This should be a unique variable. Supplying a non-unique `key` will change every matching record. This is implicitly `null` when creating new records.
          + data (array)... An array of the participant records. Each element of the array is an object with the key being the column name matching a variable name, and the value the value you want to update. You can specify any amount of variables.
          + test =`false` (boolean,optional)... Do not execute the edit, but return the changes that would be applied at the time of the call.
          + layout (int, optional)... The id of a custom data layout. A custom export layout can relabel fields. If you exported some data   with fields that have been relabelled in a layout and now are importing it back, you should use the same layout.
          + allVariables =`false` (bool, optional)... Allow editing of notdp variables
  - name: Datasources
    description: |
      Create new questions in a survey (reporting or survey time).
      This corresponds to [Import Data Element](https://decipher.zendesk.com/hc/en-us/articles/360010271373).
  - name: Datasources Data
    description: |
      Append, replace or delete data for a datasource. The data argument
      can be either an array of objects (JSON), a tab delimited file encoded
      as a single string (utf8 only) or an Excel 2007 file encoded as base-64.
  - name: Research Hub
    description: Examine and manage users on the system.
  - name: Reporting
    description: Describe this top-level section here.
  - name: Sample Management
    description: Describe this top-level section here.
  - name: Distribution
    description: You can receive any data as a response to your API. However what if you want to send someone an email with a PDF report? We provide a number of generic "meta-APIs" where you can take output of any API call and send it as an attachment via email or other means.
  - name: Campaign Manager
    description: Describe this top-level section here.
  - name: Question Library
    description: Describe this top-level section here.
  - name: Language Manager
    description: Describe this top-level section here.
  - name: Project Parameters
    description: Describe this top-level section here.
  - name: Web Intercepts
    description: |
      **You must have at least dashboard view permissions to access this endpoint.**

      The `webconf_id` used in the below endpoints is the part of the webconf
      filename after the dash (and before the extension) (i.e.
      `webconf-<webconf_id>.js`)
  - name: Translation Reservations
    description: |
      The translation reservation system is used to mark translations which have
      already been pulled for translating and to prevent deltas from being pulled
      multiple times.
paths:
  /autoclose/planned:
    get:
      operationId: getAutoclosePlanned
      summary: |
        Get a list of surveys visible to you that are scheduled to be automatically closed
        within the specified number of days.
      tags:
        - Autoclose
      parameters:
        - name: advance_days
          description: Days in advance to compute autoclose date
          required: false
          in: query
          schema:
            type: integer
            default: 0
          example: 2
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    finish_time:
                      description: The date and time when the last respondent finished taking the survey
                      example: '2023-10-25T20:39:03Z'
                      type: string
                      format: ISO 8601 timestamp with timezone
                    path:
                      description: The survey path.
                      example: selfserve/60e/230800
                      type: string
                    last_access:
                      description: The date and time when the survey was last accessed.
                      example: '2023-10-25T20:39:03Z'
                      type: string
                      format: ISO 8601 timestamp with timezone
                    close_time:
                      description: The date and time when the survey will be automatically closed.
                      example: '2023-10-25T20:39:03Z'
                      type: string
                      format: ISO 8601 timestamp with timezone
                    title:
                      description: The survey title
                      example: SP NM Feedback Survey || Version 2
                      type: string
                      format: ISO 8601 timestamp with timezone
  /surveys/{survey}/data:
    get:
      operationId: getSurveyData
      summary: Download data
      description: |
        Returns list of survey responses filterable through a robust set of query
        parameters.

        ## Formats

        The following data formats can be requested using the `format` parameter.

        Format | Description
        --------------|------------------
        `tab` | A tab-delimited format with column headings.
        `fwu` | A fixed-width format with offsets based on unicode characters.
        `fw` | A fixed-width format with offsets based on raw bytes
        `flat` | A flattened format containing OE data
        `flat_all` | A flattened format containing non-blank data for all fields.
        `pipe` | A pipe delimited format with column headings.
        `csv` | A comma delimited format with column headings.
        `cb` | An IBM column binary.
        `json` | Standard JSON.
        `spss` | The SPSS default format (SPSS 15).
        `spss16` | SPSS 16+ (*.sav) file with Unicode Support (zipped).
        `spss15` | SPSS 15 (*.sav) file (zipped).
        `spss16_oe` | SPSS 16+ (*.sav) file including all OE data (zipped).
        `spss_data` | A fixed-width data file and SPSS script file (zipped).

        ## Content Types

        Content type differs dependent on the requested `format`.

        Content Type | Format
        --- | ---
        application/json | json
        text/plain; charset=utf-8 | tab, fw, flat, flat_all, pipe, csv, fw, fwu
        application/octet-stream | cb
        application/zip | spss, spss15, spss16, spss16_oe, spss_data

        Available keywords: `all, qualified, terminated, overquota, partials, everything`.
      tags:
        - Data
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: format
          in: query
          description: The data format requested.
          example: flat
          schema:
            type: string
            enum:
              - tab
              - fw
              - flat
              - flat_all
              - pipe
              - csv
              - fwu
              - cb
              - json
              - spss
              - spss15
              - spss16
              - spss16_oe
              - spss_data
            default: tab
        - name: layout
          in: query
          description: The layout ID, either hardcoded or retrieved using Layouts API. Standard layout is used by default if no layout ID is specified.
          example: 123456
          schema:
            type: integer
        - name: fields
          in: query
          description: The list of field names to retrieve.
          schema:
            type: array
            items:
              type: string
          examples:
            oneField:
              value:
                - q1
            multipleFields:
              value:
                - q1
                - q2
                - q3
        - name: start
          in: query
          description: |
            Start date.

            Setting start will restrict the API results to respondents who were last active in the survey after that "start" parameter. This corresponds to the "date" field in downloads. This date field is not affected by data edits.
          example: 2020-01-01T00:00Z
          schema:
            type: string
            format: ISO-8601
        - name: end
          in: query
          description: |
            End date.

            Setting end date will restrict the API results to respondents who were last active in the survey before the "end" parameter. This corresponds to the "date" field in downloads. This date field is not affected by data edits.
          example: 2020-12-31T00:00Z
          schema:
            type: string
            format: ISO-8601
        - name: cond
          in: query
          description: |
            The condition required to retrieve the participant. This is a Python
            condition as if you would enter in survey logic or crosstabs. For
            example, `qualified and q3.r2` retrieves only participants that were
            `qualified` and answered `q3` as `r2`. 

            You can also pass a crosstab id with `xt:<crosstabId>` where the `<crosstabId>`
            is the last part of the crosstab report url. For example if the url is:
            `https://example.decipherinc.com/apps/report/selfserve/545/231002#!/report/nx09qh7uvq455tgg`
            the `<crosstabId>` would be `nx09qh7uvq455tgg`. This extracts based on those who belong to
            the first segment of the Crosstabs report. You can extract data for a different segment
            by specifying it this way: `xt:<crosstabId>:2`, 2 being the segment number.
          example: qualified and q1.r1
          schema:
            type: string
            default: all
        - name: stacking
          in: query
          description: |
            Argument to specify stacked data file. Options are `top` which outputs
            all the non-looped variables and `label` which outputs the looped data
            for the specific loop label.
          example: top
          schema:
            type: string
        - name: language
          in: query
          description: Get the datamap in a different language. Supported for spss variants only. Specify the language name as configured in the survey.xml (e.g. french or spanish_mexico).
          example: french
          schema:
            type: string
        - name: meta
          in: query
          description: |
            Argument to specify miscellaneous options to control the results. The 
            available options are:
            - modified - Makes the API output and filter results by the record's 
            `data_updated` field, rather than `last_activity`.
            - date - Include an additional $date field in the output that will show
            the respondent's completion time in ISO-8601 format.
          example: modified,date
          schema:
            type: array
            items:
              type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/surveyData'
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/data?format=json
        - lang: Cli
          source: |
            beacon get surveys/{survey}/data format=json > myfile.json
    post:
      operationId: createSurveyData
      summary: Download data
      description: |
        This is equivalent to the GET request. However GET requests are limited to
        around 1000-character URLs. We include a POST version that does not generate
        data but allows for any amount of fields to be specified.

        Available keywords: `all, qualified, terminated, overquota, partials, everything`.
      tags:
        - Data
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                format:
                  description: The data format requested.
                  enum:
                    - tab
                    - fw
                    - flat
                    - flat_all
                    - pipe
                    - csv
                    - fwu
                    - cb
                    - json
                    - spss
                    - spss15
                    - spss16
                    - spss16_oe
                    - spss_data
                  type: string
                  default: tab
                  example: json
                layout:
                  description: |
                    The layout ID, either hardcoded or retreived using Layouts API.
                  type: integer
                  example: 123456
                fields:
                  description: The list of field names to retrieve.
                  type: array
                  items:
                    type: string
                  example:
                    - q1
                start:
                  description: |
                    Start date.

                    Setting start will restrict the API results to respondents who were last active in the survey after that "start" parameter. This corresponds to the "date" field in downloads. This date field is not affected by data edits.
                  type: string
                  format: ISO-8601
                  example: 2020-01-01T00:00Z
                end:
                  description: |
                    End date.

                    Setting end date will restrict the API results to respondents who were last active in the survey before the "end" parameter. This corresponds to the "date" field in downloads. This date field is not affected by data edits.
                  type: string
                  format: ISO-8601
                  example: 2020-12-31T00:00Z
                cond:
                  description: |
                    The condition required to retrieve the participant. This is a
                    Python condition as if you would enter in survey logic or
                    crosstabs. For example, `qualified and q3.r2` retrieves only
                    participants that were `qualified` and answered `q3` as `r2`.
                  type: string
                  default: all
                  example: qualified and q1.r1
                stacking:
                  description: |
                    Argument to specify stacked data file. Options are `top` which
                    outputs all the non-looped variables and `label` which outputs
                    the looped data for the specific loop label.
                  type: string
                  example: top
                meta:
                  description: |
                    Argument to specify miscellaneous options to control the results. The 
                    available options are:
                    - modified - Makes the API output and filter results by the record's 
                    `data_updated` field, rather than `last_activity`.
                    - date - Include an additional $date field in the output that will show
                    the respondent's completion time in ISO-8601 format.
                  type: array
                  items:
                    type: string
                  example:
                    - modified
                    - date
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/surveyData'
  /surveys/{survey}/datamap:
    get:
      operationId: getSurveyDatamap
      summary: Retrieve datamap
      description: |
        Survey datamaps are the structured representation of the survey questions and
        configurations. The following formats are supported for datamaps.

        ## Formats

        Format | Description
        --------------|------------------
        `json` | Standard JSON.
        `json_stacked` | A JSON object where the keys are the loop IDs and the values are the datamap for the stacked configuration.
        `html` | Plain HTML.
        `text` | Plain text.
        `tab` | A tab-delimited format with column headings.
        `xlsx` | Microsoft Excel spreadsheet with column headings
        `fw-html` | A fixed-width format with offsets based on raw bytes (HTML)
        `fw-tab` | A fixed-width format with offsets based on raw bytes (Tab)
        `fw-text` | A fixed-width format with offsets based on raw bytes (Text)
        `cb-html` | An IBM column binary (HTML).
        `cb-tab` | An IBM column binary (Tab).
        `cb-text` | An IBM column binary (Text).
        `uncle` | ?
        `sss` | Triple-S 1.5 XML
        `sas` | ?
        `quantum` | ?
        `spss_fw` | SPSS format with fixed-width start/stop annotations
        `spss_tab` | SPPS format in tab delimited format
        `netmr-tab` | Net MR datamap in fixed-width format
        `netmr-csv` | Net MR datamap in comma-delimited format
      tags:
        - Data
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: format
          in: query
          required: true
          description: The requested response format.
          example: json
          schema:
            type: string
            enum:
              - json
              - json_stacked
              - html
              - text
              - tab
              - fw
              - xlsx
              - fw-html
              - fw-tab
              - fw-text
              - cb-html
              - cb-tab
              - cb-text
              - uncle
              - sss
              - sas
              - quantum
              - spss_fw
              - spss_tab
              - netmr-tab
        - name: layout
          in: query
          description: The layout ID. Standard layout is used by default if no layout ID is specified.
          example: 12345
          schema:
            type: integer
        - name: qa
          in: query
          description: Include QA codes (only available for HTML formats)
          example: true
          schema:
            type: boolean
        - name: language
          in: query
          description: Get the datamap in a different language. Supported for html, text, tab, any fw, json, json_stacked, spss_fw and sss only. Specify the language name as configured in the survey.xml (e.g. french or spanish_mexico).
          example: french
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/surveyDatamap'
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/datamap?format=json
        - lang: Cli
          source: |
            beacon get surveys/{survey}/datamap format=json > myfile.json
  /surveys/{survey}/layouts:
    get:
      operationId: getSurveyLayouts
      summary: Retrieve all data layouts
      description: |
        List all layouts configured for survey. Layouts can be configured using the
        [Data Layout Manager](https://forstasurveys.zendesk.com/hc/en-us/articles/4409477222299).
      tags:
        - Data
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/surveyLayout'
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/layouts
        - lang: Cli
          source: |
            beacon get surveys/{survey}/layouts > myfile.json
  /surveys/{survey}/layouts/{layout_id}:
    get:
      operationId: getSurveyLayout
      summary: Retrieve a single data layout
      description: |
        Retrieves the data layout for the provided layout ID.
      tags:
        - Data
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: layout_id
          in: path
          description: The data layout ID.
          example: 123
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/surveyLayout'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    type: string
                    description: error description
                  $code:
                    type: integer
                    description: http error code (404)
                  extra:
                    type: string
              example:
                $error: Layout not found
                $code: 404
                extra: null
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/layouts/{layout_id}
        - lang: Cli
          source: |
            beacon get surveys/{survey}/layouts/{layout_id}
  /surveys/{survey}/coverage:
    get:
      operationId: getSurveyCoverage
      summary: Execute coverage report
      description: |
        The coverage report shows number of participants shown each question, split by the desired segments. It can be called
        with a Crosstabs dlident produced by crosstabs (looks like ~123.456) or by explicitly specifying Crosstab segment
        conditions (e.g. "q1.r1,q1.r2") and a precondition (like "qualified")
      tags:
        - Data
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: segments
          in: query
          required: true
          description: Comma-separated list of segments to split by
          example: q1.r1,q1.r2,q1.r3
          schema:
            type: string
        - name: precondition
          in: query
          description: Precondition
          example: qualified
          schema:
            type: string
        - name: config
          in: query
          description: Crosstabs dlident. Specify EITHER config or segments and precondition
          example: ~123.456
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  segments:
                    description: segments used for the calculations
                    type: array
                    items:
                      type: object
                      properties:
                        count:
                          type: integer
                          description: participants in the segment
                        cond:
                          type: string
                          description: condition for segment membership
                        title:
                          type: string
                          description: human-given title
                    example:
                      - count: 10
                        cond: q1.r1
                        title: R1 segment
                  questions:
                    type: array
                    description: questions and their answered/shown counts per segment
                    example:
                      - label: q1
                        title: Question 1
                        shown:
                          - 5
                        answered:
                          - 4
                    items:
                      type: object
                      properties:
                        shown:
                          type: array
                          description: participants who saw this question in each segment
                          items:
                            type: integer
                        answered:
                          type: array
                          description: participants who answered this question in each segment
                          items:
                            type: integer
                        label:
                          type: string
                          description: question label
                        title:
                          type: string
  /datafeed/{feed}:
    get:
      operationId: getDatafeed
      summary: Get new data
      description: |
        Every live or closed survey accessible to this account will be considered for the feed. This list can be filtered by
        the `paths` argument. Once a complete list of surveys has been generated, participants with data update time greater
        than the last time the feed was ran are retrieved. If `start` is supplied, then the participant is further filtered.

        By default `cond` is set to `qualified` retrieving only qualified participants. You can specify `ALL` for all participants
        including partials or other conditions known, to Crosstabs. Invalid conditions will be returned as errors but will not
        prevent other surveys' data from being generated.

        **Pagination**: This call will return 10,000 participants at a time. If more would be generated, `complete` will be set to false
        in the returned record and you should call this function again to get more data. A complete feed means that at the time
        of each survey being processed, no more data was available.

        **Data format**: The data returned uses the JSON data format, using the default variable layout.

        **Acknowledgement**: If you set `autoAck` to true, the data is automatically advanced. If not, every time you receive
        data and after you successfully process it you must make the /ack call as documented below with the ack value you received.
        Otherwise the feed is not advanced and you will receive the data again. Note there is no guarantee that you receive
        exactly the same response as in the last call as new surveys or participants may have appeared. However the data you were
        sent is guaranteed to be sent again.

        **When to use ACK**: If you do not use the ACK system, Decipher advances the feed state as soon as the entire request was
         completed -- even if the network connection is reset before you have received the entire reply, or if an error is generated while
         you are processing the data. We only recommend `autoAck` for testing purposes.

        **Partial data**: If you supply `ALL` as `cond` rather than the default `qualified` then partial data is also included. The
        same participant record may appear multiple times: once each time his partial data is updated and once if they complete.

        **Data edits**: a data edit that modifies participant data does NOT resend the data.

        **New surveys**: The list of surveys to include in the feed is considered on every request. As new surveys go live or are
         closed they will be added to the feed. Set `paths` to a specific subset of the surveys you want if you want consider only
         those. This will filter the list of live and closed surveys to include only those specified. This must be repeated for
         every request.

        The response is an object containing these fields:
          * `complete`: if true, this response is all the data available. If false, more data exists and you should continue to ask for the data feed to get more data immediately. By default, no more than 10,000 records will be sent at a time.
          * `ack`: this UUID describes this particular response value; the feed will move forward only if the caller acknowledges receipt in the next call (see below).
          * `results`: an array of participant records. Each participant record contains:
           * variables from the default layout as per JSON data record
           * `$survey` set to the path of the survey
      tags:
        - Data Feed
      parameters:
        - $ref: '#/components/parameters/feed'
        - name: start
          in: query
          description: |
            ISO-8601 date with the minimum completion time to retrieve.
            Record before this date will not be considered.
            This parameter should be passed with the same value
            every time until data has been exhausted. Thus it should
            only be used if somehow data received is lost and needs
            to be re-synchronized.
          schema:
            type: string
            format: date-time
        - name: format
          in: query
          description: |
            Normally not used. Use json_panel as value to synchronize
            data with a participant panel (this feature is enabled
            only for certain clients)
          schema:
            type: string
            default: json
        - name: autoAck
          in: query
          description: |
            If set to true, no ack call is required to move
            the feed forward.
          schema:
            type: boolean
            default: false
        - name: states
          in: query
          description: |
            List of survey states to accept data from. By default
            only live and closed surveys are scanned for data but
            through this parameter you may include surveys in dev or
            testing mode.
          schema:
            type: array
            default:
              - live
              - closed
            items:
              type: string
              enum:
                - live
                - closed
                - testing
                - dev
        - name: paths
          in: query
          description: |
            If specified, return only the data from the list of survey
            paths provided that you have permission to view.
          example:
            - selfserve/xyz/123456
          schema:
            type: array
            items:
              type: string
        - name: fields
          in: query
          description: |
            Extract only these variables from all the surveys.
          schema:
            type: array
            items:
              type: string
        - name: cond
          in: query
          description: |
            By default only qualified participants are fetched. Specify
            ALL for all data or another condition (which must be
            applicable to ALL your surveys)
          schema:
            type: string
            default: qualified
            enum:
              - all
              - qualified
        - name: limit
          in: query
          description: |
            Limit the number of results returned per request.
          schema:
            type: integer
            default: 10000
        - name: surveyLabels
          in: query
          description: |
            If survey labels should be part of the request.
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    ack:
                      type: string
                      format: uuid
                      description: |
                        This UUID describes this particular response value.
                        The feed will move forward only if the caller acknowledges
                        receipt in the next call.
                    errors:
                      type: object
                    results:
                      type: array
                      description: |
                        An array of participant records.
                      items:
                        type: object
                        properties:
                          status:
                            description: The survey completion status.
                            example: 1
                            type: integer
                          uuid:
                            type: string
                            format: uuid
                            description: The survey `uuid`.
                            example: jwy3kwppp4yuqg86
                          returl:
                            type: string
                            format: url
                            example: https://azkaban.decipherinc.com/survey/selfserve/53b/191004?state=c8ed2b43-8525-4aed-9651-6460940d411e
                          vmobiledevice:
                            type: integer
                            description: The respondent's mobile device code.
                            example: 5
                          url:
                            type: string
                            description: The survey builder url.
                            example: http://release.decipherinc.com/survey/selfserve/1a/123456
                          $survey:
                            type: string
                            description: The survey path.
                            example: selfserve/53b/191005
                          vbrowser:
                            type: integer
                            description: The respondent's browser code.
                            example: 11
                          qtime:
                            type: number
                            format: float
                            description: The elapsed time (seconds) from survey start to complete.
                            example: 56.235
                          list:
                            type: integer
                            example: 0
                          dcua:
                            type: string
                            example: ..
                          markers:
                            type: string
                            example: qualified,/totalQuota/Total
                          record:
                            type: integer
                            example: 1
                          session:
                            type: string
                            format: uuid
                            description: Unique user session ID.
                            example: cwsps4gewqc0p175
                          vos:
                            type: integer
                            description: The respondent's operating system (os).
                            example: 13
                          date:
                            type: string
                            example: 09/02/2020 14:52
                          vlist:
                            type: integer
                            example: 1
                          userAgent:
                            type: string
                            example: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.13; rv:69.0) Gecko/20100101 Firefox/69.0
                          vmobileos:
                            type: integer
                            example: 6
                          start_date:
                            type: integer
                            example: 10/17/2019 15:09
                          q1:
                            description: An example question response
                            example: '8'
                            type: string
                          q2a:
                            description: An example question response
                            example: I thought it was great.
                            type: string
                          q2b:
                            description: An example question response
                            example: I thought it was not so great.
                            type: string
                    complete:
                      type: boolean
                      description: |
                        If true, this response is all the data available. If false,
                        more data exists and you should continue to ask for the
                        data feed to get more data immediately. By default, no more
                        than 10,000 records will be sent at a time.
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/datafeed/myFeed
        - lang: Cli
          source: |
            beacon get datafeed/myFeed > myfile.json
    put:
      operationId: updateDatafeed
      summary: Update feed
      description: |
        Updates the internal feed state. Call the Feed state GET method below
        to get the current state. You can then e.g. copy it over to another name.
      tags:
        - Data Feed
      parameters:
        - $ref: '#/components/parameters/feed'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                state:
                  type: string
                  description: A state previously retrieved using `datafeed/{feed}/state`
              required:
                - state
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X PUT {server}/api/v1/datafeed/myNewFeed?state=0a66d78d-46cd-47fb-a1f7-e6d779e6b7c6
        - lang: Cli
          source: |
            beacon PUT datafeed/myFeed state=0a66d78d-46cd-47fb-a1f7-e6d779e6b7c6
    delete:
      operationId: deleteDatafeed
      summary: Reset feed
      description: |
        Clears the state of the feed. The next `GET` request will receive data
        from the beginning.
      tags:
        - Data Feed
      parameters:
        - $ref: '#/components/parameters/feed'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X DELETE {server}/api/v1/datafeed/myFeed
        - lang: Cli
          source: |
            beacon delete datafeed/myFeed
  /datafeed/{feed}/state:
    get:
      operationId: getDatafeedState
      summary: Get feed state
      description: |-
        Returns the stored internal state for this feed. This is mainly for troubleshooting processes. An object with a single key, state, its value an object mapping survey path to a list of two items:
        - 0: minimum timestamp for data retrieval - 1: an array of UUIDs of records retrieved
        The list of UUIDs is only set if data was partially retrieved during a POST due of exceeding the 10,000 element limit. Once a survey’s data has been completely returned up until a timestamp, this list is cleared.
      tags:
        - Data Feed
      parameters:
        - $ref: '#/components/parameters/feed'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    ack:
                      type: string
                      format: uuid
                      description: |
                        This UUID describes this particular response value.
                        The feed will move forward only if the caller acknowledges
                        receipt in the next call.
                    current:
                      type: object
                    pending:
                      type: object
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/datafeed/myFeed/state
        - lang: Cli
          source: |
            beacon get datafeed/myFeed/state
  /datafeed/{feed}/ack:
    post:
      operationId: createDatafeedAck
      summary: Acknowledge feed
      description: |
        Call this method to move the data feed forward.
      tags:
        - Data Feed
      parameters:
        - $ref: '#/components/parameters/feed'
        - name: ack
          in: query
          required: true
          description: |
            The `ack` value you received from calling `GET`.
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ack_valid:
                    type: boolean
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/datafeed/myFeed/ack?ack=0a66d78d-46cd-47fb-a1f7-e6d779e6b7c6
        - lang: Cli
          source: |
            beacon get datafeed/myFeed/ack ack=0a66d78d-46cd-47fb-a1f7-e6d779e6b7c6
  /surveys/{survey}/summary/completions:
    get:
      operationId: getSurveySummaryCompletions
      summary: List completions
      description: |
        Returns the equivalent of the “Completions” tab in the Response Summary
        report (formerly known as field report).
      tags:
        - Response Summary
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: split
          in: query
          description: If supplied, create segments for this split.
          schema:
            type: string
            example: list
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  segments:
                    type: array
                    description: |
                      List of segment names, e.g. “Total”, “Participant
                      source (list=1)” similar to column names when splitting.
                    items:
                      type: string
                  rows:
                    type: array
                    description: |
                      List with one object per a row that would be displayed
                      in the Completions tab
                    items:
                      type: object
                      properties:
                        formula:
                          type: string
                          description: |
                            The formula used to compute the value.
                            This should be used to search for specific values.
                          example: clickthrough
                        cells:
                          type: array
                          description: |
                            one object for each segment the response summary is
                            split by
                          items:
                            type: object
                            properties:
                              vsplit:
                                type: string
                                description: |
                                  The split identifier. This can be passed to the
                                  variables down URL (`/rep/{survey}:vars?only=VSPLIT`)
                                  and this is what the “Clickthrough” cell links to
                                  in the response summary user interface.
                                example: ''
                              raw:
                                type: number
                                description: |
                                  The raw numeric value
                                format: float
                                example: 0.76
                              formatted:
                                oneOf:
                                  - type: string
                                    example: 76%
                                  - type: integer
                                    example: 500
                                description: |
                                  The formatted value.
                              title:
                                type: string
                        name:
                          type: string
                        title:
                          type: string
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/summary/completions?split=list
        - lang: Cli
          source: |
            beacon get surveys/{survey}/summary/completions split=list > myfile.json
  /surveys/{survey}/summary/campaigns:
    get:
      operationId: getSurveySummaryCampaigns
      summary: List campaigns
      description: |
        Returns the equivalent of the “Campaigns” tab in the Response Summary report
        (formerly known as field report).
      tags:
        - Response Summary
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/split'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  segments:
                    type: array
                    description: |
                      List of segment names, e.g. “Total”, “Participant
                      source (list=1)” similar to column names when splitting.
                    items:
                      type: string
                  rows:
                    type: array
                    description: |
                      List with one object per row that would be displayed
                      in the Campaigns tab
                    items:
                      type: object
                      properties:
                        formula:
                          type: string
                          description: |
                            The formula used to compute the value.
                            This should be used to search for specific values.
                          example: clickthrough
                        cells:
                          type: array
                          description: |
                            one object for each segment the response summary is
                            split by
                          items:
                            type: object
                            properties:
                              vsplit:
                                type: string
                                description: |
                                  The split identifier. This can be passed to the
                                  variables down URL (`/rep/{survey}:vars?only=VSPLIT`)
                                  and this is what the “Clickthrough” cell links to
                                  in the response summary user interface.
                                example: ''
                              raw:
                                type: number
                                description: The raw numeric value
                                format: float
                                example: 0.76
                              formatted:
                                type: string
                                example: 76%
                                description: The formatted value.
                              title:
                                type: string
                        name:
                          type: string
                        title:
                          type: string
                  reminders:
                    type: object
                    properties:
                      total_sent:
                        type: array
                      rows:
                        type: array
                  intitial_sends:
                    type: array
                    items:
                      type: object
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/summary/campaigns?split=list
        - lang: Cli
          source: |
            beacon get surveys/{survey}/summary/campaigns split=list > myfile.json
  /surveys/{survey}/summary/splits:
    get:
      operationId: getSurveySummarySummarySplits
      summary: List splits
      description: |
        Returns the split names you can split the response summary report by. These
        are typically extraVariables that have a fixed set of values (e.g. list,
        decLang).
      tags:
        - Response Summary
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaigns
          in: query
          description: Include campaign specific splits.
          schema:
            type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                      description: |
                        The symbolic name that can be passed as split into the other
                        response summary APIs
                    description:
                      type: string
                      description: Additional description
                    segments:
                      type: array
                      description: |
                        List of segment names, e.g. “Total”, “Participant
                        source (list=1)” similar to column names when splitting.
                      items:
                        type: string
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/summary/completions?split=list
        - lang: Cli
          source: |
            beacon get surveys/{survey}/summary/completions split=list > myfile.json
  /surveys/{survey}/data/edit:
    post:
      operationId: createSurveyDataEdit
      summary: Create new data
      description: |
        Create new records in the survey. All records specified are
        always created anew (if you suspect some exist in the survey
        already, you should fetch and filter before sending new data).
        Validation of data works exactly as with the PUT variant.
      tags:
        - Modifying Data
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                key:
                  type: string
                  description: |
                    The field used to match your participant data. This should
                    be a unique variable. Supplying a non-unique key will
                    change every matching record. This is implicitly null when
                    creating new records.
                  example: uuid
                data:
                  type: array
                  description: |
                    An array of the participant records. Each element of the array
                    is an object with the key being the column name matching a
                    variable name, and the value the value you want to set or update.
                    You can specify any amount of variables.
                  items:
                    type: object
                  example:
                    - q1: Bob Boson
                      source: 3
                      q2: 1
                    - q1: Joe Q. Joeson
                      source: 4
                      q2: 42
                test:
                  type: boolean
                  description: |
                    Do not execute the edit, but return the changes that would be
                    applied at the time of the call.
                  default: false
                layout:
                  type: integer
                  description: |
                    The id of a custom data layout. A custom export layout
                    can relabel fields. If you exported some data with fields that have
                    been relabelled in a layout and now are importing it back, you
                    should use the same layout.
                allVariables:
                  type: boolean
                  description: Allow editing of notdb variables
                  default: false
              required:
                - key
                - data
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  stats:
                    description: |
                      Overall statistics of what happened with your data edit requested.
                    type: object
                    properties:
                      fieldsIgnored:
                        type: integer
                        description: |
                          Cells ignored because uploading into legacy weight/record
                          values (this is for surveys older than 2005).
                      rows:
                        type: integer
                        description: |
                          Number of fields in your input data.
                      fieldsErronous:
                        type: integer
                        description: Data supplied that was not valid.
                      rewritten:
                        type: integer
                        description: Records where data was modified.
                      created:
                        type: integer
                        description: Number of new records created.
                      deleted:
                        type: integer
                        description: Number of records deleted.
                      disqualified:
                        type: integer
                        description: Number of qualified records disqualified or deleted.
                      unchanged:
                        type: integer
                        description: Records where your updated data did not cause changes.
                      updated:
                        type: integer
                        description: Number of records updated.
                      bad:
                        type: array
                        description: Invalid values detected during edit/update
                      fieldsUpdated:
                        type: integer
                        description: Data fields updated by the request.
                      unseen:
                        type: integer
                        description: |
                          Number of rows that did not match existing records
                          when not creating new records.
                      fieldsIdentical:
                        type: integer
                        description: |
                          Data update requests not done because existing data was
                          identical. This counts individual cells.
                      inrows:
                        type: integer
                        description: |
                          Total amount of records processed (rewritten +
                          unchanged + deleted + created).
                      unmatchedDeletions:
                        type: integer
                        description: |
                          Records that you asked to be deleted but did not
                          match existing records.
                      fieldsProcessed:
                        type: integer
                        description: |
                          Total fields processed.
                  backup:
                    type: string
                    description: |
                      Where is the previous version of the data? This can be
                      restored by support or a shell user on a Beacon Cloud
                      installation.
                    example: selfserve/1234/dataedit/data/old-results/011.results.*
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X POST {server}/api/v1/surveys/{survey}/data/edit?data=[]
        - lang: Cli
          source: |
            beacon post surveys/{survey}/data data=[]
    put:
      operationId: updateSurveyDataEdit
      summary: Update survey data
      description: |-
        Modify data of existing participants in the survey. As data, supply objects containing the data you want to update. As with all variants, you must supply a key to match by and supply that key for each record.
        Elements in data that do not match an existing record are discarded.
      tags:
        - Modifying Data
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                key:
                  type: string
                  description: |
                    The field used to match your participant data. This should
                    be a unique variable. Supplying a non-unique key will
                    change every matching record. This is implicitly null when
                    creating new records.
                  example: uuid
                data:
                  type: array
                  description: |
                    An array of the participant records. Each element of the array
                    is an object with the key being the column name matching a
                    variable name, and the value the value you want to update.
                    You can specify any amount of variables.
                  items:
                    type: object
                  example:
                    - q1: Bob Boson
                      source: 3
                      q2: 1
                    - q1: Joe Q. Joeson
                      source: 4
                      q2: 42
                layout:
                  type: integer
                  description: layout id
                test:
                  type: boolean
                  description: |
                    Do not execute the edit, but return the changes that would be
                    applied at the time of the call.
                  default: false
              required:
                - key
                - data
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  stats:
                    description: |
                      Overall statistics of what happened with your data edit requested.
                    type: object
                    properties:
                      fieldsIgnored:
                        type: integer
                        description: |
                          Cells ignored because uploading into legacy weight/record
                          values (this is for surveys older than 2005).
                      rows:
                        type: integer
                        description: |
                          Number of fields in your input data.
                      fieldsErronous:
                        type: integer
                        description: Data supplied that was not valid.
                      rewritten:
                        type: integer
                        description: Records where data was modified.
                      created:
                        type: integer
                        description: Number of new records created.
                      deleted:
                        type: integer
                        description: Number of records deleted.
                      disqualified:
                        type: integer
                        description: Number of qualified records disqualified or deleted.
                      unchanged:
                        type: integer
                        description: Records where your updated data did not cause changes.
                      updated:
                        type: integer
                        description: Number of records updated.
                      bad:
                        type: array
                        description: Invalid values detected during edit/update
                      fieldsUpdated:
                        type: integer
                        description: Data fields updated by the request.
                      unseen:
                        type: integer
                        description: |
                          Number of rows that did not match existing records
                          when not creating new records.
                      fieldsIdentical:
                        type: integer
                        description: |
                          Data update requests not done because existing data was
                          identical. This counts individual cells.
                      inrows:
                        type: integer
                        description: |
                          Total amount of records processed (rewritten +
                          unchanged + deleted + created).
                      unmatchedDeletions:
                        type: integer
                        description: |
                          Records that you asked to be deleted but did not
                          match existing records.
                      fieldsProcessed:
                        type: integer
                        description: |
                          Total fields processed.
                  backup:
                    type: string
                    description: |
                      Where is the previous version of the data? This can be
                      restored by support or a shell user on a Beacon Cloud
                      installation.
                    example: selfserve/1234/dataedit/data/old-results/011.results.*
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X PUT {server}/api/v1/surveys/{survey}/data/edit?data=[]
        - lang: Cli
          source: |
            beacon put surveys/{survey}/data data=[]
    delete:
      operationId: deleteSurveyDataEdit
      summary: Delete or disqualify survey data
      description: |
        Disqualify or delete the records. You must set `mode` to “delete” to
        delete data. We recommend disqualifying rather than deleting,
        as deleted records can only be restored by support or a shell user
        on a Beacon Cloud installation. Disqualified records can be re-qualified
        by update their `markers` variable to contain the qualified marker.

        If disqualifying, you may set `disqualify` to the name of the
        marker to be set. The normal “Edit Data” screen sets the following
        markers: `speeder`, `straightliner`, `badopen`, `foreigner`. You can set
        any marker you want: this is just additional information.

        Disqualified records are stripped of their `qualified` marker and any
        quota marker (e.g. /Quota_Sheet/marker) is prefixed with `bad:`.
      tags:
        - Modifying Data
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                key:
                  type: string
                  description: |
                    The field used to match your participant data. This should
                    be a unique variable. Supplying a non-unique `key` will
                    change every matching record. This is implicitly `null` when
                    creating new records.
                  example: record
                data:
                  type: array
                  description: |
                    An array of the participant records. Each element of the array
                    is an object with the key being the column name matching a
                    variable name, and the value the value you want to update.
                    You can specify any amount of variables.
                  items:
                    type: object
                  example:
                    - record: '2'
                    - record: '4'
                    - record: '5'
                test:
                  type: boolean
                  description: |
                    Do not execute the edit, but return the changes that would be
                    applied at the time of the call.
                  default: false
                layout:
                  type: integer
                  description: |
                    The id of a custom data layout. A custom export layout
                    can relabel fields. If you exported some data with fields that have
                    been relabelled in a layout and now are importing it back, you
                    should use the same layout.
                allVariables:
                  type: boolean
                  description: Allow editing of notdb variables
                  default: false
                mode:
                  type: string
                  description: Do we want to delete or disqualify these records?
                  enum:
                    - delete
                    - disqualify
                  default: disqualify
                  example: disqualify
                disqualify:
                  type: string
                  description: marker to set
                  example: speeder
              required:
                - key
                - data
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  stats:
                    description: |
                      Overall statistics of what happened with your data edit requested.
                    type: object
                    properties:
                      fieldsIgnored:
                        type: integer
                        description: |
                          Cells ignored because uploading into legacy weight/record
                          values (this is for surveys older than 2005).
                      rows:
                        type: integer
                        description: |
                          Number of fields in your input data.
                      fieldsErronous:
                        type: integer
                        description: Data supplied that was not valid.
                      rewritten:
                        type: integer
                        description: Records where data was modified.
                      created:
                        type: integer
                        description: Number of new records created.
                      deleted:
                        type: integer
                        description: Number of records deleted.
                      disqualified:
                        type: integer
                        description: Number of qualified records disqualified or deleted.
                      unchanged:
                        type: integer
                        description: Records where your updated data did not cause changes.
                      updated:
                        type: integer
                        description: Number of records updated.
                      bad:
                        type: array
                        description: Invalid values detected during edit/update
                      fieldsUpdated:
                        type: integer
                        description: Data fields updated by the request.
                      unseen:
                        type: integer
                        description: |
                          Number of rows that did not match existing records
                          when not creating new records.
                      fieldsIdentical:
                        type: integer
                        description: |
                          Data update requests not done because existing data was
                          identical. This counts individual cells.
                      inrows:
                        type: integer
                        description: |
                          Total amount of records processed (rewritten +
                          unchanged + deleted + created).
                      unmatchedDeletions:
                        type: integer
                        description: |
                          Records that you asked to be deleted but did not
                          match existing records.
                      fieldsProcessed:
                        type: integer
                        description: |
                          Total fields processed.
                  backup:
                    type: string
                    description: |
                      Where is the previous version of the data? This can be
                      restored by support or a shell user on a Beacon Cloud
                      installation.
                    example: selfserve/1234/dataedit/data/old-results/011.results.*
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X DELETE {server}/api/v1/surveys/{survey}/data/edit?data=[]
        - lang: Cli
          source: |
            beacon delete surveys/{survey}/data data=[]
  /surveys/{survey}/data/edit/markers:
    put:
      operationId: updateSurveyDataEditMarkers
      summary: Update markers
      description: |
        Allows for updating participant markers that may have become
        outdated due to quota changes or data edits. Requires data
        edit permission for the project.
      tags:
        - Modifying Data
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                tablesBySheet:
                  type: object
                  description: |
                    Used to specify which sheets and tables to be updated.
                    Each key of the object is a sheet name with a value that is an
                    array of the table indexes. The first table on the sheet will
                    have an index of 0. An empty array will include all tables
                    for the sheet.
                  example:
                    - Gender:
                        - 0
                test:
                  type: boolean
                  description: |
                    Do not execute the edit, but return the changes that would be
                    applied at the time of the call.
                  default: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  comparison:
                    description: |
                      Overview of what the new marker counts are
                      compared against the current marker counts
                    type: object
                  backup:
                    type: string
                    description: |
                      Where is the previous version of the data? This can be
                      restored by support or a shell user on a Beacon Cloud
                      installation.
                    example: selfserve/1234/dataedit/data/old-results/011.results.*
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X PUT {server}/api/v1/surveys/{survey}/data/edit/markers
        - lang: Cli
          source: |
            beacon put surveys/{survey}/data/edit/markers
  /surveys/{survey}/respondents/import:
    post:
      operationId: createSurveyDataRespondentsImport
      summary: Import survey data
      description: |
        Allows for modification of the participant data by specifying a file
        to import. Based on the arguments provided the columns in your file
        will either be matched to existing variables or they will be created as
        new variables. After appending new questions to your survey the data
        from your file will be imported. Rows without a matching key variable in
        the existng data will be created as new records. Creating new questions
        will perform a live merge.
      tags:
        - Modifying Data
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                key:
                  type: string
                  description: |
                    The field used to match your participant data. This should
                    be a unique variable. Supplying a non-unique key will
                    change every matching record. This is implicitly null when
                    creating new records.
                  example: source
                tabfile:
                  type: string
                  format: binary
                  description: Tab delimited file to upload.
                questions:
                  type: array
                  items:
                    type: object
                    properties:
                      index:
                        type: integer
                        description: The index of this question in the data file.
                      reportLabel:
                        type: string
                        description: The label of the survey variable that this variable should be matched to when importing. Omit this argument if this should be a newly created variable.
                      label:
                        type: string
                        description: Required for new questions. When creating a new question this label will be the label of the new question.
                      title:
                        type: string
                        description: Required for new questions. The title to appear in reports for this question.
                      type:
                        type: string
                        description: |
                          Required for new questions.

                          **single**

                          - generates a “radio” question
                          - single ordinal answer
                          - you must declare one or more values

                          **multiple**

                          - generates a “checkbox”
                          - multiple answers possible
                          - you must declare one or more variables

                          **number**

                          - generates a “float” question
                          - any number allowed

                          **text**

                          - generate a “text” question
                          - any textual content allowed
                        enum:
                          - single
                          - multiple
                          - number
                          - text
                      variables:
                        description: |
                          required for “multiple”, optional for others. This allows
                          creating multiple variables for this question rather than
                          just a single one.
                        type: array
                        items:
                          type: object
                          properties:
                            title:
                              type: string
                              description: Human readable title for this variable.
                            column:
                              type: string
                              description: The label containing the variable in the data file. Rather than pulling data from the question’s column/label, this variable will be read from this column. A separate question object should not be provided for the specified column.
              required:
                - key
                - tabfile
                - questions
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  stats:
                    description: |
                      Overall statistics of what happened with your data edit requested.
                    type: object
                    properties:
                      fieldsIgnored:
                        type: integer
                        description: |
                          Cells ignored because uploading into legacy weight/record
                          values (this is for surveys older than 2005).
                      rows:
                        type: integer
                        description: |
                          Number of fields in your input data.
                      fieldsErronous:
                        type: integer
                        description: Data supplied that was not valid.
                      rewritten:
                        type: integer
                        description: Records where data was modified.
                      created:
                        type: integer
                        description: Number of new records created.
                      deleted:
                        type: integer
                        description: Number of records deleted.
                      disqualified:
                        type: integer
                        description: Number of qualified records disqualified or deleted.
                      unchanged:
                        type: integer
                        description: Records where your updated data did not cause changes.
                      updated:
                        type: integer
                        description: Number of records updated.
                      bad:
                        type: array
                        description: Invalid values detected during edit/update
                      fieldsUpdated:
                        type: integer
                        description: Data fields updated by the request.
                      unseen:
                        type: integer
                        description: |
                          Number of rows that did not match existing records
                          when not creating new records.
                      fieldsIdentical:
                        type: integer
                        description: |
                          Data update requests not done because existing data was
                          identical. This counts individual cells.
                      inrows:
                        type: integer
                        description: |
                          Total amount of records processed (rewritten +
                          unchanged + deleted + created).
                      unmatchedDeletions:
                        type: integer
                        description: |
                          Records that you asked to be deleted but did not
                          match existing records.
                      fieldsProcessed:
                        type: integer
                        description: |
                          Total fields processed.
                  backup:
                    type: string
                    description: |
                      Where is the previous version of the data? This can be
                      restored by support or a shell user on a Beacon Cloud
                      installation.
                    example: selfserve/1234/dataedit/data/old-results/011.results.*
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X POST {server}/api/v1/surveys/{survey}/respondents/import
        - lang: Cli
          source: |
            beacon post surveys/{survey}/respondents/import
  /surveys/{survey}/edits/{edit}:
    get:
      operationId: getSurveyEdits
      summary: Get survey response edits
      description: Get edits that were performed on responses (e.g. in Portal > Responses > View/Edit Responses). An example of such an edit is disqualifying a respondent.
      tags:
        - Modifying Data
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: edit
          in: path
          required: true
          description: |
            The identifier of the edit. It can either be a numerical
            identifier such as "1", which will result in a response with only one edit,
            or it can be "all", which will result in a response with a list of all
            edits.
          example: all
          schema:
            type: string
        - name: uuid
          in: query
          required: false
          description: Filter edits for this specific UUID.
          example: tqwmpjbq8t6p8n43
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  previous:
                    description: State of the response before the edit.
                    type: object
                    properties:
                      status:
                        type: string
                        description: Status of the response.
                        example: q
                      markers:
                        type: array
                        description: New markers.
                        items:
                          type: string
                          description: Marker string.
                          example: qualified
                  new:
                    description: New state of the response after the edit.
                    type: object
                    properties:
                      status:
                        type: string
                        description: Status of the response.
                        example: t
                      markers:
                        type: array
                        description: New markers.
                        items:
                          type: string
                          description: Marker string.
                          example: bad:qualified
                  changes:
                    type: string
                    description: Description of the state change.
                    example: 'status: q => t markers: [u''qualified''] => [u''bad:qualified'']'
                  uuid:
                    type: string
                    description: Unique identifier of the change.
                    example: tqwmpjbq8t6p8n43
                  created_on:
                    type: string
                    description: Timestamp of the change.
                    example: '2021-01-01T01:29:49Z'
                  user_email:
                    type: string
                    format: email
                    description: E-mail of the user who performed the edit.
                    example: developer@decipherinc.com
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/edits/all
        - lang: Cli
          source: |
            beacon get /surveys/{survey}/edits/all
  /surveys/{survey}/data/delphi-conversion:
    post:
      operationId: createSurveyDataDelphiConversion
      summary: Convert to Delphi
      description: |
        Attempts to convert the given non-delphi survey to delphi by converting any
        existing data to delphi format and setting the delphi attribute to "1" if
        required for the given compat. This is an async endpoint, which means it will
        return the ident of the async task which may be used with the status endpoint
        to check the status and retreive the results.

        The results are a an object with an `output` key and the value is plain text
        that is the output of the script which does the conversion. If an error
        occurs in the script the endpoint will return a 500 error and include the
        output of the script in the error message.

        Requires `survey:edit` permission.
      tags:
        - Modifying Data
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ident:
                    description: |
                      The ident of the async task to be used with the status endpoint
                      to check the status and retreive the results.
                    example: 9cdw1pu3kdaenyr1
                    type: string
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
  /surveys/{survey}/datasources:
    get:
      operationId: getSurveyDatasources
      summary: List datasources
      description: Returns a list of current datasources and their data.
      tags:
        - Datasources
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    ourKey:
                      type: string
                      example: source
                    questions:
                      type: array
                      items:
                        type: object
                        properties:
                          label:
                            type: string
                            example: vq6
                          type:
                            type: string
                            example: text
                          title:
                            type: string
                            example: vq1
                    reporting:
                      type: boolean
                    label:
                      type: string
                      example: ds5
                    key:
                      type: string
                      example: source
                    filename:
                      type: string
                      example: data_datasource_ds5.dat
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/datasources
        - lang: Cli
          source: |
            beacon get surveys/{survey}/datasources > myfile.json
  /surveys/{survey}/datasources/{datasource}:
    get:
      operationId: getSurveyDatasource
      summary: Get datasource
      description: |
        Operates on one specific datasource. Datasources are identified
        by an alphanumeric label which must not overlap with any labels
        in the survey. First use `PUT` `surveys/.../datasources/label` to create
        the datasource; then add data by targetting
        `surveys/.../datasources/label/data`.
      tags:
        - Datasources
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/datasource'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ourKey:
                    type: string
                    example: source
                  questions:
                    type: array
                    items:
                      type: object
                      properties:
                        label:
                          type: string
                          example: vq6
                        type:
                          type: string
                          example: text
                        title:
                          type: string
                          example: vq1
                  reporting:
                    type: boolean
                  label:
                    type: string
                    example: ds5
                  key:
                    type: string
                    example: source
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/datasources/datasource
        - lang: Cli
          source: |
            beacon get surveys/{survey}/datasources/datasource > myfile.json
    put:
      operationId: updateSurveyDatasource
      summary: Create or update a datasource
      description: |
        When creating you decide what questions you have and whether they are virtual
        or not and what the matching key is.  You can modify existing sets converting
        from real to virtual or vice versa, and deleting questions.

        If you call PUT on an existing datasource, any attribute you specify
        will be replaced with its new version. Any attribute not mention will
        remain as is. Thus to add new questions, retrieve the original question
        configuration with GET , append your new questions and PUT the new one.

        Changes to questions for a datasource with reporting set to False,
        or changes that set or clear reporting will require a live remerge.
      tags:
        - Datasources
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/datasource'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reporting:
                  type: boolean
                  description: If true, the data is merged as virtual questions. This minimize setup time in live surveys. If false, data is created as real question.  This requires a live merge.
                elementOnly:
                  type: boolean
                  description: If true, new elements will be created but will not be populated with data from a datasource. Attributes key and ourKey may be omitted when this is true. Only valid when reporting=false.
                  default: false
                key:
                  type: string
                  description: The column in the data files uploaded that will be matched against our key.
                ourKey:
                  type: string
                  description: The extraVariable or condition in the participant data that will be matched to the key.
                questions:
                  type: array
                  description: An array of the questions that will belong to this datasource.
                  items:
                    type: object
                    properties:
                      label:
                        type: string
                        description: Required for new questions. When creating a new question this label will be the label of the new question.
                      column:
                        type: string
                        description: The column in the data file to be used to read the data. It defaults to the question label, if not specified. This allows you differentiate between how the data file is labelled versus how the question in the survey is labelled. Note that if you use variables the column assign happens per variable.
                      title:
                        type: string
                        description: Required for new questions. The title to appear in reports for this question.
                      type:
                        type: string
                        description: |-
                          Required for new questions.
                          **single**
                          - generates a “radio” question - single ordinal answer - you must declare one or more values
                          **multiple**
                          - generates a “checkbox” - multiple answers possible - you must declare one or more variables
                          **number**
                          - generates a “float” question - any number allowed
                          **text**
                          - generate a “text” question - any textual content allowed
                        enum:
                          - single
                          - multiple
                          - number
                          - text
                      values:
                        type: array
                        description: Required for “single”.
                        items:
                          type: object
                          properties:
                            title:
                              type: string
                              description: Human readable title for this variable.
                            value:
                              oneOf:
                                - type: string
                                - type: integer
                              description: |
                                The text that will be in uploaded data files that should
                                match this answer. This can be a number (“1”) or any text
                                (e.g. “male”). It is matched case insensitively, thus
                                “MALE” in the input file will match a value of “male”.
                            statValue:
                              type: integer
                              description: |
                                This converts to our value attribute and is used for
                                averages in reporting or the value shown when downloading
                                data. Optional.
                      variables:
                        type: array
                        description: Required for “multiple”, optional for others. This allows creating multiple variables for this question rather than just a single one.
                        items:
                          type: object
                          properties:
                            title:
                              type: string
                              description: Human readable title for this variable.
                            column:
                              type: string
                              description: The label containing the variable in the data file. Rather than pulling data from the question’s column/label, this variable will be read from this column. A separate question object should not be provided for the specified column.
              required:
                - reporting
                - key
                - ourKey
                - questions
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X PUT {server}/api/v1/surveys/{survey}/datasources/datasource
        - lang: Cli
          source: |
            beacon put surveys/{survey}/datasources/datasource
    delete:
      operationId: deleteSurveyDatasource
      summary: Delete a datasource
      description: Remove the datasource definition and blank out any uploaded data files.
      tags:
        - Datasources
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/datasource'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X DELETE {server}/api/v1/surveys/{survey}/datasources/datasource
        - lang: Cli
          source: |
            beacon delete surveys/{survey}/datasources/datasource
  /surveys/{survey}/datasources/{datasource}/data:
    post:
      operationId: createSurveyDatasourceData
      summary: Append datasource data
      description: Append data to this datasource's data files. This merges the rows and columns. For any record, if the key for the datasource already exists in the current data file the columns of that record are updated with the new record. Columns with data in existing file and new uploaded data are replaced. Any records not matching existing data are appended to the file.
      tags:
        - Datasources Data
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/datasource'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  description: Either an array of objects, a single tab-delimited string or a base64-encoded Excel 2007 file
                  oneOf:
                    - type: array
                      items:
                        type: object
                    - type: string
                      format: tab delimited
                    - type: string
                      format: base64-encoded Excel 2007 file
                skipRemerge:
                  type: boolean
                  description: If true, the live remerge process is skipped. Please note, that skipping the remerge process will mean that existing participants might not match the new data or updated data will not be updated with the new data.
                  default: false
              required:
                - data
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/datasources/datasource/data
        - lang: Cli
          source: |
            beacon get surveys/{survey}/datasources/datasource/data > myfile.json
    get:
      operationId: getSurveyDatasourceData
      summary: List datasource data
      description: List all the existing data, as an array of objects.
      tags:
        - Datasources Data
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/datasource'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/datasources/datasource/data
        - lang: Cli
          source: |
            beacon get surveys/{survey}/datasources/datasource/data > myfile.json
    put:
      operationId: updateSurveyDatasourceData
      summary: Replace datasource data
      description: Truncates the existing data file then replaces with the provided data.
      tags:
        - Datasources Data
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/datasource'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  description: either an array of objects, a single tab-delimited string or a base64-encoded Excel 2007 file
                  oneOf:
                    - type: array
                      items:
                        type: object
                    - type: string
                      format: tab delimited
                    - type: string
                      format: base64-encoded Excel 2007 file
              required:
                - data
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/datasources/datasource/data
        - lang: Cli
          source: |
            beacon get surveys/{survey}/datasources/datasource/data > myfile.json
    delete:
      operationId: deleteSurveyDatasourceData
      summary: Truncate datasource data
      description: Remove all existing data. The datasource definition itself is retained.
      tags:
        - Datasources Data
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/datasource'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X GET {server}/api/v1/surveys/{survey}/datasources/datasource/data
        - lang: Cli
          source: |
            beacon get surveys/{survey}/datasources/datasource/data > myfile.json
  /surveys/{survey}/umerge:
    post:
      operationId: postSurveysUmerge
      summary: Umerge
      description: |
        Allows for flexible copy, transformation, and review of data when one or both
        surveys have delphi="1".

        Data is converted based on matching answer labels. You can correctly merge
        data from q1 with r1, r2, r3 as answers into a survey where q1 answers are
        r3, r2, r1.

        **Note**:

        This is an __asynchronous__ API call, which means that the initial call will
        return only an `ident` which must then be used with the
        [https://{server}/api/v1/status](/docs/decipher/api#operation/getStatus) API
        call to check on the progress of the process, and when it is finished, to get
        the results. The documented return types and examples are the results that
        you would get from calling the status API call with the returned `ident`.
      tags:
        - Umerge
      parameters:
        - name: survey
          in: path
          description: Path of the source survey; `data.view` permission is needed.
          example: selfserve/XYZ/200000
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                target:
                  description: |
                    Survey to which to write; `data.edit` permission is needed.
                  example: selfserve/XYZ/200000
                  type: string
                key:
                  description: Key to match records with.
                  default: uuid
                  type: string
                  example: source
                cond:
                  description: |
                    Filter source survey by crosstabs compatible conditions.
                    Specify 'everything' to include partials.
                  type: string
                  default: ALL
                  example: qualified
                join:
                  description: |
                    The types of joins available are
                      - append - New records only
                      - merge - Existing records only
                      - join - Append + merge
                      - delete - Delete matching
                  example: append
                  type: string
                  default: append
                  enum:
                    - append
                    - merge
                    - join
                    - delete
                variables:
                  description: |
                    Include only these specific variables or question labels in the
                    data processed.
                  type: array
                  example:
                    - q1
                    - q2
                  items:
                    type: string
                action:
                  description: |
                    The available actions are
                      - test - Show what's possible
                      - preview_data - Generate data fill
                      - preview_changes - Try to import and list what would happen
                      - execute - Do the import
                  type: string
                  enum:
                    - test
                    - preview_data
                    - preview_changes
                    - execute
                exclude_variables:
                  description: |
                    Exclude specific variables or questions from the output. These
                    are removed after the inclusion is processed.
                  example:
                    - q5
                    - q6
                  type: array
                  items:
                    type: string
                code:
                  description: |
                    Run custom code for each row after generating the data.
                  example: d.q1r1 = d.q1r1.upper()
                  type: string
                rename:
                  description: |
                    Change the name of the question while transferring data over.
                  type: object
                  example:
                    q1: q2
              required:
                - target
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    description: The current status of the async process
                  what:
                    type: string
                    description: What the task is currently working on
                  ident:
                    type: string
                    description: The unique identifier of the task
                  user_id:
                    type: integer
                    description: The id of the user who initiated the task
                  extra:
                    description: |
                      The actual response from the requested action will be
                      returned here if the request has finished. The four
                      different object types here correspond to the four
                      different actions. See the example responses for more
                      information.
                    oneOf:
                      - type: object
                        properties:
                          excluded_count:
                            type: string
                            example: 0
                          plan:
                            description: |
                              Group content of a plan result by question label
                            type: array
                      - type: object
                        properties:
                          raw_data:
                            description: |
                              It is the respondent data in text format
                            type: string
                          excluded_count:
                            type: string
                            example: 0
                          plan:
                            description: |
                              Group content of a plan result by question label
                            type: array
                      - type: object
                        properties:
                          excluded_count:
                            type: integer
                            example: 0
                          changes:
                            type: array
                            description: |
                              Every change it will apply.
                          plan:
                            description: |
                              Group content of a plan result by question label.
                            type: array
                      - type: object
                        properties:
                          url:
                            type: string
                            example: http://{server}/rep/selfserve/53d/220901:api/edits/7.txt?cols=uuid,changes
                          stats:
                            type: object
                            properties:
                              terminated:
                                type: integer
                                example: 0
                              fieldsIgnored:
                                type: integer
                                example: 0
                              rows:
                                type: integer
                                example: 200
                              partial:
                                type: integer
                                example: 0
                              rewritten:
                                type: integer
                                example: 0
                              created:
                                type: integer
                                example: 200
                              deleted:
                                type: integer
                                example: 0
                              unchanged:
                                type: integer
                                example: 0
                              fieldsProcessed:
                                type: integer
                                example: 16200
                              bad:
                                type: array
                                example: []
                              qualified:
                                type: integer
                                example: 200
                              fieldsUpdated:
                                type: integer
                                example: 14848
                              unseen:
                                type: integer
                                example: 0
                              fieldsIdentical:
                                type: integer
                                example: 1352
                              inrows:
                                type: integer
                                example: 0
                              fieldsErronous:
                                type: integer
                                example: 0
                              disqualified:
                                type: integer
                                example: 0
                              disqualifiedImports:
                                type: integer
                                example: 0
                              unmatchedDeletions:
                                type: integer
                                example: 0
                              overquota:
                                type: integer
                                example: 0
                          backup:
                            type: string
                            example: null
                          changeset:
                            type: integer
                            example: 7
                          excluded_count:
                            type: integer
                            example: 0
                  timestamp:
                    type: string
                    description: The timestamp at which this status was generated
                  pid:
                    type: string
                    description: The pid of the process running the task
                  task:
                    type: string
                    description: Description of the task
                  survey:
                    type: string
                    description: The survey associated with the task
                  result:
                    type: string
                    description: The basic result of the task
                  progress:
                    type: string
                    description: |
                      A numeric representation of progress in the same units as
                      `total` where 0 would be no progress and the same value
                      as `total` would indicate that it is complete.
                  percentage:
                    type: string
                    description: Percentage complete
                  total:
                    type: string
                    description: |
                      A numeric representation of what the `progress` will be
                      when the task is complete.
                  type:
                    type: string
                    description: The type of async task
              examples:
                test:
                  value:
                    status: finished
                    what: finished
                    ident: v7wd2qyuj0hrb2su
                    user_id: 1
                    extra:
                      excluded_count: 0
                      plan:
                        - - qtime
                          - missing: []
                            ok:
                              - - qtime
                                - qtime
                            incompatible: []
                        - - null
                          - missing: []
                            ok:
                              - - record
                                - record
                              - - uuid
                                - uuid
                              - - date
                                - date
                              - - markers
                                - markers
                              - - source
                                - source
                              - - declang
                                - declang
                              - - list
                                - list
                              - - useragent
                                - useragent
                              - - dcua
                                - dcua
                              - - url
                                - url
                              - - session
                                - session
                            incompatible: []
                        - - c3
                          - missing: []
                            ok:
                              - - c3r1
                                - c3r1
                              - - c3r2
                                - c3r2
                            incompatible: []
                        - - c2
                          - missing: []
                            ok:
                              - - c2r1
                                - c2r1
                              - - c2r2
                                - c2r2
                            incompatible: []
                        - - c1
                          - missing: []
                            ok:
                              - - c1r1
                                - c1r1
                              - - c1r2
                                - c1r2
                            incompatible: []
                        - - start_date
                          - missing: []
                            ok:
                              - - start_date
                                - start_date
                            incompatible: []
                        - - c4
                          - missing: []
                            ok:
                              - - c4r1
                                - c4r1
                              - - c4r2
                                - c4r2
                            incompatible: []
                    timestamp: 1663692717
                    pid: 1147
                    task: null
                    survey: selfserve/53d/220901
                    result: ok
                    progress: 100
                    percentage: 100
                    total: 100
                    type: /api/v1/surveys/selfserve/53d/220604/umerge
                preview_changes:
                  value:
                    status: finished
                    what: finished
                    ident: 6z2n7te2yydnwrnq
                    user_id: 1
                    extra:
                      excluded_count: 0
                      changes: []
                      plan:
                        - - qtime
                          - missing: []
                            ok:
                              - - qtime
                                - qtime
                            incompatible: []
                        - - null
                          - missing: []
                            ok:
                              - - record
                                - record
                              - - uuid
                                - uuid
                              - - date
                                - date
                              - - markers
                                - markers
                              - - source
                                - source
                              - - decLang
                                - decLang
                              - - list
                                - list
                              - - userAgent
                                - userAgent
                              - - dcua
                                - dcua
                              - - url
                                - url
                              - - session
                                - session
                            incompatible: []
                        - - C3
                          - missing: []
                            ok:
                              - - C3r1
                                - C3r1
                              - - C3r2
                                - C3r2
                              - - C3r3
                                - C3r3
                              - - C3r4
                                - C3r4
                              - - C3r5
                                - C3r5
                              - - C3r6
                                - C3r6
                              - - C3r7
                                - C3r7
                              - - C3r8
                                - C3r8
                              - - C3r9
                                - C3r9
                              - - C3r11
                                - C3r11
                              - - C3r12
                                - C3r12
                              - - C3r13
                                - C3r13
                              - - C3r14
                                - C3r14
                              - - C3r15
                                - C3r15
                              - - C3r16
                                - C3r16
                              - - C3r10
                                - C3r10
                              - - C3r10oe
                                - C3r10oe
                            incompatible: []
                        - - C2
                          - missing: []
                            ok:
                              - - C2r1
                                - C2r1
                              - - C2r2
                                - C2r2
                              - - C2r3
                                - C2r3
                              - - C2r4
                                - C2r4
                              - - C2r5
                                - C2r5
                              - - C2r6
                                - C2r6
                              - - C2r7
                                - C2r7
                              - - C2r8
                                - C2r8
                              - - C2r9
                                - C2r9
                              - - C2r11
                                - C2r11
                              - - C2r12
                                - C2r12
                              - - C2r13
                                - C2r13
                              - - C2r14
                                - C2r14
                              - - C2r15
                                - C2r15
                              - - C2r16
                                - C2r16
                              - - C2r10
                                - C2r10
                              - - C2r10oe
                                - C2r10oe
                            incompatible: []
                        - - C1
                          - missing: []
                            ok:
                              - - C1r1
                                - C20r1
                              - - C1r2
                                - C20r2
                              - - C1r3
                                - C20r3
                              - - C1r4
                                - C20r4
                              - - C1r5
                                - C20r5
                              - - C1r6
                                - C20r6
                              - - C1r7
                                - C20r7
                              - - C1r8
                                - C20r8
                              - - C1r9
                                - C20r9
                              - - C1r11
                                - C20r11
                              - - C1r12
                                - C20r12
                              - - C1r13
                                - C20r13
                              - - C1r14
                                - C20r14
                              - - C1r15
                                - C20r15
                              - - C1r16
                                - C20r16
                              - - C1r10
                                - C20r10
                              - - C1r10oe
                                - C20r10oe
                            incompatible: []
                        - - start_date
                          - missing: []
                            ok:
                              - - start_date
                                - start_date
                            incompatible: []
                        - - C4
                          - missing: []
                            ok:
                              - - C4r1
                                - C4r1
                              - - C4r2
                                - C4r2
                              - - C4r3
                                - C4r3
                              - - C4r4
                                - C4r4
                              - - C4r5
                                - C4r5
                              - - C4r6
                                - C4r6
                              - - C4r7
                                - C4r7
                              - - C4r8
                                - C4r8
                              - - C4r9
                                - C4r9
                              - - C4r11
                                - C4r11
                              - - C4r12
                                - C4r12
                              - - C4r13
                                - C4r13
                              - - C4r14
                                - C4r14
                              - - C4r15
                                - C4r15
                              - - C4r16
                                - C4r16
                              - - C4r10
                                - C4r10
                              - - C4r10oe
                                - C4r10oe
                            incompatible: []
                    timestamp: 1663693818
                    pid: 1163
                    task: null
                    survey: selfserve/53d/220901
                    result: OK
                    progress: 100
                    percentage: 100
                    total: 100
                    type: /api/v1/surveys/selfserve/53d/220604/umerge
                preview_data:
                  value:
                    status: finished
                    what: Finished
                    ident: 2b184heh4a13cbmz
                    user_id: 1
                    extra:
                      raw_data: "record\tuuid\tdate\tmarkers\tqtime\tstart_date\tsource\tdecLang\tlist\tuserAgent\tdcua\turl\tsession\t C1r1\tC1r2\tC1r3\tC1r4\tC1r5\tC1r6\tC1r7\tC1r8\tC1r9\tC1r11\tC1r12\tC1r13\tC1r14\tC1r15\tC1r16\tC1r10\t C1r10oe\tC2r1\tC2r2\tC2r3\tC2r4\tC2r5\tC2r6\tC2r7\tC2r8\tC2r9\tC2r11\tC2r12\tC2r13\tC2r14\tC2r15\tC2r16\t C2r10\tC2r10oe\tC3r1\tC3r2\tC3r3\tC3r4\tC3r5\tC3r6\tC3r7\tC3r8\tC3r9\tC3r11\tC3r12\tC3r13\tC3r14\tC3r15\t C3r16\tC3r10\tC3r10oe\tC4r1\tC4r2\tC4r3\tC4r4\tC4r5\tC4r6\tC4r7\tC4r8\tC4r9\tC4r11\tC4r12\tC4r13\tC4r14\t C4r15\tC4r16\tC4r10\tC4r10oe\n1\twra4gfuj776887wr\t06/11/2022 16:36\tqualified\t33.883\t06/11/2022 16:36\t \t\t0\tMozilla/5.0 (iPhone; U; CPU OS 4_2_1 like Mac OS X) AppleWebKit/532.9 (KHTML, like Gecko) Version/5.0.3 Mobile/8B5097d Safari/6531.22.7\tsi\thttp://{server}/survey/selfserve/53d/220604\t6s76zg3jvyq824kj\t 1\t0\t0\t0\t1\t0\t1\t0\t1\t1\t0\t0\t0\t0\t0\t0\t\t1\t1\t0\t0\t0\t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t1\t regard snow minor forge deposit\t1\t1\t0\t1\t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t\t0\t0\t0\t1\t0\t0\t0\t1\t 0\t0\t1\t0\t0\t0\t1\t1\tmutual escape memory approval remunerate\n2\taybq3cgddu7bhpud\t06/10/2022 16:36\t qualified\t29.531\t06/10/2022 16:36\t\t\t0\tMozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.0; Trident/5.0; BOIE9;ENGB)\t..\thttp://{server}/survey/selfserve/53d/220604\t20uydskwcxbrqe29\t0\t0\t0\t0\t0\t0\t0\t0\t 0\t0\t0\t0\t0\t0\t1\t0\t\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t1\t0\t0\t\t0\t0\t0\t1\t0\t0\t0\t0\t0\t0\t0\t1\t0\t1\t1\t1\t sweet braid concession giant film\t0\t1\t0\t0\t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t\n3\tgkh17w24axzs6598\t06/14/2022 16:36\t qualified\t31.108\t"
                      excluded_count: 0
                      plan:
                        - - qtime
                          - missing: []
                            ok:
                              - - qtime
                                - qtime
                            incompatible: []
                        - - null
                          - missing: []
                            ok:
                              - - record
                                - record
                              - - uuid
                                - uuid
                              - - date
                                - date
                              - - markers
                                - markers
                              - - source
                                - source
                              - - decLang
                                - decLang
                              - - list
                                - list
                              - - userAgent
                                - userAgent
                              - - dcua
                                - dcua
                              - - url
                                - url
                              - - session
                                - session
                            incompatible: []
                        - - C3
                          - missing: []
                            ok:
                              - - C3r1
                                - C3r1
                              - - C3r2
                                - C3r2
                              - - C3r3
                                - C3r3
                              - - C3r4
                                - C3r4
                              - - C3r5
                                - C3r5
                              - - C3r6
                                - C3r6
                              - - C3r7
                                - C3r7
                              - - C3r8
                                - C3r8
                              - - C3r9
                                - C3r9
                              - - C3r11
                                - C3r11
                              - - C3r12
                                - C3r12
                              - - C3r13
                                - C3r13
                              - - C3r14
                                - C3r14
                              - - C3r15
                                - C3r15
                              - - C3r16
                                - C3r16
                              - - C3r10
                                - C3r10
                              - - C3r10oe
                                - C3r10oe
                            incompatible: []
                        - - C2
                          - missing: []
                            ok:
                              - - C2r1
                                - C2r1
                              - - C2r2
                                - C2r2
                              - - C2r3
                                - C2r3
                              - - C2r4
                                - C2r4
                              - - C2r5
                                - C2r5
                              - - C2r6
                                - C2r6
                              - - C2r7
                                - C2r7
                              - - C2r8
                                - C2r8
                              - - C2r9
                                - C2r9
                              - - C2r11
                                - C2r11
                              - - C2r12
                                - C2r12
                              - - C2r13
                                - C2r13
                              - - C2r14
                                - C2r14
                              - - C2r15
                                - C2r15
                              - - C2r16
                                - C2r16
                              - - C2r10
                                - C2r10
                              - - C2r10oe
                                - C2r10oe
                            incompatible: []
                        - - C1
                          - missing: []
                            ok:
                              - - C1r1
                                - C1r1
                              - - C1r2
                                - C1r2
                              - - C1r3
                                - C1r3
                              - - C1r4
                                - C1r4
                              - - C1r5
                                - C1r5
                              - - C1r6
                                - C1r6
                              - - C1r7
                                - C1r7
                              - - C1r8
                                - C1r8
                              - - C1r9
                                - C1r9
                              - - C1r11
                                - C1r11
                              - - C1r12
                                - C1r12
                              - - C1r13
                                - C1r13
                              - - C1r14
                                - C1r14
                              - - C1r15
                                - C1r15
                              - - C1r16
                                - C1r16
                              - - C1r10
                                - C1r10
                              - - C1r10oe
                                - C1r10oe
                            incompatible: []
                        - - start_date
                          - missing: []
                            ok:
                              - - start_date
                                - start_date
                            incompatible: []
                        - - C4
                          - missing: []
                            ok:
                              - - C4r1
                                - C4r1
                              - - C4r2
                                - C4r2
                              - - C4r3
                                - C4r3
                              - - C4r4
                                - C4r4
                              - - C4r5
                                - C4r5
                              - - C4r6
                                - C4r6
                              - - C4r7
                                - C4r7
                              - - C4r8
                                - C4r8
                              - - C4r9
                                - C4r9
                              - - C4r11
                                - C4r11
                              - - C4r12
                                - C4r12
                              - - C4r13
                                - C4r13
                              - - C4r14
                                - C4r14
                              - - C4r15
                                - C4r15
                              - - C4r16
                                - C4r16
                              - - C4r10
                                - C4r10
                              - - C4r10oe
                                - C4r10oe
                            incompatible: []
                    timestamp: 1663692991
                    pid: 1149
                    task: null
                    survey: selfserve/53d/220901
                    result: OK
                    progress: 100
                    percentage: 100
                    total: 100
                    type: /api/v1/surveys/selfserve/53d/220604/umerge
                execute:
                  value:
                    status: finished
                    what: Finished
                    ident: 9zk9wrqrx0exg5fh
                    user_id: 1
                    extra:
                      url: http://{server}/rep/selfserve/53d/220901:api/edits/7.txt?cols=uuid,changes
                      stats:
                        terminated: 0
                        fieldsIgnored: 0
                        rows: 200
                        partial: 0
                        rewritten: 0
                        created: 200
                        deleted: 0
                        unchanged: 0
                        fieldsProcessed: 16200
                        bad: []
                        qualified: 200
                        fieldsUpdated: 14848
                        unseen: 0
                        fieldsIdentical: 1352
                        inrows: 0
                        fieldsErronous: 0
                        disqualified: 0
                        disqualifiedImports: 0
                        unmatchedDeletions: 0
                        overquota: 0
                      backup: null
                      changeset: 7
                      excluded_count: 0
                    timestamp: 1663694737
                    pid: 1170
                    task: 'Creating data     '
                    survey: selfserve/53d/220901
                    result: OK
                    progress: 100
                    percentage: 100
                    total: 100
                    type: /api/v1/surveys/selfserve/53d/220604/umerge
      x-codeSamples:
        - lang: Curl
          source: |
            curl -H x-apikey: {api_key} -X POST {server}/api/v1/surveys/{survey}/umerge
        - lang: Cli
          source: |
            beacon post surveys/{survey}/umerge
  /surveys/{survey}/sst:
    post:
      operationId: createSurveySst
      summary: Run simulated data
      description: Begin running simulated data.
      tags:
        - Simulated Data
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                count:
                  description: 'The number of simulations to run. Maximum: 2000'
                  default: 200
                  type: integer
                qualified:
                  description: Submit mostly qualified responses
                  default: false
                  type: boolean
                skip_validate:
                  description: ignores question validation to maximize test efficiency
                  default: false
                  type: boolean
                respect_optionals:
                  description: leaves some optional answers blank
                  default: false
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    example: 3jd7qyadpgjbxu6t
  /surveys/{survey}/state/live:
    post:
      operationId: createSurveyStateLive
      summary: Launch survey
      description: |
        Launches a survey. Goes through the launch process for a survey.  If
        there are any warnings those will be returned and the survey will not be
        launched.  Otherwise the surveys state will be changed to "live".
        Requires survey edit permission for the project.
      tags:
        - Survey State
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                relaunch:
                  description: This is required if a survey is in the closed state and needs to be set live.
                  default: false
                  type: boolean
                ignore_warnings:
                  description: 'This will ignore other survey warnings including: open tasks, incompatible elements, missing project parameters, and outdated translations.'
                  default: false
                  type: boolean
                ignore_kinesis:
                  description: This will ignore any kinesis errors when setting the survey live and will skip any syncing with kinesis.
                  default: false
                  type: boolean
                ignore_fulcrum:
                  description: This will ignore any fulcrum errors when setting the survey live and will skip syncing questions and changing the survey state on fulcrum.
                  default: false
                  type: boolean
                ignore_sst:
                  description: Passing this will ignore any sst warnings and launch the survey without valid progress data. Skipping this is not recommended and may result in uncaught survey errors and an inaccurate progress bar.
                  default: false
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  info:
                    type: array
                    items:
                      type: string
                  warnings:
                    type: array
                    items:
                      type: object
                      properties:
                        imported:
                          type: array
                          items:
                            type: string
                        incompatible:
                          type: array
                          items:
                            type: string
                        offline:
                          type: array
                          items:
                            type: string
                        translations:
                          type: array
                          items:
                            type: string
                        tasks:
                          type: array
                          items:
                            type: string
                        kinesis:
                          type: array
                          items:
                            type: string
                        fulcrum:
                          type: array
                          items:
                            type: string
                        sst:
                          type: array
                          items:
                            type: string
                        project_parameters:
                          type: array
                          items:
                            type: string
  /surveys/{survey}/state/live/warnings:
    get:
      operationId: getSurveyStateLiveWarnings
      summary: Get launch warnings
      description: |
        Returns any launch warnings that will appear when launching the survey.
      tags:
        - Survey State
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  imported:
                    type: array
                    items:
                      type: string
                  incompatible:
                    type: array
                    items:
                      type: string
                  offline:
                    type: array
                    items:
                      type: string
                  translations:
                    type: array
                    items:
                      type: string
                  tasks:
                    type: array
                    items:
                      type: string
                  kinesis:
                    type: array
                    items:
                      type: string
                  fulcrum:
                    type: array
                    items:
                      type: string
                  sst:
                    type: array
                    items:
                      type: string
                  project_parameters:
                    type: array
                    items:
                      type: string
  /surveys/{survey}/state/warnings:
    get:
      operationId: getSurveyStateWarnings
      summary: Get warnings
      description: |
        Retrieve project warnings for a survey.

        Only events experienced by non-users (i.e., logged-out participants) in
        non-testing surveys are reported. Best efforts are made to eliminate duplicate
        events from the results.
      tags:
        - Survey State
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: types
          description: restrict events returned to just these types
          in: query
          required: false
          schema:
            default:
              - blocks
              - missing_resources
              - exceptions
              - quota_misses
            type: array
        - name: start
          description: restrict events returned to just those occurring on/after this date (in ISO 8601 format)
          example: '2020-01-01'
          in: query
          required: false
          schema:
            type: string
        - name: end
          description: restrict warnings counts to just those occurring on/before this date
          example: '2020-12-31'
          in: query
          required: false
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    description: survey name
                  path:
                    type: string
                    description: survey path
                  company:
                    type: integer
                    description: company ID
                  events:
                    description: an array of events consisting of the following properties (subject to data retention rules)
                    type: array
                    items:
                      type: object
                      properties:
                        timestamp:
                          type: string
                          format: timestamp
                          description: time of even occurrence or observation
                        type:
                          type: string
                          description: event type
                          enum:
                            - blocks
                            - missing_resources
                            - exceptions
                            - quota_misses
                        details:
                          type: object
                          description: an object consisting of properties that are specific to the event type
                  counts:
                    description: full event counts
  /surveys/{survey}/state/close:
    post:
      operationId: createSurveyStateClose
      summary: Close survey
      description: Closes a survey. The survey's state is modified from any other state to "closed" immediately, preventing new participants from starting the survey. Requires survey edit permission for the project.
      tags:
        - Survey State
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                now:
                  type: boolean
                  description: by default participants have 1 hour from close time to finish a survey if they already started. Setting to `true` closes it immediately.
                  default: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/evaluate:
    post:
      operationId: createSurveyEvaluate
      summary: Evaluate
      description: |-
        Evaluates code within a specific survey environment. This allows you to find out the value of logic conditions such as `q3.r5.val` within a specific participant's survey context. The context can be omitted; in that case the last submitted state is used (this is most useful when debugging where you know no new data appears).

        This is equivalent to modifying the survey.xml to add an `<exec>` block that prints out the valuate.

        This API is available from the command line using the `beacon eval` tool. Run `beacon eval survey/path` to open up a shell that lets you evaluate multiple commands using this API. This command takes an optional state ID.

        The returned object has a `stdout` value that corresponds to what would be printed in a shell. Thus if you ask for a string, e.g. `q1.r1.val` the Python representation of a string is returned, i.e. `'Hello\n'`. You can use `print q1.r1.val` to avoid that. The returned `state` value can be passed in again to ensure the same evaluation environment -- this is useful if you called the API without an explicit state.

        Any changes to question data (e.g. q3.r1.val = "foo") or persistent variables will be reset next time you call the API, as the state is reloaded. Assignment to local variables may or may nor persistent, just like in the normal data collection.
      tags:
        - Survey Evaluate
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                cond:
                  description: 'Python condition to evaluate. This works like the Python command line shell: you can send a multi-line loop'
                  type: string
                state:
                  description: The ID of the state to enter. After submitting a survey page, view the source code and look for the hidden "state" variable. If omitted, the last submitted state is used.
                  type: string
              required:
                - cond
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  state:
                    type: string
                    description: the state against which the expression was evaluated
                    example: 2498cbe94fb82cd2c153edc73370aa99ce95592fQ000001Q000002a7
                  stdout:
                    type: string
                    description: the content that would be printed on the shell
                    example: Hello Professor Falken
  /surveys/{survey}/quota:
    get:
      operationId: getSurveyQuota
      summary: Get quota
      description: |
        Retrieves quota cell definition and current state.

        For full KB documentation, see [Quotas Guide: Limit and Monitor Project
        Sample](https://forstasurveys.zendesk.com/hc/en-us/articles/10100597040795).
        Concepts:

        * A quota file (quota.xls) contains multiple `sheets`.
        * The survey quota element executes all `tables` from one sheet.
        * `Tables` reference `markers`. A `marker` has either a condition (E.g.
        set if Male - q1.r1)) or is a `plus marker`.
        * A quota `cell` defines number of participants you want that have 1 or
        more markers set.
        * If a participant is eligible for multiple cells, the cell with highest
        `priority` is chosen, otherwise the cell with the least filled
        percentage.
        * If properly eligible, the participant receives one `quota marker` per
        `table` identifying the exact `cell`, which is a combination of the
        sheet and markers involved. For example, `/Sheet1/Male/18-25` (note that
        quotas created with the survey editor will have auto-assigned IDs for
        markers e.g. `/New Quota/AoAos/bo8Oi`).
        * Every `plus marker` the participant is assigned is also set in
        addition to the quota cell marker, e.g. `concept1` and
        `/Concepts/concept1`.
      tags:
        - Survey Quotas
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  markers:
                    type: object
                    description: |
                      Maps each quota cell marker name (e.g. `/Sheet1/Male/18-25`) to
                      an object describing its current state.
                    additionalProperties:
                      type: object
                      properties:
                        complete:
                          type: integer
                          description: |
                            The number of *completed* and qualified participants
                            with that marker.
                        pending:
                          type: integer
                          description: |
                            The number of participants who have been set the marker
                            and have been active within the last 15 minutes, but have
                            not yet completed.
                        limit:
                          type: integer
                          description: |
                            The current effective cell limit (when using soft quotas
                            this may be different from the hard limit).
                        oq:
                          type: integer
                          description: |
                            The number of participants who qualified for the cell but
                            were terminated because the cell had already reached the
                            limit.
                  sheets:
                    type: object
                    description: |
                      Maps sheet names to sheet definitions. Each sheet definition is
                      an array of tables.
                    additionalProperties:
                      type: array
                      description: array of table properties
                      items:
                        type: object
                        properties:
                          description:
                            type: string
                            description: |
                              The table name, an optional description entered.
                          cellCount:
                            type: integer
                            description: |
                              The maximum number of quota cells selected when hitting
                              this table (normally just 1)
                          sheetCond:
                            type: string
                            description: |
                              Value of the `cond` attribute on the quota element for the 
                              "sheet" that contains this table. 
                              If no `cond` attribute is present, then `null`
                          tableTotal:
                            type: integer
                            description: |
                              The table total. This is used solely for soft quotas and
                              percentage-based selection.
                          tableIndex:
                            type: integer
                            description: The table index in relation to the sheet.
                          cells:
                            type: array
                            description: An array of the quota cells.
                            items:
                              type: object
                              properties:
                                marker:
                                  type: string
                                  description: Name of the quota cell marker set by this `cell`. Index into `markers` above to find the counts.
                                components:
                                  type: array
                                  description: |
                                    The markers (see `defines` and `plus`) that make
                                    up this quota marker.
                                  items:
                                    type: string
                  defines:
                    type: object
                    description: Maps a marker name to an object
                    additionalProperties:
                      type: object
                      properties:
                        cond:
                          type: string
                          description: |
                            The logic condition required to qualify for this marker.
                            If `null`, this is a plus marker.
                        description:
                          type: string
                          description: |
                            The alternative text for a marker shown in the Response
                            Summary.
                  plus:
                    type: array
                    description: An array of plus markers defined in this quota
                    items:
                      type: string
                  priority:
                    type: object
                    description: |
                      Maps quota cell markers (e.g. `/Sheet1/Male/18-25`) to priority
                      levels. Those not mentioned have priority 0.
                    additionalProperties:
                      type: integer
                  stopped:
                    type: object
                    description: |
                      Maps quota cell markers of cells that were stopped to a string
                      of data indicating the user that stopped the cell and the
                      timestamp of when the cell was stopped. Those have a temporary
                      hard limit of 0 until resumed.
                    additionalProperties:
                      type: string
                example:
                  markers:
                    /New Quota (1)/two:
                      limit: 50
                      pending: 0
                      oq: 0
                      complete: 0
                    /New Quota/AoAos/bo8Oi:
                      limit: 20
                      pending: 0
                      oq: 0
                      complete: 0
                    /New Quota (1)/one:
                      limit: 50
                      pending: 0
                      oq: 0
                      complete: 0
                  priority:
                    /New Quota (1)/one: 2
                  plus:
                    - four
                    - five
                    - three
                    - two
                    - one
                  sheets:
                    New Quota (1):
                      - cellCount: 1
                        sheetCond: null
                        tableTotal: 250
                        tableIndex: 0
                        cells:
                          - marker: /New Quota (1)/one
                            components:
                              - one
                          - marker: /New Quota (1)/two
                            components:
                              - two
                  stopped:
                    /New Quota/AoAos/s9oVa: erwin@decipherinc.com on 02/24/2015 12:48
                  defines:
                    XiiZn:
                      cond: (q1.r6)
                      description: 55-65
                    LvmQy:
                      cond: (q1.r2)
                      description: 18-24
  /surveys/{survey}/quota/edit:
    put:
      operationId: updateSurveyQuotaEdit
      summary: Update quotas
      description: |
        Updates quota limits. Requires Response Summary: edit permission for the
        project. Use Quota API to access quota definitions.
      tags:
        - Survey Quotas
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                limits:
                  type: object
                  description: |
                    Contains the keys and new limits. The key for cell is the full marker
                    name and table is the sheet/tableindex. Use the Quota API to retrieve
                    the quota table sheet and index.
              required:
                - limits
            examples:
              Set cell limits:
                value:
                  limits:
                    /Gender/TDW7j: '125'
                    /Gender/gp00q: '75'
              Set table limits:
                value:
                  limits:
                    Gender/1: '500'
              Remove table limits:
                value:
                  limits:
                    Gender/1: inf
              Set limit to range:
                value:
                  limits:
                    Gender/1: '500'
                    Gender/TDW7j: 200-500
                    Gender/gp00q: 0-300
              Set limit to percentages:
                value:
                  limits:
                    Gender/1: '500'
                    Gender/TDW7j: 70%
                    Gender/gp00q: 30%
              Set priorities:
                value:
                  limits:
                    Gender/TDW7j: '125:3'
                    Gender/gp00q: '75'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/files:
    get:
      operationId: getSurveyFiles
      summary: List files
      description: Retrieves a list of system and static files relevant to a survey
      tags:
        - Survey Files
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    filename:
                      type: string
                      description: the file path relative to the survey directory
                    modified:
                      type: string
                      description: the date and time when the file was last modified
                      format: ISO-8601 timestamp with timezone
                    size:
                      type: integer
                      description: the size of the file in bytes
              example:
                - filename: survey.xml
                  modified: '2020-10-20T21:02:11Z'
                  size: 1239
                - filename: static/less-compiled.css
                  modified: '2020-10-20T21:02:14Z'
                  size: 73860
  /surveys/{survey}/files/{filename}:
    get:
      operationId: getSurveyFile
      summary: Download file
      description: |
        Allows direct access to some of the configuration files that make up a
        survey. Use the List call above to find out which files are specifically
        available for this survey.

        - survey.xml -- survey's main content
        - quota.xls -- Excel 97 file defining quotas
        - quota.xls.log -- this log file contains debug information stored on
        every quota invocation
        - survey.log -- additional debug data related to the survey
        - data/exit.log -- one entry for each participant exiting the survey
        - virtual-timing.txt -- virtual question performance
        - static/* -- all uploaded static resources
      tags:
        - Survey Files
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: filename
          description: filename to download
          in: path
          required: true
          schema:
            type: string
          example: survey.xml
      responses:
        '200':
          description: OK
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
    put:
      operationId: updateSurveyFile
      summary: Upload/replace file
      tags:
        - Survey Files
      description: |-
        Allows a new file to be uploaded or an existing file to be replaced. When uploading a `survey.xml`, only a survey that would successfully load are allowed and only surveys in `dev` or `testing` state can be modified. If you override the last check beware not to modify the datamap for your survey, as no conversion process is done by this call.

        If an invalid file is uploaded, the `400` error code is returned. If an error is returned from a `survey.xml`, the body will contain a list of errors in the `extra` property. This will be an array of error objects. An error object will have `type` set to either parse or survey. Parse errors occur during XML parsing. Survey errors occur during validation of survey content (i.e. attributes and values).

        A list of the allowed file types can be found [here](https://forstasurveys.zendesk.com/hc/en-us/articles/4409477134875).
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: filename
          description: filename to upload
          in: path
          required: true
          schema:
            type: string
          example: survey.xml
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                contents:
                  type: string
                  format: binary
                  description: The contents of the file
                validate:
                  type: boolean
                  description: |
                    Only applies when uploading `survey.xml`. Validate `survey.xml`
                    prior to saving it.
                  default: true
                overwriteLive:
                  type: boolean
                  description: Allow updates to live or closed surveys.
                  default: false
                location:
                  type: string
                  description: |
                    The location to which to upload the file. If uploading to the
                    survey's static directory, use "static", otherwise use the default
                    "root" to upload the file to the root directory of the survey.
                    Files in static are publicly accessible, while files in the root
                    directory of the survey are system only.
                  default: root
                  enum:
                    - root
                    - static
              required:
                - contents
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  filename:
                    type: string
                    description: the filename where the uploaded file was stored
              example:
                filename: survey.xml
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    type: string
                    description: generic error description
                  $code:
                    type: integer
                    description: http error code (400)
                  extra:
                    type: array
                    description: an array of error objects
                    items:
                      type: object
                      description: details about the particular parse or survey error
              examples:
                Parse error:
                  value:
                    $error: Bad content. Additional error in body.
                    $code: 400
                    extra:
                      - column: 220
                        processed: |
                          <survey autosave=\"0\" setup='time,term,quota'
                          autosaveKey=\"\" compat=\"118\"
                          extraVariables=\"url,record,list,page,source\"
                          lang=\"english.utf8\" name=\"Kitchen Sink Survey
                          (remotely modified)\" pipeAltLabels=\"1\" state='testing'>
                          <>
                        file: demo/kitchensink/temp-api/survey.xml
                        line: 2
                        type: parse
                        message: not well-formed (invalid token)
                Survey errors:
                  value:
                    $error: Bad content. Additional error in body.
                    $code: 400
                    extra:
                      - tag: radio
                        type: survey
                        label: q1
                        error: 'Extra unrecognized argument given: whatever'
                      - line: 1243
                        tag: col
                        type: survey
                        label: c8
                        error: 'Extra unrecognized argument given: xyzzy'
    delete:
      operationId: deleteSurveyFile
      summary: Delete file
      description: |
        Allows the user to delete any file type that can be uploaded in the
        survey directory. Version control may store past revisions for specific
        files in the survey directory. The force flag is required if the survey
        is live or closed. If used incorrectly this can cause data loss. If an
        invalid file is attempted to be deleted, a 400 response will return. On
        successful deletion of the file a 200 response will return. The survey
        log and user audit log will contain an entry for who deleted what
        specific file.
      tags:
        - Survey Files
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: filename
          description: filename to delete
          in: path
          required: true
          schema:
            type: string
          example: custom.css
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                location:
                  description: |
                    The location from which the file should be deleted. If deleting
                    a file from the static directory, use "static", otherwise use
                    the default "root" to delete a file in the root of the survey
                    directory.
                  default: root
                  type: string
                  enum:
                    - root
                    - static
                force:
                  description: |
                    Force delete the file if the survey is live or closed (warning:
                    This can cause data loss if used incorrectly).
                  default: false
                  type: boolean
            example:
              location: static
              force: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/files/headers:
    get:
      operationId: getSurveyFileHeaders
      summary: Get file headers
      description: |
        Retrieves a list of headers from a .dat or .txt file in the root directory of
        the project.
      tags:
        - Survey Files
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: filename
          in: query
          description: file name from which to retrieve headers
          example: data.txt
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
              example:
                - email
                - firstname
                - lastname
                - occupation
  /surveys/{survey}/warnings:
    get:
      operationId: getSurveyWarnings
      summary: Get warnings
      description: |
        Retrieve project warnings for a survey.
        Only events experienced by non-users (i.e., logged-out participants) in non-testing surveys
        are reported. Best efforts are made to eliminate duplicate events from the results.
      tags:
        - Survey Warnings
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: start
          in: query
          description: restrict events returned to just those occurring on/after this date
          example: '2021-01-01'
          schema:
            type: string
            format: ISO-8601
        - name: end
          in: query
          description: restrict warnings counts to just those occurring on/before this date
          example: '2021-01-01'
          schema:
            type: string
            format: ISO-8601
        - name: types
          in: query
          description: restrict events returned to just these types
          example: exceptions
          schema:
            type: string
            default: blocks,missing_resources,exceptions,quota_misses
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  company:
                    description: company ID
                    example: 1
                    type: integer
                  counts:
                    description: Full event counts
                    type: object
                  events:
                    description: |
                      An array of events consisting of the following properties
                      (subject to data retention rules)
                    type: array
                    items:
                      type: object
                      properties:
                        timestamp:
                          type: string
                          format: timestamp
                          description: time of event occurrence or observation
                        type:
                          type: string
                          description: event type
                          enum:
                            - blocks
                            - missing_resources
                            - exceptions
                            - quota_misses
                        details:
                          type: object
                          description: an object consisting of properties that are specific to the event type
                  name:
                    description: Survey name
                    example: survey123
                    type: string
                  path:
                    description: Survey path
                    example: selfserve/53a/210401
                    type: string
  /surveys/{survey}/terms:
    get:
      operationId: getSurveysTerms
      summary: Get survey term elements
      description: Return the term elements for the given survey
      tags:
        - Survey Terms
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    cond:
                      description: The term element's cond attribute
                      type: string
                    description:
                      description: The description of the term
                      type: string
                    label:
                      description: The label of the term element
                      type: string
                    marker:
                      description: |
                        The marker that would be set if the respondent was terminated
                        by the condition in this term element.
              example:
                - cond: q1.r2
                  description: Not a Chicago Bull
                  label: te1
                  marker: term:q1.r2
                - cond: q2.r2
                  description: Not a Michael Jordan
                  label: te2
                  marker: term:q2.r2
  /surveys/{survey}/subscribers:
    post:
      operationId: addSurveySubscribers
      summary: Add Survey Subscribers
      description: |
        Subscribe users to a project by email address.
      tags:
        - Survey Subscribers
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                emails:
                  description: List of user emails to be added as subscribers.
                  type: array
                  items:
                    type: string
                    format: email address
              required:
                - emails
              example:
                emails:
                  - gooduser1@decipherinc.com
                  - gooduser2@decipherinc.com
                  - baduser1@decipherinc.com
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  total_added:
                    type: integer
                    description: number of subscriber emails added
                  errors:
                    type: array
                    description: list of unadded emails and reason
                    items:
                      type: object
                      properties:
                        details:
                          type: string
                          description: the reason for failure to add
                        email:
                          type: string
                          format: email
                          description: the email that could not be added
              example:
                total_added: 2
                errors:
                  - details: user must be active and have permission to view the project
                    email: baduser1@decipherinc.com
    delete:
      operationId: removeSurveySubscribers
      summary: Remove Survey Subscribers
      description: |
        Unsubscribe users from a survey by email address.
      tags:
        - Survey Subscribers
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                emails:
                  description: List of user emails to be removed from survey subscribers.
                  type: array
                  items:
                    type: string
                    format: email address
              required:
                - emails
              example:
                emails:
                  - gooduser1@decipherinc.com
                  - gooduser2@decipherinc.com
                  - baduser1@decipherinc.com
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
    get:
      operationId: getSurveySubscribers
      summary: Get Survey Subscribers
      description: |
        List of emails belonging to users subscribed to a survey.
      tags:
        - Survey Subscribers
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  subscribers:
                    type: array
                    description: list of emails with timestamp
                    items:
                      type: object
                      properties:
                        date_added:
                          type: string
                          format: date-time
                          description: date when the user was subscribed to the survey
                        email:
                          type: string
                          format: email
                          description: email address of the user subscribed to the survey
              example:
                subscribers:
                  - date_added: '2022-03-08T22:23:06Z'
                    email: user@example.com
  /surveys/{survey}/users:
    get:
      operationId: getSurveyUsers
      summary: Get Survey Users
      description: |
        A permissions map, and a list of users for a specified survey. **Coming Soon**
      tags:
        - Survey Users
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  permissions_map:
                    $ref: '#/components/schemas/userPermissionsMap'
                  users:
                    type: array
                    description: List of data for each user (and group member) in the survey.
                    items:
                      $ref: '#/components/schemas/surveyUserData'
                additionalProperties: false
              example:
                permissions_map:
                  none:
                    admin: null
                    theme_editor: none
                    reporting_crosstabs: null
                    response_summary: null
                    campaign_manager: null
                    survey: null
                    research_dashboard: null
                    offline: null
                    data: null
                  full:
                    admin: full
                    theme_editor: full
                    reporting_crosstabs: edit
                    response_summary: edit
                    campaign_manager: build
                    survey: build
                    research_dashboard: build
                    offline: full
                    data: edit
                  vendor:
                    admin: null
                    theme_editor: none
                    reporting_crosstabs: null
                    response_summary: view
                    campaign_manager: null
                    survey: view
                    research_dashboard: null
                    offline: full
                    data: null
                  edit:
                    admin: full
                    theme_editor: all
                    reporting_crosstabs: edit
                    response_summary: edit
                    campaign_manager: null
                    survey: edit
                    research_dashboard: view
                    offline: full
                    data: download
                  interviewer_only:
                    admin: null
                    theme_editor: none
                    reporting_crosstabs: null
                    response_summary: null
                    campaign_manager: null
                    survey: null
                    research_dashboard: null
                    offline: full
                    data: null
                  view_data:
                    admin: null
                    theme_editor: all
                    reporting_crosstabs: view
                    response_summary: view
                    campaign_manager: null
                    survey: view
                    research_dashboard: view
                    offline: full
                    data: download
                  view:
                    admin: null
                    theme_editor: all
                    reporting_crosstabs: view
                    response_summary: view
                    campaign_manager: null
                    survey: view
                    research_dashboard: view
                    offline: full
                    data: null
                users:
                  - added_on: '2025-03-22T19:23:06Z'
                    email: user1@example.com
                    user_id: 2
                    group_id: null
                    added_by:
                      email: admin@example.com
                      id: 1
                    permissions: full
                  - added_on: '2025-06-08T06:15:21Z'
                    email: user2@example.com
                    user_id: 3
                    group_id: 1
                    added_by:
                      email: admin@example.com
                      id: 1
                    permissions:
                      admin: full
                      theme_editor: company
                      reporting_crosstabs: edit
                      response_summary: edit
                      campaign_manager: build
                      survey: null
                      research_dashboard: build
                      data: download
                      offline: full
    post:
      operationId: addSurveyUsers
      summary: Add Survey Users
      description: |
        Adds users and/or groups to a project. **Coming Soon**
      tags:
        - Survey Users
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                group_list:
                  description: |
                    List of groups to be added to the survey with specified permissions.
                  type: array
                  items:
                    type: object
                    properties:
                      group_id:
                        type: integer
                        description: The ID of the group.
                      permissions:
                        oneOf:
                          - type: string
                            description: Preset permissions to apply to the group.
                            enum:
                              - full
                              - edit
                              - view_data
                              - view
                              - vendor
                              - interviewer_only
                              - none
                          - $ref: '#/components/schemas/userPermissionsMap'
                user_list:
                  description: |
                    List of users to be added to the survey with specified permissions.
                  type: array
                  items:
                    type: object
                    properties:
                      email:
                        type: string
                        format: email address
                        description: The email address of the user - required if no ID is provided.
                      id:
                        type: integer
                        description: The ID of the user - required if no email is provided.
                      permissions:
                        oneOf:
                          - type: string
                            description: Preset permissions to apply to the group.
                            enum:
                              - full
                              - edit
                              - view_data
                              - view
                              - vendor
                              - interviewer_only
                              - none
                          - $ref: '#/components/schemas/userPermissionsMap'
              example:
                group_list:
                  - group_id: 1
                    permissions: full
                  - group_id: 2
                    permissions:
                      custom:
                        survey: build
                        report: edit
                        data: download
                        dashboard: edit
                        cm: build
                        dash: none
                        admin: full
                        themeEditor: company
                        offline: none
                user_list:
                  - id: user1@decipherinc.com
                    permissions: view
                  - email: user2@decipherinc.com
                    permissions: full
                  - email: user3@decipherinc.com
                    permissions:
                      survey: build
                      report: edit
                      data: download
                      dashboard: edit
                      cm: build
                      dash: none
                      admin: full
                      themeEditor: company
                      offline: none
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  users_added:
                    type: integer
                    description: Number of users that were added.
                  groups_added:
                    type: integer
                    description: Number of groups that were added.
                  errors:
                    type: array
                    description: List of items that weren't added and details as to why.
                    items:
                      type: object
                      properties:
                        details:
                          type: string
                          description: The reason for failure to add.
                        user:
                          type: string
                          format: email
                          description: The email or ID of the user that could not be added.
                        group:
                          type: integer
                          description: The group ID that could not be added.
              example:
                users_added: 2
                groups_added: 1
                errors:
                  - details: Valid permission required.
                    user: baduser1@decipherinc.com
                  - details: Group not found.
                    group: 9999
        '400':
          description: An error occurred
          content:
            application/json:
              schema:
                type: object
                properties:
                  $code:
                    type: integer
                    description: The error code.
                  $error:
                    type: string
                    description: The error message.
                  extra:
                    type: object
                    description: Extra error information.
                example:
                  $code: 400
                  $error: 'An error occurred: description of error'
                  extra: null
    delete:
      operationId: removeSurveyUsers
      summary: Remove Survey Users
      description: |
        Remove users from a survey by email address. **Coming Soon**
      tags:
        - Survey Users
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                group_list:
                  description: List of group IDs to be removed from the survey.
                  type: array
                  items:
                    type: object
                    properties:
                      group_id:
                        type: integer
                        description: The ID of the group to be removed from the survey.
                user_list:
                  description: List of users to be removed from the survey.
                  type: array
                  items:
                    type: object
                    properties:
                      email:
                        type: string
                        format: email
                        description: The email address of the user to be removed from the survey, required if no ID is provided.
                      id:
                        type: integer
                        description: The ID of the user to be removed from the survey, required if no email is provided.
              example:
                group_list:
                  - group_id: 1
                user_list:
                  - id: 1
                  - email: user1@decipherinc.com
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                  - type: object
                    properties:
                      errors:
                        type: object
                        description: A description of any errors.
                        properties:
                          details:
                            type: string
                            description: The reason for failure to remove.
                          user:
                            type: string
                            format: email
                            description: The email or ID of the user that could not be removed.
                          group:
                            type: integer
                            description: The group ID that could not be removed.
  /surveys/{survey}/users/{user}:
    get:
      operationId: getSurveyUser
      summary: Get a Specific Survey User
      description: |
        A permissions map, and a list of user entries for a specified survey. **Coming Soon**
      tags:
        - Survey Users
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: user
          description: |
            Either the ID or email address whose permissions you would like to view.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  permissions_map:
                    $ref: '#/components/schemas/userPermissionsMap'
                  user_entries:
                    type: array
                    description: |
                      List of data for all entries of a specific user in a survey. A user may have
                      multiple entries if they are a member of one or more groups.
                    items:
                      $ref: '#/components/schemas/surveyUserData'
                additionalProperties: false
              example:
                permissions_map:
                  none:
                    admin: null
                    theme_editor: none
                    reporting_crosstabs: null
                    response_summary: null
                    campaign_manager: null
                    survey: null
                    research_dashboard: null
                    offline: null
                    data: null
                  full:
                    admin: full
                    theme_editor: full
                    reporting_crosstabs: edit
                    response_summary: edit
                    campaign_manager: build
                    survey: build
                    research_dashboard: build
                    offline: full
                    data: edit
                  vendor:
                    admin: null
                    theme_editor: none
                    reporting_crosstabs: null
                    response_summary: view
                    campaign_manager: null
                    survey: view
                    research_dashboard: null
                    offline: full
                    data: null
                  edit:
                    admin: full
                    theme_editor: all
                    reporting_crosstabs: edit
                    response_summary: edit
                    campaign_manager: null
                    survey: edit
                    research_dashboard: view
                    offline: full
                    data: download
                  interviewer_only:
                    admin: null
                    theme_editor: none
                    reporting_crosstabs: null
                    response_summary: null
                    campaign_manager: null
                    survey: null
                    research_dashboard: null
                    offline: full
                    data: null
                  view_data:
                    admin: null
                    theme_editor: all
                    reporting_crosstabs: view
                    response_summary: view
                    campaign_manager: null
                    survey: view
                    research_dashboard: view
                    offline: full
                    data: download
                  view:
                    admin: null
                    theme_editor: all
                    reporting_crosstabs: view
                    response_summary: view
                    campaign_manager: null
                    survey: view
                    research_dashboard: view
                    offline: full
                    data: null
                user_entries:
                  - added_on: '2025-03-22T19:23:06Z'
                    email: user1@example.com
                    user_id: 2
                    group_id: null
                    added_by:
                      email: admin@example.com
                      id: 1
                    permissions: full
                  - added_on: '2025-06-08T06:15:21Z'
                    email: user1@example.com
                    user_id: 2
                    group_id: 1
                    added_by:
                      email: admin@example.com
                      id: 1
                    permissions:
                      admin: full
                      theme_editor: company
                      reporting_crosstabs: edit
                      response_summary: edit
                      campaign_manager: build
                      survey: null
                      research_dashboard: build
                      data: download
                      offline: full
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  $code:
                    type: integer
                    description: The error code.
                  $error:
                    type: string
                    description: The error message.
                  extra:
                    type: object
                    description: Extra error information.
                example:
                  $code: 404
                  $error: User (user3@example.com) not found in this survey
                  extra: null
  /panels/{panel_id}/registration:
    get:
      operationId: getPanelRegistration
      summary: Get registration survey
      description: Get the panel's Decipher registration survey's path.
      tags:
        - Panel Data
      parameters:
        - name: panel_id
          description: the panel's numeric ID
          in: path
          required: true
          schema:
            type: string
        - name: instance
          description: filter results to just this Kinesis Panel instance/host
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  path:
                    type: string
                    description: the survey path
              example:
                path: selfserve/53a/100100
  /panels/{panel_id}/link:
    get:
      operationId: getPanelLink
      summary: Get link
      description: Get the survey ID for the given Kinesis Panel samplesource.
      tags:
        - Panel Data
      parameters:
        - name: panel_id
          description: the panel's numeric ID
          in: path
          required: true
          schema:
            type: string
        - name: instance
          description: the Kinesis Panel instance/host
          in: query
          required: true
          schema:
            type: string
        - name: survey
          description: the survey path
          in: query
          required: true
          schema:
            type: string
        - name: list
          description: the participant source's list number
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  survey_id:
                    description: the survey id
                    type: integer
              example:
                survey_id: 1234567890
  /panels/{panel_id}/datapoints:
    get:
      operationId: getPanelDatapoints
      summary: List panel datapoints
      description: |
        Returns the datapoints belonging to the specified panel.
      tags:
        - Panel Datapoints
      parameters:
        - name: panel_id
          description: panel's numeric ID
          in: path
          required: true
          schema:
            type: string
        - name: instance
          description: the Kinesis Panel instance/host
          in: query
          required: true
          schema:
            type: string
        - name: survey
          description: a survey with the panel's API key in its path
          in: query
          required: false
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    choices:
                      type: array
                      items:
                        type: object
                        properties:
                          choice:
                            type: string
                            description: answer option text
                          export_value:
                            type: integer
                            description: the export value
                          value:
                            type: integer
                            description: unique (across entire panel) numeric ID
                    fingerprint:
                      type: string
                      description: |
                        hash of the datapoint, ignoring text and export value changes
                    group:
                      type: string
                      description: group to which the datapoint belongs
                    label:
                      type: string
                      description: |
                        the unique, alphanumeric identifier for this question
                    modified:
                      type: integer
                      description: the modification time of the datapoint
                    system_field:
                      type: string
                      description: system field referencing the datapoint
                    text:
                      type: string
                      description: the datapoint's question text or description
                    type:
                      type: string
                      description: the datapoint's question type
              example:
                - choices:
                    - choice: Male
                      export_value: 10
                      value: 1
                    - choice: Female
                      export_value: 11
                      value: 2
                    - choice: Prefer not to say
                      export_value: 99
                      value: 247
                  fingerprint: 42a637
                  group: null
                  label: Qgender
                  modified: 1468518354
                  system_field: gender
                  text: Gender
                  type: radio
                - choices: []
                  fingerprint: c74d97
                  group: null
                  label: Qzip
                  modified: 1459877107
                  system_field: zip-postal_code
                  text: What is your zip code?
                  type: openend
    post:
      operationId: createPanelDatapoints
      summary: Push datapoints
      description: |
        Create new datapoints on a Kinesis Panel from a Decipher survey's
        questions.
      tags:
        - Panel Datapoints
      parameters:
        - name: panel_id
          description: The panel's numeric ID
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                instance:
                  description: The Kinesis Panel instance/host
                  type: string
                survey:
                  description: |
                    The survey containing the questions to create as panel datapoints
                  type: string
              required:
                - instance
                - survey
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  failed:
                    type: array
                    description: an array of errors for questions that failed
                    items:
                      type: object
                      properties:
                        error:
                          type: string
                          description: a description of the error
                        label:
                          type: string
                          description: label of the question that failed
                  successful:
                    type: array
                    description: an array of labels of questions that succeeded
                    items:
                      type: string
              example:
                failed:
                  - error: Choices not allowed for type
                    label: q4
                successful:
                  - q1
                  - q2
                  - q3
  /surveys/{survey}/panels:
    get:
      operationId: getSurveyPanels
      summary: List kinesis panels
      description: |
        Retrieves all Kinesis Panels accessible to a survey.

        (Requires access to the survey and installation of the Kinesis Panel
        instance's API key in the survey's path.)
      tags:
        - Survey Panels
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: instance
          description: filter results to just this Kinesis Panel instance/host
          in: query
          required: false
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  instance:
                    type: string
                    description: the url of the kinesis panel instance
                  panels:
                    type: array
                    description: the list of panels
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: id of the panel
                        name:
                          type: string
                          description: name of the panel
              examples:
                response:
                  value:
                    - instance: some.panel.com
                      panels:
                        - id: '1'
                          name: My Little Panel
                        - id: '4'
                          name: My Cool, New Panel
  /surveys/{survey}/panels/link:
    post:
      operationId: updateSurveyPanelLink
      summary: Update panel survey
      description: |
        Generate or restore survey IDs for each Kinesis Panel samples source
        from Kinesis, and update the survey accordingly.
      tags:
        - Survey Panels
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /rh/users:
    get:
      operationId: getRHUsers
      summary: List users
      description: What users exist on the system? Returns an array of user objects.
      tags:
        - Users
      parameters:
        - name: company
          description: |
            show users only from this particular company ID. A staff user will
            by default see all users in all companies but can choose to see only
            a specific one. A regional supervisor user will see only users in
            their own company but can select one of the companies they
            supervises.
          in: query
          required: false
          schema:
            type: string
          example: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/userData'
  /rh/users/{user}:
    get:
      operationId: getRHUser
      summary: Get user
      description: Fetches information about a single user.
      tags:
        - Users
      parameters:
        - name: user
          description: Either the ID or email address of the requested user.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/userData'
    put:
      operationId: updateRHUser
      summary: Update user active status
      description: Update the active status of a given user. Change should include an explanation via the `why` parameter which is added to the audit log with the changer and the change. You must be able to edit the user, i.e. you are supervisor for the company or staff user.
      tags:
        - Users
      parameters:
        - name: user
          description: either the ID or email address of the user to affect
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                why:
                  description: |
                    Explanation for the status change. This is added to the user's
                    audit log.
                  type: string
                active:
                  description: |
                    Set this to `false` to disable a user or `true` to re-enable.
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /rh/users/{user}/send-password-reset:
    post:
      operationId: createRHUserSendPasswordReset
      summary: Create password reset
      description: Sends a password reset email to the user specified. You must be able to edit the user, i.e. you are supervisor for the company or staff user.
      tags:
        - Users
      parameters:
        - name: user
          description: either the ID or email address of the user to email
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /rh/users/{user}/reset-2fa:
    post:
      operationId: createRHUserReset2FA
      summary: Reset 2FA Device
      description: Reset a user's two-factor authentication device. This disassociates the user's account with any configured two-factor device, allowing the user to be able to configure a new two-factor device. Requires you to either be the same user, or have supervisor permissions for the user's company.
      tags:
        - Users
      parameters:
        - name: user
          description: either the ID or email address of the user
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    description: \"success\" if successful
                  detail:
                    type: integer
                    description: human friendly explanation
              example:
                status: success
                detail: 2FA device reset for researcher@example.com. They will be prompted to configure a new one when they next log in.
      x-codeSamples:
        - lang: beacon
          source: |
            beacon post rh/users/researcher@example.com/reset-2fa
  /rh/users/{user}/status:
    get:
      operationId: getRHUserStatus
      summary: Retrieve a user's status
      description: Retrieve a user's status.
      tags:
        - Users
      parameters:
        - name: user
          description: Either the ID or email address whose status you would like to view.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  active:
                    description: User active status.
                    type: boolean
                    example: false
                  deactivation_date:
                    description: Date when the user was deactivated. Only returned when "active" is False.
                    type: string
                    example: '2024-05-07T21:05:31Z'
                  why:
                    description: Deactivation reason. Only returned when "active" is False.
                    type: string
                    example: Disabled due to inactivity
  /rh/users/{user}/whiteboard:
    get:
      operationId: getRHUserWhiteboard
      summary: Get whiteboard
      description: Get a user's "whiteboard", containing preferences for e.g. Builder and Portal.
      tags:
        - Users
      parameters:
        - name: user
          description: either the ID or email address of the user to affect
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  builder:
                    type: object
                    description: Preferences for Builder
                  portal:
                    type: object
                    description: Preferences for Portal
  /rh/users/{user}/whiteboard/{fragment}:
    delete:
      operationId: deleteRHUserWhiteboardFragement
      summary: Clear whiteboard
      description: |-
        Clear part of a user's whiteboard. The fragment should be either e.g. `portal` or `builder` to clear all settings related to portal and builder, or e.g.`builder/lumos.style.theme` to clear one specific setting (here, the default theme name).
        Returns the data in the entry that was cleared. For list of possible whiteboard items, issue the GET call.
      tags:
        - Users
      parameters:
        - name: user
          description: either the ID or email address of the user to affect
          in: path
          required: true
          schema:
            type: string
        - name: fragment
          description: e.g. `portal` or `portal/companySelection`
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /rh/users/{user}/audit-log:
    get:
      operationId: getRHUserAuditLog
      summary: Retrieve a user's audit log
      description: Retrieve a user's audit log in batches of 1000 entries per page. You can access your own log or the logs of users that you have permissions to view.
      tags:
        - Users
      parameters:
        - name: user
          description: Either the ID or email address whose log you would like to view.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        user_id:
                          description: ID of the user that triggered the event
                          type: integer
                          example: 1
                        ip:
                          description: IP that triggered the event.
                          type: string
                          example: 172.0.0.0
                        event:
                          description: |
                            Name of the event.
                          type: string
                          example: 'Crosstabs: viewed ''Total Qualified'' report'
                        created_on:
                          description: When the event was triggered.
                          type: string
                          format: ISO 8601 timestamp with timezone
                          example: '2022-12-15T19:53:47Z'
                        type:
                          description: Event type.
                          type: string
                          example: audit.entry
                        id:
                          description: ID of the event.
                          type: integer
                          example: 9999
                        user_email:
                          description: Who triggered the event.
                          type: string
                          example: usermail@forsta.com
                        survey_path:
                          description: Survey related to the event.
                          type: string
                          example: selfserve/53a/220000
                  links:
                    type: object
                    description: |
                      Link to next batch of entries (page).
                    properties:
                      next:
                        description: An object with information about how to get the next page of results.
                        type: object
                        properties:
                          href:
                            description: Request this URL to get the next page of results
                            type: string
                            example: '{server}/api/v1/rh/users/{id}/audit-log?page[size]=2&page[after]=9999'
                          meta:
                            description: Details about the next link
                            type: object
                            properties:
                              page[size]:
                                description: |
                                  If manually constructing the URL for the next page,
                                  this is the parameter that would need to be changed to the
                                  number of entries per page.
                                type: string
                                example: '9999'
                              page[after]:
                                description: |
                                  If manually constructing the URL for the next page,
                                  this is the parameter that would need to the ID after
                                  which you want to start.
                                type: string
                                example: '9999'
  /rh/companies:
    get:
      operationId: getRHCompanies
      summary: List companies
      description: |
        What companies exist on the system? Returns an array of company objects.
        Supervisor access required.
      tags:
        - Companies
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    max_invalid_attempts:
                      type: integer
                    is_supercompany:
                      type: boolean
                    allow_shared_accounts:
                      type: boolean
                    product_builder:
                      type: string
                      format: ISO-8601 timestamp with timezone
                    id:
                      type: integer
                    updated_by:
                      type: integer
                    product_offline:
                      type: string
                      format: ISO-8601 timestamp with timezone
                    min_classes:
                      type: integer
                    created_by:
                      type: integer
                      description: ID of the user that created this company
                    supercompany:
                      type: integer
                    product_dashboard:
                      type: string
                      format: ISO-8601 timestamp with timezone
                    expires_on:
                      type: string
                      format: ISO-8601 timestamp with timezone
                    subdirectories:
                      type: array
                    description:
                      type: string
                    inactivity_timeout:
                      type: integer
                    product_content_editor:
                      type: string
                      format: ISO-8601 timestamp with timezone
                    name:
                      type: string
                    password_expire_days:
                      type: integer
                    created_on:
                      type: string
                      format: ISO-8601 timestamp with timezone
                    product_campaign:
                      type: string
                      format: ISO-8601 timestamp with timezone
                    min_password_len:
                      type: integer
                    updated_on:
                      type: string
                      format: ISO-8601 timestamp with timezone
              example:
                - max_invalid_attempts: 6
                  is_supercompany: false
                  allow_shared_accounts: false
                  product_builder: null
                  id: 1
                  updated_by: null
                  product_offline: null
                  min_classes: 2
                  created_by: 215
                  supercompany: null
                  product_dashboard: null
                  expires_on: '2021-01-08T01:29:49Z'
                  subdirectories: []
                  description: string
                  inactivity_timeout: 86400
                  product_content_editor: null
                  name: Example Inc.
                  password_expire_days: null
                  created_on: '2021-01-01T01:29:49Z'
                  product_campaign: null
                  min_password_len: 7
                  updated_on: '2021-01-02T01:29:49Z'
  /rh/companies/{company}/preferences:
    get:
      operationId: getRHCompanyPreferences
      summary: List company preferences
      description: Retrieves all preferences for a specific company.
      parameters:
        - $ref: '#/components/parameters/company'
      tags:
        - Companies
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              examples:
                response:
                  value:
                    appliedDefaults:
                      - fwu
                    fwu: compat
  /rh/companies/{company}/preferences/{key}:
    put:
      operationId: updateRHCompanyPreferencesKey
      summary: Update company preference
      description: Set a preference to a new value.
      tags:
        - Companies
      parameters:
        - name: company
          description: company to update the preference for
          in: path
          required: true
          schema:
            type: string
          example: 1
        - name: key
          description: the preference to update
          in: path
          required: true
          schema:
            type: string
          example: fwu
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                value:
                  description: the new value
                  type: string
              required:
                - value
            example:
              value: both
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /rh/companies/{company}/preferences/{key}/history:
    get:
      operationId: getRHCompanyPreferenceHistory
      summary: Get preference history
      description: |
        View a list of all changes to a specific preference. Returns
        an array of history entries.
      tags:
        - Companies
      parameters:
        - name: company
          description: company ID or name
          in: path
          required: true
          schema:
            type: string
          example: 1
        - name: key
          description: name of preference
          in: path
          required: true
          schema:
            type: string
          example: fwu
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    new:
                      description: the value of the preference
                    previous:
                      description: the previous value of the preference
                    user_id:
                      type: integer
                      description: id of the account responsible for the change
                    tstamp:
                      type: string
                      format: ISO 8601 timestamp with timezone
                      description: time of change
              example:
                - new: compat
                  previous: unicode
                  tstamp: '2014-10-21T14:27:38Z'
                  user_id: 104
                - new: unicode
                  previous: compat
                  tstamp: '2014-10-21T14:20:51Z'
                  user_id: 104
                - new: compat
                  previous: null
                  tstamp: '2014-10-21T14:20:35Z'
                  user_id: 104
  /rh/companies/{company}/groups:
    get:
      operationId: getRHCompaniesGroups
      summary: List groups within a company
      description: |
        List all user groups within a company. Edit company access required.
      parameters:
        - name: company
          description: |
            can be "all" for all companies, "self" for the company of the currently
            logged in user, a numeric company ID, or company name
          in: path
          required: true
          schema:
            type: string
      tags:
        - Companies
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    company_id:
                      type: integer
                      description: ID of the company to whom this group belongs
                    company_name:
                      type: string
                      description: Company name
                    default_permissions:
                      type: string
                      description: Default permissions for all users in group
                    name:
                      type: string
                      description: Group name
                    id:
                      type: integer
                      description: Group id
                    users:
                      type: array
                      description: List of user objects
                      items:
                        type: object
                        properties:
                          last_login_where:
                            type: string
                            format: ip address
                          supervisor:
                            type: boolean
                          subdirectory:
                            type: string
                          type:
                            type: string
                          company:
                            type: integer
                          id:
                            type: integer
                          last_password_change:
                            type: string
                            format: ISO-8601 timestamp with timezone
                          last_login:
                            type: string
                            format: ISO-8601 timestamp with timezone
                          active:
                            type: boolean
                          fullname:
                            type: string
                          lockedout_until:
                            type: string
                            format: ISO-8601 timestamp with timezone
                          login:
                            type: string
                            format: email
                            description: Email or name if no email is specified
                          expires_on:
                            type: string
                            format: ISO-8601 timestamp with timezone
                          staff:
                            type: boolean
                          added_to_group_by_email:
                            type: string
                            format: email
                            description: Email of the user who added this user to the group
                          added_to_group_on:
                            type: string
                            format: ISO-8601 timestamp with timezone
                            description: Date on which this user was added to the group
  /rh/companies/{company}/retention:
    get:
      operationId: getRHCompanyRetention
      summary: Get company data retention settings.
      description: |
        Retrieves all data retention settings for a company.
      tags:
        - Companies
      parameters:
        - $ref: '#/components/parameters/company'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  archive_days:
                    type: integer
                    description: Days before closed surveys are archived in this company.
                  clear_data_days:
                    type: integer
                    description: Days after a survey is archived until all respondent data in the archive is removed.
                  server_delete_days:
                    type: integer
                    description: The global default setting for archive_days that might apply to other companies.
                  server_archival_days:
                    type: integer
                    description: The global default setting for clear_data_days that might apply to other companies.
                  server_clear_data_days:
                    type: integer
                    description: Days after a survey has been archived until the archive has been permanently removed.
              example:
                archive_days: 20
                clear_data_days: null
                server_delete_days: 365
                server_archival_days: 20
                server_clear_data_days: null
  /rh/surveys/categories:
    get:
      operationId: getRHSurveysCategories
      summary: Get categories
      description: Return list of possible categories.
      tags:
        - Categories
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    text:
                      type: string
                    key:
                      type: string
              example:
                - text: Social Research
                  key: social
                - text: Sports, Recreation, Fitness
                  key: fitness
  /rh/companies/{company}/surveys:
    get:
      operationId: getRHCompanySurveys
      summary: Get surveys
      description: |
        This call retrieves Research Hub's information about surveys available
        for companies. Generally you should specify "all" as company parameter:
        the survey accessible to you may not all be owned by your company. To select
        multiple companies, keep the "company" variable to "all" and set a
        "companies" variable to a list of company IDs.

        A search query can be what you would normally specify in the portal.
        Review the Advanced Syntax listed [Search
        Capabilities](https://forstasurveys.zendesk.com/hc/en-us/articles/4409461528475)
        -- for example, pass the `query` variable set to `#sometag`
        or `user:joe@example.com` for special queries, or `kittens` for a normal
        text search.

        The returned array contains these properties. Remember that you can pass
        `select` to any query to get just a subset of them.
      tags:
        - Surveys
      parameters:
        - name: company
          description: the company ID or name of the company whose surveys you want to see. Specify `self` for your own company, or `all` for all companies (recommended)
          in: path
          required: true
          schema:
            type: string
        - name: query
          description: a search query
          in: query
          required: false
          schema:
            type: string
        - name: companies
          description: show only companies with these IDs (used with `company=all`)
          in: query
          required: false
          schema:
            type: array
        - name: permission
          description: require a minimum permission level (e.g. `survey.edit`)
          in: query
          required: false
          schema:
            type: string
        - name: select
          description: list of attributes to return
          in: query
          required: false
          schema:
            type: array
            items:
              type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/rhSurveyResponse'
    post:
      operationId: createRHCompanySurvey
      summary: Create survey
      description: Create a new survey.
      tags:
        - Surveys
      parameters:
        - name: company
          description: |
            the company ID or name of the company where you want the survey to
            be created. Specify `self` for your own company.
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  description: Name of survey shown in Research Hub
                  type: string
                ptype:
                  description: Project type
                  type: string
                  enum:
                    - beacon
                    - email
                    - spss
                category:
                  description: |
                    Survey category (Query `GET /api/v1/rh/surveys/categories` for
                    valid options.)
                  type: string
                subdirectory:
                  description: Subdirectory ID number
                  type: string
                description:
                  type: string
                  description: Description of survey
                tags:
                  description: List of tags
                  type: array
                prefPath:
                  description: |
                    Path of the survey (e.g. abc20001). Only lowercase letters,
                    numbers, and underscores are allowed.
                  type: string
                lang:
                  description: Language of the survey
                  type: string
              required:
                - name
                - ptype
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /rh/surveys/current:
    get:
      operationId: getRHSurveysCurrent
      summary: Get current surveys
      description: Return a list of current valid survey paths matching a specific permission. This is much faster than a full portal search (e.g. `/rh/companies/abc/surveys`) but returns far less data. This should be preferred when only survey paths are necessary.
      tags:
        - Surveys
      parameters:
        - name: permission
          in: query
          description: Require a minimum permission level.
          example: data.view
          schema:
            type: string
            default: any
        - name: states
          in: query
          description: List of survey states to accept data from.
          schema:
            type: array
            default:
              - live
            items:
              type: string
              enum:
                - live
                - closed
                - testing
                - dev
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
              example:
                - selfserve/abc/123456
                - selfserve/abc/234567
                - selfserve/abc/345678
                - selfserve/abc/456789
  /rh/surveys/historical:
    get:
      operationId: getRHSurveysHistorical
      summary: Get historical list
      description: |
        Returns a list of survey paths the current user can access for any
        existing as well as historical and archived survey.

        Unlike the normal portal survey list, this returns all surveys
        regardless of current company selection for staff.
      tags:
        - Surveys
      parameters:
        - name: permission
          description: if provided, the endpoint will only return surveys for which the user has this permission
          in: query
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
              example:
                - selfserve/53c/160615
                - selfserve/53c/181216
                - selfserve/53c/1611272
                - selfserve/53c/160616
  /rh/surveys/archived:
    get:
      operationId: getRHSurveysArchived
      summary: Get a list of archived surveys
      description: |
        Returns a list of archived surveys to which the calling user has historically
        had access.
      tags:
        - Surveys
      parameters:
        - name: company
          in: query
          description: |
            Specify a company id to return only archived surveys from that company.
          schema:
            type: string
            default: all
        - name: only_unarchivable
          in: query
          description: |
            If true, return only archives that are unarchivable, meaning only archives
            for which there is no existing survey at its survey path, and only the
            latest archive for that survey if there is more than one.
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    survey_path:
                      type: string
                      description: full survey path, e.g. `selfserve/123/4567`
                    name:
                      type: string
                      description: name of the survey
                    archived_at:
                      type: string
                      format: ISO 8601 timestamp with timezone
                      description: time at which the survey was archived
                    clear_data_at:
                      type: string
                      format: ISO 8601 timestamp with timezone or null
                      description: time at which the survey respondent data will be cleared (survey structure is not cleared at this time)
                    delete_at:
                      type: string
                      format: ISO 8601 timestamp with timezone or null
                      description: time at which the survey will be deleted
              example:
                - survey_path: selfserve/53a/230301
                  name: Survey 1
                  archived_at: '2023-03-14T18:43:52Z'
                  clear_data_at: '2023-09-14T18:43:52Z'
                  delete_at: null
                - survey_path: selfserve/53a/230302
                  name: Survey 2
                  archived_at: '2023-03-16T21:22:12Z'
                  clear_data_at: null
                  delete_at: '2024-03-14T18:43:52Z'
  /rh/surveys/templates/{template}/copy:
    post:
      operationId: createRhSurveysTemplateCopy
      summary: Create survey from template
      description: |
        Create a new survey from a template.
      tags:
        - Surveys
      parameters:
        - name: template
          in: path
          description: The id of the template to use.
          example: netpromoterscore
          required: true
          schema:
            type: string
            enum:
              - adtest
              - brandawareness
              - brandperception
              - copytestvideoad
              - csat
              - demographic
              - employeesatisfaction
              - exploratorypricing
              - 30dayonboarding
              - 60dayonboarding
              - 90dayonboarding
              - candidateevaluation
              - exitsurvey
              - pulse
              - supervisorevaluation
              - netpromoterscore
              - priceladdering
              - productconcept
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  description: Name of the new survey.
                  type: string
                company:
                  description: |
                    Name or ID of the company in which to create the survey.
                  type: string
                category:
                  description: Category to assign to the new survey.
                  type: string
                  enum:
                    - ''
                    - auto
                    - beauty
                    - beverage_alcohol
                    - beverage_non_alcohol
                    - business
                    - parenting
                    - loyalty
                    - credit_cards
                    - tourism
                    - education
                    - computer
                    - entertainment
                    - explicit
                    - clothing_dept_store
                    - clothing_other
                    - finance
                    - food
                    - gambling
                    - politics
                    - healthcare
                    - home_appliances
                    - home_entertainment
                    - home_improvement
                    - information_tech
                    - media
                    - personal_care
                    - pets
                    - restaurants
                    - sensitive
                    - smoking
                    - social
                    - fitness
                    - telecom
                    - toys
                    - transportation
                    - travel_airlines
                    - travel_hotels
                    - travel_services
                    - video_games
                    - internet
                description:
                  description: A description of the survey.
                  type: string
                lang:
                  description: Language for the survey.
                  type: string
                preferred_path:
                  description: |
                    Custom path for the new survey. If omitted the path will be
                    auto-generated.
                  type: string
                subdirectory:
                  description: ID of the subdirectory to use.
                  type: integer
                tags:
                  description: List of tags to add to the survey.
                  type: array
                  items:
                    type: string
              required:
                - name
                - company
              example:
                name: New NPS Survey
                company: Decipher
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/rhSurveyResponse'
  /rh/surveys/{survey}/copy:
    post:
      operationId: createRhSurveyCopy
      summary: Copy survey
      description: |
        Create a new survey by copying an existing one.
      tags:
        - Surveys
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  description: The name of the new survey.
                  type: string
                copy_data:
                  description: Copy project data.
                  default: false
                  type: boolean
                copy_permissions:
                  description: Copy project users and groups.
                  default: false
                  type: boolean
                copy_subscribers:
                  description: Copy project subscribers.
                  default: false
                  type: boolean
                preferred_path:
                  description: |
                    Optional custom survey path. If not supplied, the path will be
                    auto-generated.
                  type: string
              required:
                - name
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/rhSurveyResponse'
  /rh/surveys/{survey}:
    get:
      operationId: getRHSurvey
      summary: Get survey information
      description: This will get the information shown in the Research Hub for an individual survey.
      tags:
        - Surveys
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/rhSurveyResponse'
    put:
      operationId: updateRHSurvey
      summary: Update survey information
      description: |
        This call is used to update information in the Research Hub tied to a
        survey, and requires either `survey.edit` or `data.edit` permission
        on the survey. Omitted parameters are left unchanged. Returns back the
        new state of the resource.

        Valid categories:

        + empty string (No Selection)
        + `auto` (Automotive)
        + `beauty` (Beauty/Cosmetics)
        + `beverage_alcohol` (Beverages - Alcoholic)
        + `beverage_non_alcohol` (Beverages - Non-alcoholic)
        + `business` (Business)
        + `parenting` (Children & Parenting)
        + `loyalty` (Coalition/Loyalty Programs)
        + `credit_cards` (Credit Cards)
        + `tourism` (Destinations & Tourism)
        + `education` (Education)
        + `computer` (Electronics/Computer/Software)
        + `entertainment` (Entertainment & Leisure)
        + `explicit` (Explicit Content)
        + `clothing_dept_store` (Fashion & Clothing - Department Store)
        + `clothing_other` (Fashion & Clothing - Other )
        + `finance` (Finance, Banking Investing & Insurance)
        + `food` (Food/Snacks)
        + `gambling` (Gambling/Lottery)
        + `politics` (Government & Politics)
        + `healthcare` (Healthcare/Pharmaceuticals)
        + `home_appliances` (Home (Utilities, Appliances))
        + `home_entertainment` (Home Entertainment (DVD, VHS))
        + `home_improvement` (Home Improvement/Real Estate/Construction)
        + `information_tech` (IT (Servers, Databases, etc))
        + `media` (Media & Publishing)
        + `personal_care` (Personal Care/Toiletries)
        + `pets` (Pets)
        + `restaurants` (Restaurants)
        + `sensitive` (Sensitive Content)
        + `smoking` (Smoking/Tobacco)
        + `social` (Social Research)
        + `fitness` (Sports, Recreation, Fitness)
        + `telecom` (Telecommunications (phone, cell phone, cable))
        + `toys` (Toys)
        + `transportation` (Transportation)
        + `travel_airlines` (Travel - Airlines)
        + `travel_hotels` (Travel - Hotels)
        + `travel_services` (Travel Services/Agency/Booking)
        + `video_games` (Video Games)
        + `internet` (Websites/Internet/E-Commerce)
      tags:
        - Surveys
      parameters:
        - name: survey
          description: Path of the survey. `survey.edit` or `data.edit` permission required.
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                description:
                  description: A description for the survey.
                  type: string
                category:
                  description: |
                    A category key. Query `GET /api/v1/rh/surveys/categories` to see
                    all possible options. Empty string is passed to return to the
                    default state of "No Selection".
                  type: string
                keep:
                  description: |
                    if set to `true`, suppress any automated archival of this suvey.
                    Equivalent of issuing the command `touch keep` in the shell.
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                category: food
                description: <p>This survey is about food!</p>
                keep: false
                path: survey/path
  /rh/surveys/{survey}/audit-log:
    get:
      operationId: getRHSurveyAuditLog
      summary: Retrieve a survey's audit log
      description: Retrieve a survey's audit log in batches of 1000 entries per page. To see this log you need at least `admin.partial` permission.
      tags:
        - Surveys
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        user_id:
                          description: ID of the user that triggered the event
                          type: integer
                          example: 1
                        ip:
                          description: IP that triggered the event.
                          type: string
                          example: 172.0.0.0
                        event:
                          description: |
                            Name of the event.
                          type: string
                          example: 'Crosstabs: viewed ''Total Qualified'' report'
                        created_on:
                          description: When the event was triggered.
                          type: string
                          format: ISO 8601 timestamp with timezone
                          example: '2022-12-15T19:53:47Z'
                        type:
                          description: Event type.
                          type: string
                          example: audit.entry
                        id:
                          description: ID of the event.
                          type: integer
                          example: 9999
                        user_email:
                          description: Who triggered the event.
                          type: string
                          example: usermail@forsta.com
                        survey_path:
                          description: Survey related to the event.
                          type: string
                          example: selfserve/53a/220000
                  links:
                    type: object
                    description: |
                      Link to next batch of entries (page).
                    properties:
                      next:
                        description: An object with information about how to get the next page of results.
                        type: object
                        properties:
                          href:
                            description: Request this URL to get the next page of results
                            type: string
                            example: '{server}/api/v1/rh/users/{id}/audit-log?page[size]=2&page[after]=9999'
                          meta:
                            description: Details about the next link
                            type: object
                            properties:
                              page[size]:
                                description: |
                                  If manually constructing the URL for the next page,
                                  this is the parameter that would need to be changed to the
                                  number of entries per page.
                                type: string
                                example: '9999'
                              page[after]:
                                description: |
                                  If manually constructing the URL for the next page,
                                  this is the parameter that would need to be changed to the ID after
                                  which you want to start.
                                type: string
                                example: '9999'
  /rh/companies/{company}/panels:
    get:
      operationId: getRHCompanyPanels
      summary: List company panels
      description: |
        Retrieves all Kinesis Panels accessible to a company.

        Requires access to the company and installation of the Kinesis Panel
        instance's API key.
      tags:
        - Panels
      parameters:
        - $ref: '#/components/parameters/company'
        - name: instance
          description: filter results to just this Kinesis Panel instance/host
          in: query
          required: false
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    instance:
                      type: string
                      description: the url of the Kinesis instance
                    panels:
                      type: array
                      description: the list of panels on that instance
                      items:
                        type: object
                        properties:
                          id:
                            type: string
                            description: the id of the panel
                          name:
                            type: string
                            description: the name of the panel
              example:
                - instance: some.panel.com
                  panels:
                    - id: '1'
                      name: My Little Panel
                    - id: '4'
                      name: My Cool, New Panel
  /rh/companies/{company}/crosstab-report-defaults:
    get:
      operationId: getRHCompanyCrosstabReportDefaults
      summary: Get crosstab preferences
      description: Retrieves company Crosstab Report Preference configuration file.
      tags:
        - Crosstabs
      parameters:
        - name: company
          description: company ID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  singleSelectOneD:
                    type: object
                    description: |
                      Report defaults for single select (radio/select) one
                      dimensional question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                      transpose:
                        type: boolean
                        description: |
                          Sets default choice for transposing of question table.
                      questionTableChartType:
                        type: string
                        description: |
                          Sets defaults choice for chart type.
                        enum:
                          - bar
                          - column
                          - pie
                          - area
                          - line
                  singleSelectMultiD:
                    type: object
                    description: |
                      Report defaults for single select (radio/select)
                      multi-dimensional question.
                    properties:
                      customBase:
                        type: string
                        enum:
                          - answering
                          - shown
                          - segment
                        description: |
                          Sets the default % Base.
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      summary:
                        type: array
                        description: Sets default summary tables.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      showGridTable:
                        type: boolean
                        description: Sets the default choice to display a grid table.
                      showAllTables:
                        type: boolean
                        description: Sets the default choice to display all tables.
                      transpose:
                        type: array
                        description: |
                          Sets defaults choice for transposing of grid, main and
                          stats summary tables.
                        items:
                          type: string
                          enum:
                            - gridTable
                            - rowTable
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      addRowSummaryTable:
                        type: boolean
                        description: |
                          Sets the default choice to add a summary table for newly
                          added rows (nets).
                      chartTypeMapping:
                        type: object
                        description: |
                          Sets charts for grid, main or stat tables. See values of
                          transpose for object key and values of
                          `questionTableChartType` for value mapping.
                  multiSelectOneD:
                    type: object
                    description: |
                      Report defaults for multiselect (checkbox) one dimensional question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base
                        enum:
                          - answering
                          - shown
                          - segment
                          - responses
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - counts
                      transpose:
                        type: boolean
                        description: |
                          Sets defaults choice for transposing of question table.
                      questionTableChartType:
                        type: string
                        description: |
                          Sets defaults choice for chart type.
                        enum:
                          - bar
                          - column
                          - area
                          - line
                  multiSelectMultiD:
                    type: object
                    description: |
                      Report defaults for multi-select (checkbox) two dimensional
                      question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                          - responses
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - counts
                      summary:
                        type: array
                        description: Sets default summary tables.
                        items:
                          type: string
                          enum:
                            - counts
                      showGridTable:
                        type: boolean
                        description: Sets the default choice to display a grid table.
                      showAllTables:
                        type: boolean
                        description: Sets the default choice to display all tables.
                      transpose:
                        type: array
                        description: |
                          Sets defaults choice for transposing of grid, main and
                          stats summary tables.
                        items:
                          type: string
                          enum:
                            - gridTable
                            - rowTable
                            - counts
                      addRowSummaryTable:
                        type: boolean
                        description: |
                          Sets the default choice to add summary table or newly
                          added rows (nets).
                      chartTypeMapping:
                        type: object
                        description: |
                          Sets charts for grid, main or stat tables. See values of
                          transpose for object key and values of
                          `questionTableChartType` for value mapping.
                  numberOneD:
                    type: object
                    description: |
                      Report defaults for one dimensional numeric question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      transpose:
                        type: boolean
                        description: |
                          Sets defaults choice for transposing of question table.
                  numberMultiD:
                    type: object
                    description: |
                      Report defaults for two dimensional numeric question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      summary:
                        type: array
                        description: Sets default summary tables.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      transpose:
                        type: array
                        description: |
                          Sets default choices for transposing of grid, main, and
                          stats summary tables.
                        items:
                          type: string
                          enum:
                            - gridTable
                            - rowTable
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      chartTypeMapping:
                        type: object
                        description: |
                          Sets charts for main or stat tables. See values of
                          transpose for object key and values of
                          questionTableChartType for value mapping.
                  ratingOneD:
                    type: object
                    description: |
                      Report defaults for Rating one dimensional question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      transpose:
                        type: boolean
                        description: |
                          Sets defaults choice for transposing of question table.
                      questionTableChartType:
                        type: string
                        description: Sets default choice for chart type.
                        enum:
                          - bar
                          - column
                          - pie
                          - area
                          - line
                  ratingMultiD:
                    type: object
                    description: |
                      Report defaults for Rating multi-dimensional question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      summary:
                        type: array
                        description: Sets default summary tables.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      showGridTable:
                        type: boolean
                        description: |
                          Sets the default choice to display a grid table.
                      showAllTables:
                        type: boolean
                        description: Sets the default choice to display all tables.
                      addRowSummaryTable:
                        type: boolean
                        description: |
                          Sets the default choice to add summary table for newly
                          added rows (nets).
                      transpose:
                        type: array
                        description: |
                          Sets defaults choice for transposing of question grid,
                          main or stat summary tables.
                        items:
                          type: string
                          enum:
                            - gridTable
                            - rowTable
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      chartTypeMapping:
                        type: object
                        description: |
                          Sets charts for grid, main or stat tables. See values of
                          transpose for object key and values of
                          questionTableChartType for value mapping.
              examples:
                response:
                  value:
                    multiSelectMultiD:
                      addRowSummaryTable: true
                      chartTypeMapping:
                        counts: bar
                        gridTable: column
                        rowTable: line
                      customBase: shown
                      expandable: true
                      showAllTables: true
                      showGridTable: true
                      stats:
                        - counts
                      transpose:
                        - gridTable
                        - counts
                    multiSelectOneD:
                      customBase: shown
                      expandable: true
                      questionTableChartType: column
                      stats:
                        - counts
                      transpose: true
                    numberMultiD:
                      customBase: answering
                      expandable: true
                      stats:
                        - mean
                        - median
                        - stddev
                        - se
                        - sum
                        - min
                        - max
                      summary:
                        - mean
                        - median
                        - stddev
                        - se
                        - sum
                        - min
                        - max
                    numberOneD:
                      customBase: shown
                      expandable: true
                      stats:
                        - mean
                        - median
                        - stddev
                        - se
                        - sum
                        - min
                        - max
                    ratingMultiD:
                      addRowSummaryTable: true
                      customBase: shown
                      expandable: true
                      showAllTables: false
                      showGridTable: true
                      stats:
                        - mean
                    ratingOneD:
                      customBase: shown
                      expandable: true
                      stats:
                        - se
                        - mean
                        - median
                      summary:
                        - se
                        - mean
                        - median
                    singleSelectMultiD:
                      addRowSummaryTable: true
                      customBase: shown
                      expandable: true
                      showAllTables: true
                      showGridTable: true
                      stats:
                        - mean
                    singleSelectOneD:
                      customBase: shown
                      expandable: true
                      stats:
                        - mean
    put:
      operationId: updateRHCompanyCrosstabReportDefaults
      summary: Update crosstab preferences
      description: Update a company Crosstab Reports Preference configuration file. Only parameters being updated need to be included.
      tags:
        - Crosstabs
      parameters:
        - name: company
          description: company ID
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                configs:
                  type: object
                  properties:
                    singleSelectOneD:
                      type: object
                      description: |
                        Report defaults for single select (radio/select) one
                        dimensional question.
                      properties:
                        customBase:
                          type: string
                          description: Sets the default % Base.
                          enum:
                            - answering
                            - shown
                            - segment
                        expandable:
                          type: boolean
                          description: |
                            Sets the default choice for 'Nest Rows Under Nets'.
                        stats:
                          type: array
                          description: Sets default stats.
                          items:
                            type: string
                            enum:
                              - mean
                              - median
                              - stddev
                              - se
                        transpose:
                          type: boolean
                          description: |
                            Sets default choice for transposing of question table.
                        questionTableChartType:
                          type: string
                          description: |
                            Sets defaults choice for chart type.
                          enum:
                            - bar
                            - column
                            - pie
                            - area
                            - line
                    singleSelectMultiD:
                      type: object
                      description: |
                        Report defaults for single select (radio/select)
                        multi-dimensional question.
                      properties:
                        customBase:
                          type: string
                          enum:
                            - answering
                            - shown
                            - segment
                          description: |
                            Sets the default % Base.
                        expandable:
                          type: boolean
                          description: |
                            Sets the default choice for 'Nest Rows Under Nets'
                        stats:
                          type: array
                          description: Sets default stats.
                          items:
                            type: string
                            enum:
                              - mean
                              - median
                              - stddev
                              - se
                              - sum
                              - min
                              - max
                        summary:
                          type: array
                          description: Sets default summary tables.
                          items:
                            type: string
                            enum:
                              - mean
                              - median
                              - stddev
                              - se
                              - sum
                              - min
                              - max
                        showGridTable:
                          type: boolean
                          description: Sets the default choice to display a grid table.
                        showAllTables:
                          type: boolean
                          description: Sets the default choice to display all tables.
                        transpose:
                          type: array
                          description: |
                            Sets defaults choice for transposing of grid, main and
                            stats summary tables.
                          items:
                            type: string
                            enum:
                              - gridTable
                              - rowTable
                              - mean
                              - median
                              - stddev
                              - se
                              - sum
                              - min
                              - max
                        addRowSummaryTable:
                          type: boolean
                          description: |
                            Sets the default choice to add a summary table for newly
                            added rows (nets).
                        chartTypeMapping:
                          type: object
                          description: |
                            Sets charts for grid, main or stat tables. See values of
                            transpose for object key and values of
                            `questionTableChartType` for value mapping.
                    multiSelectOneD:
                      type: object
                      description: |
                        Report defaults for multiselect (checkbox) one dimensional question.
                      properties:
                        customBase:
                          type: string
                          description: Sets the default % Base
                          enum:
                            - answering
                            - shown
                            - segment
                            - responses
                        expandable:
                          type: boolean
                          description: |
                            Sets the default choice for 'Nest Rows Under Nets'.
                        stats:
                          type: array
                          description: Sets default stats.
                          items:
                            type: string
                            enum:
                              - counts
                        transpose:
                          type: boolean
                          description: |
                            Sets defaults choice for transposing of question table.
                        questionTableChartType:
                          type: string
                          description: |
                            Sets defaults choice for chart type.
                          enum:
                            - bar
                            - column
                            - area
                            - line
                    multiSelectMultiD:
                      type: object
                      description: |
                        Report defaults for multi-select (checkbox) two dimensional
                        question.
                      properties:
                        customBase:
                          type: string
                          description: Sets the default % Base.
                          enum:
                            - answering
                            - shown
                            - segment
                            - responses
                        expandable:
                          type: boolean
                          description: |
                            Sets the default choice for 'Nest Rows Under Nets'
                        stats:
                          type: array
                          description: Sets default stats.
                          items:
                            type: string
                            enum:
                              - counts
                        summary:
                          type: array
                          description: Sets default summary tables.
                          items:
                            type: string
                            enum:
                              - counts
                        showGridTable:
                          type: boolean
                          description: Sets the default choice to display a grid table.
                        showAllTables:
                          type: boolean
                          description: Sets the default choice to display all tables.
                        transpose:
                          type: array
                          description: |
                            Sets defaults choice for transposing of grid, main and
                            stats summary tables.
                          items:
                            type: string
                            enum:
                              - gridTable
                              - rowTable
                              - counts
                        addRowSummaryTable:
                          type: boolean
                          description: |
                            Sets the default choice to add summary table or newly
                            added rows (nets).
                        chartTypeMapping:
                          type: object
                          description: |
                            Sets charts for grid, main or stat tables. See values of
                            transpose for object key and values of
                            `questionTableChartType` for value mapping.
                    numberOneD:
                      type: object
                      description: |
                        Report defaults for one dimensional numeric question.
                      properties:
                        customBase:
                          type: string
                          description: Sets the default % Base.
                          enum:
                            - answering
                            - shown
                            - segment
                        expandable:
                          type: boolean
                          description: |
                            Sets the default choice for 'Nest Rows Under Nets'.
                        stats:
                          type: array
                          description: Sets default stats.
                          items:
                            type: string
                            enum:
                              - mean
                              - median
                              - stddev
                              - se
                              - sum
                              - min
                              - max
                        transpose:
                          type: boolean
                          description: |
                            Sets defaults choice for transposing of question table.
                    numberMultiD:
                      type: object
                      description: |
                        Report defaults for two dimensional numeric question.
                      properties:
                        customBase:
                          type: string
                          description: Sets the default % Base.
                          enum:
                            - answering
                            - shown
                            - segment
                        expandable:
                          type: boolean
                          description: |
                            Sets the default choice for 'Nest Rows Under Nets'.
                        stats:
                          type: array
                          description: Sets default stats.
                          items:
                            type: string
                            enum:
                              - mean
                              - median
                              - stddev
                              - se
                              - sum
                              - min
                              - max
                        summary:
                          type: array
                          description: Sets default summary tables.
                          items:
                            type: string
                            enum:
                              - mean
                              - median
                              - stddev
                              - se
                              - sum
                              - min
                              - max
                        transpose:
                          type: array
                          description: |
                            Sets default choices for transposing of grid, main, and
                            stats summary tables.
                          items:
                            type: string
                            enum:
                              - gridTable
                              - rowTable
                              - mean
                              - median
                              - stddev
                              - se
                              - sum
                              - min
                              - max
                        chartTypeMapping:
                          type: object
                          description: |
                            Sets charts for main or stat tables. See values of
                            transpose for object key and values of
                            questionTableChartType for value mapping.
                    ratingOneD:
                      type: object
                      description: |
                        Report defaults for Rating one dimensional question.
                      properties:
                        customBase:
                          type: string
                          description: Sets the default % Base.
                          enum:
                            - answering
                            - shown
                            - segment
                        expandable:
                          type: boolean
                          description: |
                            Sets the default choice for 'Nest Rows Under Nets'.
                        stats:
                          type: array
                          description: Sets default stats.
                          items:
                            type: string
                            enum:
                              - mean
                              - median
                              - stddev
                              - se
                              - sum
                              - min
                              - max
                        transpose:
                          type: boolean
                          description: |
                            Sets defaults choice for transposing of question table.
                        questionTableChartType:
                          type: string
                          description: Sets default choice for chart type.
                          enum:
                            - bar
                            - column
                            - pie
                            - area
                            - line
                    ratingMultiD:
                      type: object
                      description: |
                        Report defaults for Rating multi-dimensional question.
                      properties:
                        customBase:
                          type: string
                          description: Sets the default % Base.
                          enum:
                            - answering
                            - shown
                            - segment
                        expandable:
                          type: boolean
                          description: |
                            Sets the default choice for 'Nest Rows Under Nets'.
                        stats:
                          type: array
                          description: Sets default stats.
                          items:
                            type: string
                            enum:
                              - mean
                              - median
                              - stddev
                              - se
                              - sum
                              - min
                              - max
                        summary:
                          type: array
                          description: Sets default summary tables.
                          items:
                            type: string
                            enum:
                              - mean
                              - median
                              - stddev
                              - se
                              - sum
                              - min
                              - max
                        showGridTable:
                          type: boolean
                          description: |
                            Sets the default choice to display a grid table.
                        showAllTables:
                          type: boolean
                          description: Sets the default choice to display all tables.
                        addRowSummaryTable:
                          type: boolean
                          description: |
                            Sets the default choice to add summary table for newly
                            added rows (nets).
                        transpose:
                          type: array
                          description: |
                            Sets defaults choice for transposing of question grid,
                            main or stat summary tables.
                          items:
                            type: string
                            enum:
                              - gridTable
                              - rowTable
                              - mean
                              - median
                              - stddev
                              - se
                              - sum
                              - min
                              - max
                        chartTypeMapping:
                          type: object
                          description: |
                            Sets charts for grid, main or stat tables. See values of
                            transpose for object key and values of
                            questionTableChartType for value mapping.
              required:
                - configs
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  singleSelectOneD:
                    type: object
                    description: |
                      Report defaults for single select (radio/select) one
                      dimensional question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                      transpose:
                        type: boolean
                        description: |
                          Sets default choice for transposing of question table.
                      questionTableChartType:
                        type: string
                        description: |
                          Sets defaults choice for chart type.
                        enum:
                          - bar
                          - column
                          - pie
                          - area
                          - line
                  singleSelectMultiD:
                    type: object
                    description: |
                      Report defaults for single select (radio/select)
                      multi-dimensional question.
                    properties:
                      customBase:
                        type: string
                        enum:
                          - answering
                          - shown
                          - segment
                        description: |
                          Sets the default % Base.
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      summary:
                        type: array
                        description: Sets default summary tables.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      showGridTable:
                        type: boolean
                        description: Sets the default choice to display a grid table.
                      showAllTables:
                        type: boolean
                        description: Sets the default choice to display all tables.
                      transpose:
                        type: array
                        description: |
                          Sets defaults choice for transposing of grid, main and
                          stats summary tables.
                        items:
                          type: string
                          enum:
                            - gridTable
                            - rowTable
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      addRowSummaryTable:
                        type: boolean
                        description: |
                          Sets the default choice to add a summary table for newly
                          added rows (nets).
                      chartTypeMapping:
                        type: object
                        description: |
                          Sets charts for grid, main or stat tables. See values of
                          transpose for object key and values of
                          `questionTableChartType` for value mapping.
                  multiSelectOneD:
                    type: object
                    description: |
                      Report defaults for multiselect (checkbox) one dimensional question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base
                        enum:
                          - answering
                          - shown
                          - segment
                          - responses
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - counts
                      transpose:
                        type: boolean
                        description: |
                          Sets defaults choice for transposing of question table.
                      questionTableChartType:
                        type: string
                        description: |
                          Sets defaults choice for chart type.
                        enum:
                          - bar
                          - column
                          - area
                          - line
                  multiSelectMultiD:
                    type: object
                    description: |
                      Report defaults for multi-select (checkbox) two dimensional
                      question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                          - responses
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - counts
                      summary:
                        type: array
                        description: Sets default summary tables.
                        items:
                          type: string
                          enum:
                            - counts
                      showGridTable:
                        type: boolean
                        description: Sets the default choice to display a grid table.
                      showAllTables:
                        type: boolean
                        description: Sets the default choice to display all tables.
                      transpose:
                        type: array
                        description: |
                          Sets defaults choice for transposing of grid, main and
                          stats summary tables.
                        items:
                          type: string
                          enum:
                            - gridTable
                            - rowTable
                            - counts
                      addRowSummaryTable:
                        type: boolean
                        description: |
                          Sets the default choice to add summary table or newly
                          added rows (nets).
                      chartTypeMapping:
                        type: object
                        description: |
                          Sets charts for grid, main or stat tables. See values of
                          transpose for object key and values of
                          `questionTableChartType` for value mapping.
                  numberOneD:
                    type: object
                    description: |
                      Report defaults for one dimensional numeric question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      transpose:
                        type: boolean
                        description: |
                          Sets defaults choice for transposing of question table.
                  numberMultiD:
                    type: object
                    description: |
                      Report defaults for two dimensional numeric question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      summary:
                        type: array
                        description: Sets default summary tables.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      transpose:
                        type: array
                        description: |
                          Sets default choices for transposing of grid, main, and
                          stats summary tables.
                        items:
                          type: string
                          enum:
                            - gridTable
                            - rowTable
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      chartTypeMapping:
                        type: object
                        description: |
                          Sets charts for main or stat tables. See values of
                          transpose for object key and values of
                          questionTableChartType for value mapping.
                  ratingOneD:
                    type: object
                    description: |
                      Report defaults for Rating one dimensional question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      transpose:
                        type: boolean
                        description: |
                          Sets defaults choice for transposing of question table.
                      questionTableChartType:
                        type: string
                        description: Sets default choice for chart type.
                        enum:
                          - bar
                          - column
                          - pie
                          - area
                          - line
                  ratingMultiD:
                    type: object
                    description: |
                      Report defaults for Rating multi-dimensional question.
                    properties:
                      customBase:
                        type: string
                        description: Sets the default % Base.
                        enum:
                          - answering
                          - shown
                          - segment
                      expandable:
                        type: boolean
                        description: |
                          Sets the default choice for 'Nest Rows Under Nets'.
                      stats:
                        type: array
                        description: Sets default stats.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      summary:
                        type: array
                        description: Sets default summary tables.
                        items:
                          type: string
                          enum:
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      showGridTable:
                        type: boolean
                        description: |
                          Sets the default choice to display a grid table.
                      showAllTables:
                        type: boolean
                        description: Sets the default choice to display all tables.
                      addRowSummaryTable:
                        type: boolean
                        description: |
                          Sets the default choice to add summary table for newly
                          added rows (nets).
                      transpose:
                        type: array
                        description: |
                          Sets defaults choice for transposing of question grid,
                          main or stat summary tables.
                        items:
                          type: string
                          enum:
                            - gridTable
                            - rowTable
                            - mean
                            - median
                            - stddev
                            - se
                            - sum
                            - min
                            - max
                      chartTypeMapping:
                        type: object
                        description: |
                          Sets charts for grid, main or stat tables. See values of
                          transpose for object key and values of
                          questionTableChartType for value mapping.
              examples:
                response:
                  value:
                    multiSelectMultiD:
                      addRowSummaryTable: true
                      chartTypeMapping:
                        counts: bar
                        gridTable: column
                        rowTable: line
                      customBase: shown
                      expandable: true
                      showAllTables: true
                      showGridTable: true
                      stats:
                        - counts
                      transpose:
                        - gridTable
                        - counts
                    multiSelectOneD:
                      customBase: shown
                      expandable: true
                      questionTableChartType: column
                      stats:
                        - counts
                      transpose: true
                    numberMultiD:
                      customBase: answering
                      expandable: true
                      stats:
                        - mean
                        - median
                        - stddev
                        - se
                        - sum
                        - min
                        - max
                      summary:
                        - mean
                        - median
                        - stddev
                        - se
                        - sum
                        - min
                        - max
                    numberOneD:
                      customBase: shown
                      expandable: true
                      stats:
                        - mean
                        - median
                        - stddev
                        - se
                        - sum
                        - min
                        - max
                    ratingMultiD:
                      addRowSummaryTable: true
                      customBase: shown
                      expandable: true
                      showAllTables: false
                      showGridTable: true
                      stats:
                        - mean
                    ratingOneD:
                      customBase: shown
                      expandable: true
                      stats:
                        - se
                        - mean
                        - median
                      summary:
                        - se
                        - mean
                        - median
                    singleSelectMultiD:
                      addRowSummaryTable: true
                      customBase: shown
                      expandable: true
                      showAllTables: true
                      showGridTable: true
                      stats:
                        - counts
                    singleSelectOneD:
                      customBase: shown
                      expandable: true
                      stats:
                        - mean
  /surveys/{survey}/can-archive:
    get:
      operationId: getSurveyCanArchive
      summary: Check if survey can be archived
      description: ''
      tags:
        - Archives
      parameters:
        - name: survey
          description: |
            survey path to be checked. You must have survey edit permissions.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  can_archive:
                    type: boolean
                    description: Whether the survey can be archived
                  message:
                    type: string
                    description: Exception reason if the survey cannot be archived
  /surveys/{survey}/archive:
    post:
      operationId: createSurveyArchive
      summary: Archive project
      description: ''
      tags:
        - Archives
      parameters:
        - name: survey
          description: |
            survey path to be archived. You must have survey edit permissions.
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                force:
                  description: |
                    Allows archiving projects when the required time before archival
                    has not been met. Live projects or project directories with
                    `keep` flag will not be archived.
                  default: false
                  type: boolean
                subdirectories:
                  description: |
                    Allows archival of project folder and all its sub-directories
                    (surveys).  Ensure these sub-directories are not being accessed
                    by other projects (dashboards or reports) before using this
                    parameter.
                  default: false
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/unarchive:
    post:
      operationId: createSurveyUnarchive
      summary: Un-archive project
      description: Un-archives project to `{survey}` directory.
      tags:
        - Archives
      parameters:
        - name: survey
          description: |
            survey path to be un-archived. You must have survey edit permissions.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /hibernation/status:
    get:
      operationId: getHibernationStatus
      summary: Get hibernation status
      description: |
        Returns the hibernation status of a survey. The status can be one of:
        - `hibernated`: The survey is currently hibernated
        - `restoring`: The survey is being restored from hibernation
        - `restored`: The survey is not hibernated (active)
      tags:
        - Archives
      parameters:
        - name: survey
          description: |
            Survey path to check hibernation status. You must have any permission on the survey.
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - hibernated
                      - restoring
                      - restored
                    description: The current hibernation status of the survey
  /archives/planned:
    get:
      operationId: getArchivesPlanned
      summary: Get planned activities
      description: |
        Returns an array of objects describing what surveys will be automatically
        archived (if enabled) and what archived surveys will have their collected
        data cleared (if enabled). Only projects that would be visible in the portal
        are returned.

        The list is sorted chronologically, with surveys set to be kept forever
        (`date` column blank) last. The `days` attribute is the retention for
        clearing or archiving which can come from server or company configuration.
        `action` is either `archive` for surveys in the system that will move to the
        archive, or `clear` for surveys already archived which will have any
        respondent data stripped at that time.
      tags:
        - Archives
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    date:
                      type: string
                      format: ISO 8601 timestamp with timezone
                      description: date and time when the action will occur
                    action:
                      type: string
                      description: planned action type
                      enum:
                        - archive
                        - clear
                    path:
                      type: string
                      description: the survey path
                    retention:
                      type: integer
                      description: retention days configured for the given action
                    title:
                      type: string
                      description: title of the survey
              example:
                - date: '2021-03-19T23:16:53Z'
                  action: clear
                  path: selfserve/93a/200412
                  retention: 90
                  title: COVID-19 Study
                - date: null
                  action: archive
                  path: selfserve/1fbc/sfc16004
                  retention: 30
                  title: Product Preferences
      x-codeSamples:
        - lang: beacon
          source: |
            beacon get archives/planned
        - lang: curl
          source: |
            curl --location \
              --request GET '{server}/api/v1/archives/planned' \
              --header 'x-apikey: {api_key}'
  /archives:
    delete:
      operationId: deleteArchive
      summary: Purge collected data in archive
      description: |
        Modifies an already archived survey, removing all collected data from
        the archive and re-archiving it. This cannot be undone. Requires staff
        access.
      tags:
        - Archives
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                archived_path:
                  type: string
                  description: path to archived survey
              required:
                - archived_path
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /archives/{company}/deletion:
    get:
      operationId: getArchivesDeletion
      summary: Get archives deletion report
      description: |
        Returns an array of objects describing what archived surveys are in risk to
        be automatically deleted in the next 90 days by default.
        The list is sorted chronologically.
      tags:
        - Archival Reports
      parameters:
        - name: company
          in: path
          description: company ID or `all` to grab all available reports
          example: 123
          required: true
          schema:
            oneOf:
              - type: string
              - type: integer
      requestBody:
        content:
          application/json:
            schema:
              properties:
                limit:
                  description: |
                    Number of days to consider until the deletion of the archived
                    survey.
                  type: integer
                  default: 90
                  example: 100
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    date_of_deletion:
                      type: string
                      format: ISO 8601 timestamp with timezone
                      description: Date and time when the action will occur.
                    risk_level:
                      type: string
                      description: Level of risk to be deleted, it might be `HIGH`, `MEDIUM`, `LOW` or `NO RISK`.
                    title:
                      type: string
                      description: Title of the survey.
                    created_by:
                      type: string
                      description: Email of the person who created the survey.
                    created_on:
                      type: string
                      format: ISO 8601 timestamp with timezone
                      description: Date and time when the action will occur.
                    company_group:
                      type: string
                      description: Supercompany to which the company belongs
                    company_name:
                      type: string
                      description: Company to which the survey belongs.
                    path:
                      type: string
                      description: Path where the survey was before being archived.
                    days_until_deletion:
                      type: integer
                      description: Days until the archived survey is deleted.
                    last_access:
                      type: string
                      format: ISO 8601 timestamp with timezone
                      description: Date and time when the last access to the survey occurred before archiving.
              example:
                - date_of_deletion: '2022-01-03T15:40:36Z'
                  risk_level: HIGH
                  title: Survey 1
                  created_by: developer@decipherinc.com
                  created_on: '2021-11-08T21:52:55Z'
                  company_group: Latam
                  company_name: Company_1
                  path: selfserve/53b/211104
                  days_until_deletion: 30
                  last_access": '2021-01-03T15:40:36Z'
                - date_of_deletion: '2022-11-19T20:13:35Z'
                  risk_level: NO RISK
                  title: Survey 2
                  created_by: developer@decipherinc.com
                  created_on: '2021-11-19T19:42:44Z'
                  company_group: null
                  company_name: Company_2
                  path: selfserve/53c/211101
                  days_until_deletion: 350
                  last_access: '2021-11-19T19:58:17Z'
      x-codeSamples:
        - lang: beacon
          source: |
            beacon get archives/{company}/deletion limit={days_until_deletion}
  /archives/{company}/deletion/data:
    get:
      operationId: getArchivesDataDeletion
      summary: Get participant data deletion report
      description: |
        Returns an array of objects describing what participant data in archived surveys is at risk
        to be automatically deleted in the next 90 days (default).
      tags:
        - Archival Reports
      parameters:
        - name: company
          in: path
          description: company ID or `all` to grab archives from all available companies.
          example: 123
          required: true
          schema:
            oneOf:
              - type: string
              - type: integer
      requestBody:
        content:
          application/json:
            schema:
              properties:
                limit:
                  description: |
                    Number of days to consider until the deletion of particpant data
                    from the archived surveys.
                  type: integer
                  default: 90
                  example: 100
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    company_group:
                      description: Name of the supercompany to which the original survey's company belongs.
                      example: Region Company
                      type: string
                    company_name:
                      description: Name of the company to which the original survey belongs.
                      example: Company 1
                      type: string
                    created_by:
                      description: Email of the user who created the original survey.
                      example: developer@decipherinc.com
                      type: string
                    created_on:
                      description: Date and time when the original survey was created.
                      example: '2022-01-21T00:08:59Z'
                      format: ISO 8601 timestamp with timezone
                      type: string
                    date_of_deletion:
                      description: Date and time when the participant data will be deleted.
                      example: '2022-01-21T00:08:59Z'
                      format: ISO 8601 timestamp with timezone
                      type: string
                    days_until_deletion:
                      description: Days until the participant data is deleted from the archive.
                      example: 11
                      type: integer
                    last_access:
                      description: Date and time when the last access to the original survey occurred before archiving.
                      example: '2021-09-20T16:44:50Z'
                      type: string
                    path:
                      description: Path where the original survey was located before being archived.
                      example: selfserve/53x/123456
                      type: string
                    title:
                      description: Title of the original survey.
                      example: Archived Survey 1
                      type: string
                    risk_level:
                      description: Level of risk of data being deleted. `HIGH` for less than 30 days remaining, `MEDIUM` for less than 60 days remaining, `LOW` for less than 90 days remaining, or `NO RISK` for more than 90 days remaining.
                      example: MEDIUM
                      type: string
  /archives/{company}/deleted:
    get:
      operationId: getArchivesDeleted
      summary: Get archives deleted report
      description: |
        Returns an array of objects describing what archived surveys have been deleted
        in the previous 90 days (default). The list is sorted chronologically.
      tags:
        - Archival Reports
      parameters:
        - name: company
          in: path
          description: Company ID or `all` to grab archives from all available companies.
          example: 123
          required: true
          schema:
            oneOf:
              - type: string
              - type: integer
      requestBody:
        content:
          application/json:
            schema:
              properties:
                limit:
                  description: Number of days to consider since the deletion of the archives.
                  type: integer
                  default: 90
                  example: 120
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    archival_date:
                      description: Date and time in which the original survey was archived.
                      format: ISO 8601 timestamp with timezone
                      example: '2021-12-27T00:10:20Z'
                      type: string
                    company_group:
                      description: Name of the supercompany to which the original survey's company belongs.
                      example: Region Company
                      type: string
                    company_name:
                      description: Name of the company to which the original survey belongs.
                      example: Company 1
                      type: string
                    created_by:
                      description: Name of the user who created the original survey.
                      example: developer
                      type: string
                    created_on:
                      description: Date and time when the original survey was created.
                      example: '2022-01-21T00:08:59Z'
                      format: ISO 8601 timestamp with timezone
                      type: string
                    data_clear_date:
                      description: Date and time when the participant data was removed from the archive.
                      format: ISO 8601 timestamp with timezone
                      example: '2022-01-21T00:44:00Z'
                      type: string
                    days_since_archival:
                      description: Number of days passed since the original survey was archived.
                      example: 30
                      type: integer
                    days_since_data_clear:
                      description: Number of days passed since the participant data was removed from the archive.
                      example: 20
                      type: integer
                    days_since_deletion:
                      description: Number of days passed since the archive was deleted.
                      example: 10
                      type: integer
                    deletion_date:
                      description: Date and time when the archive was deleted.
                      format: ISO 8601 timestamp with timezone
                      example: '2022-01-21T00:48:18Z'
                      type: string
                    last_access:
                      description: Date and time of the last access to the original survey.
                      format: ISO 8601 timestamp with timezone
                      example: '2022-01-21T00:48:18Z'
                      type: string
                    path:
                      description: Path where the original survey was located before being archived.
                      example: selfserve/53x/123456
                      type: string
                    title:
                      description: Title of the original survey.
                      example: Deleted Survey 1
                      type: string
  /archives/{company}/scheduled:
    get:
      operationId: getArchivesScheduled
      summary: Get surveys scheduled to be archived
      description: |
        Returns a list of surveys that are scheduled to be archived within the next
        `limit` days.
      tags:
        - Archival Reports
      parameters:
        - name: company
          in: path
          description: |
            Company name or ID to return surveys scheduled to be archived for the
            given company, or "all" to return all surveys scheduled to be archived.
          example: all
          required: true
          schema:
            type: string
        - name: limit
          in: query
          description: |
            Return only surveys that will be archived within this number of days.
          example: 75
          required: false
          schema:
            type: integer
            default: 90
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    company_group:
                      description: |
                        The name of the supercompany to which the survey's company belongs.
                      example: Amazing Widgets North America
                      type: string
                    company_name:
                      description: |
                        The name of the company to which the survey belongs.
                      example: Amazing Widgets Canada
                      type: string
                    created_by:
                      description: |
                        The email address of the user who created the survey.
                      example: creator@example.com
                      type: string
                    created_on:
                      description: The date and time when the survey was created.
                      example: '2023-08-31T17:20:03Z'
                      type: string
                      format: ISO 8601 timestamp with timezone
                    date_of_archival:
                      description: |
                        The date and time when the survey is scheduled to be archived.
                      example: '2023-11-29T20:39:03Z'
                      type: string
                      format: ISO 8601 timestamp with timezone
                    days_until_archival:
                      description: |
                        The number of days until the survey is scheduled to be archived.
                      example: 33
                      type: integer
                    last_access:
                      description: The date and time when the survey was last accessed.
                      example: '2023-10-25T20:39:03Z'
                      type: string
                      format: ISO 8601 timestamp with timezone
                    path:
                      description: The survey path.
                      example: selfserve/60e/230800
                      type: string
                    risk_level:
                      description: |
                        A categorization of the risk level based on days_until_archival.
                      example: MEDIUM
                      type: string
                      enum:
                        - LOW
                        - MEDIUM
                        - HIGH
                        - NO RISK
                    title:
                      description: The survey title.
                      example: How Great are these Widgets
                      type: string
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error.
                    type: string
                    example: You cannot manage this company (1)
                  $code:
                    description: The HTTP error code.
                    type: integer
                    example: 403
                  extra:
                    description: Extra information about the error.
                    type: string
                    example: null
        '404':
          description: Company not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error.
                    type: string
                    example: Cannot find company specified by argument company
                  $code:
                    description: The HTTP error code.
                    type: integer
                    example: 404
                  extra:
                    description: Extra information about the error.
                    type: string
                    example: null
  /rh/apikeys:
    get:
      operationId: getHRApiKeys
      summary: List API Keys
      description: |
        What API keys have been created?

        A supervisor user will be able to see all API keys for his company. A
        staff user will be able to see all global API keys. Other user types
        will see only their own keys.
      tags:
        - API Keys
      parameters:
        - name: company
          description: Restrict array of keys keyed to users in this company ID
          in: query
          required: false
          schema:
            type: string
        - name: user
          description: |
            Restrict array of keys to only this specific user. A user can be
            specified as a numeric ID, email address or shared user name. The
            special name "self" references to the owner of the API key.
          in: query
          required: false
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    restrictions:
                      type: object
                    user_id:
                      type: integer
                    calls:
                      type: integer
                    user_fullname:
                      type: string
                    created_on:
                      type: string
                      format: ISO 8601 timestamp with timezone
                    key:
                      type: string
                    active:
                      type: boolean
                    resource:
                      type: integer
                    user_name:
                      type: string
                    user_email:
                      type: string
                      format: email address
                    user_account_active:
                      type: boolean
              example:
                restrictions: {}
                user_id: 1
                calls: 0
                user_fullname: Developer
                created_on: '2021-01-13T01:36:44Z'
                key: jw2qgdbjt7xv66bjrvnpg9540kynjbsp
                active: true
                resource: 0
                user_name: developer
                user_email: developer@decipherinc.com
                user_account_active: true
    post:
      operationId: createRHApiKey
      summary: Create API key
      description: Add a new API key.
      tags:
        - API Keys
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  description: |
                    user account that will be used when doing API calls with this
                    key. Specific a numeric user ID, email address, shared user name
                    or "self" for your own account
                  type: string
                restrictions:
                  description: security restrictions for how the new key can be used
                  type: string
              required:
                - user
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  restrictions:
                    type: object
                  user_id:
                    type: integer
                  calls:
                    type: integer
                  combined_key:
                    type: string
                  user_fullname:
                    type: string
                  created_on:
                    type: string
                  secret:
                    type: string
                  key:
                    type: string
                  active:
                    type: boolean
                  resource:
                    type: integer
                  user_name:
                    type: string
                  user_email:
                    type: string
                  user_account_active:
                    type: boolean
              example:
                restrictions: {}
                user_id: 1
                calls: 0
                combined_key: mdb0z0kzaquhh38da0bw2vv2efw74jqsjf1benyfftbjy5b2c9kg0b2r73tnzv27
                user_fullname: ''
                created_on: '2021-01-13T00:24:55Z'
                secret: jf1benyfftbjy5b2c9kg0b2r73tnzv27
                key: mdb0z0kzaquhh38da0bw2vv2efw74jqs
                active: true
                resource: 0
                user_name: developer
                user_email: developer@decipherinc.com
                user_account_active: true
  /rh/apikeys/{apikey}:
    post:
      operationId: rekeyRHApiKey
      summary: Rekey
      description: |
        This allows for re-generation of the secret part of the API key while
        retaining restrictions and API key usage history.

        **Python library NOTE**: As a convenience, the Python library allows you to
        run `api.rekey()` to call this function and immediately update the
        configuration file with the new key. You can also run `beacon rekey` from the
        command line to do the same.
      tags:
        - API Keys
      parameters:
        - name: apikey
          description: The API key to manipulate
          in: path
          required: true
          schema:
            type: string
          example: jw2qgdbjt7xv66bjrvnpg9540kynjbsp
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  restrictions:
                    type: object
                  user_id:
                    type: integer
                  calls:
                    type: integer
                  combined_key:
                    type: string
                  user_fullname:
                    type: string
                  created_on:
                    type: string
                  secret:
                    type: string
                  key:
                    type: string
                  active:
                    type: boolean
                  resource:
                    type: integer
                  user_name:
                    type: string
                  user_email:
                    type: string
                  user_account_active:
                    type: boolean
              example:
                restrictions: {}
                user_id: 1
                calls: 0
                combined_key: jw2qgdbjt7xv66bjrvnpg9540kynjbspm3e9de92j31ud1qzdqaqyvnqsea0x212
                user_fullname: ''
                created_on: '2021-01-13T00:24:55Z'
                secret: m3e9de92j31ud1qzdqaqyvnqsea0x212
                key: jw2qgdbjt7xv66bjrvnpg9540kynjbsp
                active: true
                resource: 0
                user_name: developer
                user_email: developer@decipherinc.com
                user_account_active: true
    get:
      operationId: getRHApiKey
      summary: Get
      description: Retrieve information about a single API key.
      tags:
        - API Keys
      parameters:
        - name: apikey
          description: The API key to manipulate
          in: path
          required: true
          schema:
            type: string
          example: mdb0z0kzaquhh38da0bw2vv2efw74jqs
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  restrictions:
                    type: object
                  user_id:
                    type: integer
                  calls:
                    type: integer
                  user_fullname:
                    type: string
                  created_on:
                    type: string
                  key:
                    type: string
                  active:
                    type: boolean
                  resource:
                    type: integer
                  user_name:
                    type: string
                  user_email:
                    type: string
                  user_account_active:
                    type: boolean
              example:
                restrictions: {}
                user_id: 1
                calls: 0
                user_fullname: ''
                created_on: '2021-01-13T00:24:55Z'
                key: mdb0z0kzaquhh38da0bw2vv2efw74jqs
                active: true
                resource: 0
                user_name: developer
                user_email: developer@decipherinc.com
                user_account_active: true
    put:
      operationId: updateRHApiKey
      summary: Update
      description: |
        Change an API key's restrictions. In the request body, specify an object
        with "restrictions" being the only valid key. The value of restrictions
        must follow the key restriction specification.
      tags:
        - API Keys
      parameters:
        - name: apikey
          description: The API key to manipulate
          in: path
          required: true
          schema:
            type: string
          example: jw2qgdbjt7xv66bjrvnpg9540kynjbsp
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                restrictions:
                  type: string
                  description: |
                    updated restrictions for this key; set to `{}` for no restrictions
              required:
                - restrictions
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  restrictions:
                    type: object
                  user_id:
                    type: integer
                  calls:
                    type: integer
                  user_fullname:
                    type: string
                  created_on:
                    type: string
                  key:
                    type: string
                  active:
                    type: boolean
                  resource:
                    type: integer
                  user_name:
                    type: string
                  user_email:
                    type: string
                  user_account_active:
                    type: boolean
              example:
                restrictions: {}
                user_id: 1
                calls: 0
                user_fullname: ''
                created_on: '2021-01-13T00:24:55Z'
                key: jw2qgdbjt7xv66bjrvnpg9540kynjbsp
                active: true
                resource: 0
                user_name: developer
                user_email: developer@decipherinc.com
                user_account_active: true
    delete:
      operationId: deleteRHApiKey
      summary: Retire
      description: |
        Deactivate an API key. Keys that were created and never used are deleted;
        others are marked as inactive for audit purposes. The `deleted` value in the
        response will tell you whether the key was completely erased or just
        inactivated.
      tags:
        - API Keys
      parameters:
        - name: apikey
          description: The API key to manipulate
          in: path
          required: true
          schema:
            type: string
          example: mdb0z0kzaquhh38da0bw2vv2efw74jqs
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  deleted:
                    type: boolean
                    description: |
                      true if the key was deleted, false if it was marked as inactive
  /rh/usage:
    get:
      operationId: getRHUsage
      summary: Calculate usage
      description: |
        Outputs data generated by the usage page, combined with a breakdown of
        qualifieds by device type. Note that this data is only accessible 24-48 hours
        after: yesterday's participant data is converted at 10pm (Beacon Cloud) or 1am
        (Ares).
      tags:
        - Usage
      parameters:
        - name: start
          description: start date
          in: query
          required: true
          schema:
            type: string
        - name: end
          description: end date
          in: query
          required: true
          schema:
            type: string
        - name: company
          description: restrict only to this company's stats
          in: query
          required: false
          schema:
            type: string
        - name: excludeDecipher
          description: exclude Decipher-launched projects
          in: query
          required: false
          schema:
            type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  qualified_devices:
                    type: object
                    description: qualifieds by device
                    properties:
                      .:
                        type: integer
                        description: desktop
                      f:
                        type: integer
                        description: featurephone
                      s:
                        type: integer
                        description: smartphone
                      m:
                        type: integer
                        description: misc mobile device
                      t:
                        type: integer
                        description: tablet
                  clickthrough_devices:
                    type: object
                    description: clickthroughs by device
                    properties:
                      .:
                        type: integer
                        description: desktop
                      f:
                        type: integer
                        description: featurephone
                      s:
                        type: integer
                        description: smartphone
                      m:
                        type: integer
                        description: misc mobile device
                      t:
                        type: integer
                        description: tablet
                  users:
                    type: integer
                    description: distinct active users
                  surveys:
                    type: integer
                    description: distinct active live surveys
                  clickthrough:
                    type: integer
                    description: total clickthroughts in live surveys
                  qualifiedCompletes:
                    type: integer
                    description: total qualifiedss
                  surveyPaths:
                    type: array
                    description: |
                      survey paths involved in the active live surveys calculation
                    items:
                      type: string
                  overquota:
                    type: integer
                    description: total overquota
                  terminated:
                    type: integer
                    description: total terminated
                  emailSends:
                    type: integer
                    description: number of emails sent
                  emailCampaigns:
                    type: integer
                    description: number of email campaigns
                  spamComplaints:
                    type: integer
                    description: numer of spam complaints
                  spamRate:
                    type: integer
                    description: spam rate
                  launchedSurveys:
                    type: integer
                    description: number of launched surveys
                  event_*:
                    type: integer
                    description: |
                      detailed usage stats (reports run, dashboards created, etc)
                  hubStorage:
                    type: integer
                    description: hub storage
                  importedCompletes:
                    type: integer
                    description: number of imported completes
                  cleanedData:
                    type: integer
                  publishedDashboards:
                    type: integer
                    description: number of published dashboards
  /rh/warnings/summary:
    get:
      operationId: getRHWarningsSummary
      summary: Get warnings summary
      description: |-
        Retrieve summaries of project warnings for companies' projects. Returns an array of objects for each project.
        Events are summarized as counts occurring during the period specified. Only events experienced by non-users (i.e., logged-out participants) in non-testing surveys are reported. Best efforts are made to eliminate duplicate events from the results.
      tags:
        - Warnings Summary
      parameters:
        - name: companies
          description: |
            restrict projects to just those owned by companies with these IDs
          in: query
          required: false
          schema:
            type: array
            items:
              type: integer
        - name: state
          description: restrict projects to just those with this state
          in: query
          required: false
          schema:
            default: any
            type: string
            enum:
              - live
              - closed
              - any
        - name: start
          description: restrict warnings counts to include only those occurring on/after this date (in ISO 8601 format)
          in: query
          required: false
          schema:
            type: string
            format: YYYY-MM-DD
        - name: end
          description: restrict warnings counts to include only those occurring on/before this date
          in: query
          required: false
          schema:
            type: string
            format: YYYY-MM-DD
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                      description: project name
                    path:
                      type: string
                      description: project path
                    company:
                      type: integer
                      description: company id
                    lastEditBy:
                      type: string
                      description: the user who last edited this survey
                    blocks:
                      type: integer
                      description: |
                        occurences of participants being blocked from enter the survey
                        for various reasons
                    missing_resources:
                      type: integer
                      description: |
                        occurences of a nonexistent static resource (e.g. image or
                        script) being requested by the survey
                    exceptions:
                      type: integer
                      description: fatal errors experienced by participants
                    quota_misses:
                      type: integer
                      description: |
                        occurrences of a participant failing to qualify for a quota
                        table
  /surveys/{survey}/crosstabs/configuration:
    get:
      operationId: getSurveyCrosstabsConfiguration
      summary: Get crosstabs configuration
      description: |
        Retrieves segments and globally available weighting variables configured
        for a survey.
      tags:
        - Crosstabs Configuration
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
              example:
                banners: []
                weight: []
  /surveys/{survey}/crosstabs/execute:
    post:
      operationId: createSurveyCrosstabsExecute
      summary: Execute crosstabs
      description: |
        Allows you to execute a crosstabs run with custom segments and filters. This
        is exactly the same interface that the crosstabs user interface uses to get
        the data to display the tables.

        The normal output is fairly complex: you may also request very
        simplified format by passing `simplified` set to `true`.

        If you specify `simplified` = true, the output is vastly simplified. It will
        be an object with one property by table label, for example `q1$r1`. The value
        is an array of the rows displayed: the first element is the row's title and
        the next N*2 elements are the percentage or stat value and count, one per
        segment.
      tags:
        - Crosstabs Execution
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                simplified:
                  description: Generate vastly simplified output rather than the full
                  default: false
                  type: boolean
                segments:
                  description: |
                    An array of segment objects to split all the tables by. Each
                    segment object should contain the properties `title`, `cond` and
                    may optionally contain `sg` to create custom stat test groups. If
                    you do not specify a `title`, one is attempted derived from
                    `cond` (this is possible only for simple conditions like
                    "q1.r1"). An optional `weight` will override any global weight: it 
                    should be a condition resolving to a numeric variable like `nweight.val`.
                  default:
                    - title: All
                      cond: ALL
                  type: array
                  items:
                    type: object
                    properties:
                      title:
                        type: string
                      cond:
                        type: string
                      sg:
                        type: string
                      weight:
                        type: string
                    required:
                      - title
                      - cond
                filters:
                  description: |
                    An array of Python conditions to apply. These filter conditions
                    are applied before any segments.
                  default:
                    - qualified
                  type: array
                  items:
                    type: string
                base:
                  description: |-
                    How should percentages be calculated?

                    + `answering`: percentages are based on those answering the
                      question.
                    + `segment`: the total in the segment is used.
                    + `shown`: percentages shown but not necessarily answering the
                      question.
                    + `variable`: percentage shown for the variable (for checkbox
                      variables only; you must have `trackVars="checkbox"` configured)
                  default: answering
                  type: string
                  enum:
                    - answering
                    - segment
                    - shown
                    - variable
                tables:
                  description: Show only tables with these table labels.
                  type: array
                  items:
                    type: string
                aggregates:
                  description: |
                    Show output matching report grid tables. If set to `false`,
                    question tables are not aggregated and a separate table is shown
                    for each data variable. Not Applicable for saved reports.
                  default: true
                  type: boolean
                weight:
                  description: |
                    Apply weights to all calculations. Specify a condition which will
                    resolve to a weight, such as `nweight.val` for an uploaded weight schema.
                    Segments may override the global weight.
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  segments:
                    type: array
                    description: An array of the segment objects you requested.
                    items:
                      type: object
                      properties:
                        count:
                          type: integer
                          description: Count of participants matching the segment.
                        abbr:
                          type: string
                          description: Label used for stat testing.
                        sg:
                          type: string
                          description: |
                            If is set and not null, this segment was stat tested
                            against only other segments within the same `sg` value.
                        cond:
                          type: string
                          description: |
                            Segment condition (Python expression, e.g. "ALL" or
                            "q1.r1")
                        title:
                          type: string
                          description: Segment's title.
                  objects:
                    type: array
                    description: An array of the table data.
                    items:
                      type: object
                      properties:
                        label:
                          type: string
                          description: |
                            The table label. This uniquely identifies a table. The
                            table label consists of the question's system label (i.e.
                            label as specified in the XML file, and not through e.g.
                            variables.xls or data export customization), a $ sign then
                            a sub-label.  For example, if question q1 has only one
                            table it will be labelled `q1$`. Multiple tables might be
                            labelled `q1$r1` and `q1$mean` (for Mean Summary table).
                        qlabel:
                          type: string
                          description: The label of the underlying question.
                        title:
                          type: string
                          description: |
                            The main title of this table. This will be the question's
                            title.
                        subtitle:
                          type: string
                          description: |
                            When a question has multiple tables, each will have a
                            different subtitle. May be null if no subtitle.
                        rows:
                          description: |
                            An array of objects defining the table row structures.
                          type: array
                          items:
                            type: object
                            properties:
                              obj:
                                type: string
                                description: |
                                  The underlying object for the row (e.g. "q1,c1" would
                                  mean the row was created from the definition of
                                  column "c1" within question "q1").
                              title:
                                type: string
                                description: |
                                  The reporting title to be displayed for the row (the
                                  reporting title starts out as what is specified in
                                  the survey.xml with HTML etc. stripped; it can be
                                  customized in the report).
                              label:
                                type: string
                                description: |
                                  The row label. This is typically the label of the
                                  underlying row or column, e.g. "c1".
                              cond:
                                type: string
                                description: |
                                  The Python logic condition that was used to generate
                                  the data for the table row.
                              dv:
                                type: integer
                                description: |
                                  The data value used for statistical calculation (e.g.
                                  if showing a rating question table with 5 rows, the
                                  data values might span from 5 to 1 or 1 to 5
                                  depending on whether the scale is ascending or
                                  descending).
                              intent:
                                type: string
                                enum:
                                  - total
                                  - data
                                  - numnet
                                  - net
                                  - stat
                                description: |
                                  Set to `total` for the total row, `data` for ordinary
                                  data rows showing a percentage, `numnet` for numeric
                                  nets, `net` for normal nets and `stat` for statistic
                                  rows.
                              stat:
                                type: string
                                enum:
                                  - counts
                                  - mean
                                  - stddev
                                  - median
                                  - se
                                  - sum
                                description: |
                                  If intent="stat", this describes what stat is being
                                  shown in this row. One of `counts` (checkbox count),
                                  `mean`, `stddev`, `median`, `se` (Standard Error) or
                                  `sum`.
                              qa:
                                type: array
                                items:
                                  type: string
                                description: |
                                  optional property: If it exists it's an array of QA
                                  codes specific to the underlying survey row or
                                  column.
                              pct:
                                type: string
                                description: |
                                  Hint on how to display percentages. If `null` then
                                  percentages should not be disabled for this table
                                  row. This value is set on rows that are not included
                                  in the total base (I.e. "Refuse to Answer") which in
                                  the survey.xml are configured as `aggregates="0"`.
                        data:
                          type: array
                          items:
                            type: array
                            items:
                              type: array
                              items:
                                type: number
                          description: |
                            The `data` array contains one entry per item in the `rows`.
                            Each entry in data is another array, containing one item
                            per segment in this table. That final item is an array
                            again with two possible layouts. If the row's `intent` is
                            `stat` then this is a statistical row with 3 items:

                            * `0` the stat value (mean, median etc. depending on the
                              `stat` property of the matching row)
                            * `1` the count of items matching the condition
                            * `2` stat testing data (see below).

                            If `intent` is set to anything but `stat` the row is a
                            percentage row, i.e. displaying a count and percentages.
                            It will have 5 items:

                            * `0` vertical percentage, relative to the effective base
                              for this row. This percentage is emitted with 6 digits
                              of precision
                            * `1` weighted count (rounded to nearest number)
                            * `2` unweighted count. This will be the same as item #1
                              unless weighting was applied
                            * `3` effective base. This is used for stat testing
                              calculations and will be slightly different from normal
                              base if weighting was used.
                            * `4` stat testing data. Either `null` or an array
                              containing references to other columns where a stat test
                              was successful. The reference is either the upper or
                              lower-case variant of the row's `abbr` property.

                            If you specify `simplified` = true, the output is vastly
                            simplified. It will be an object with one property by table
                            label, for example `q1$r1`. The value is an array of the
                            rows displayed: the first element is the row's title and
                            the next N*2 elements are the percentage or stat value and
                            count, one per segment.
                        qtype:
                          type: string
                          description: |
                            Question type of the underlying question (corresponds to
                            the lower-case XML tag, e.g. "radio").
                        segments:
                          description: |
                            Segments that were applied to this particular table. When
                            using pinned reports, tables display may have non-uniform
                            segments.
                          type: array
                          items:
                            type: object
                            properties:
                              title:
                                type: string
                                description: Segment's title.
                              cond:
                                type: string
                                description: |
                                  Segment condition (Python expression ,e.g. "ALL" or
                                  "q1.r1").
                              sg:
                                type: string
                                description: |
                                  If is set and not null, this segment was stat
                                  tested against only other segments within the same
                                  `sg` value.
                        qa:
                          type: array
                          items:
                            type: array
                            minItems: 2
                            maxItems: 2
                            items:
                              type: string
                          description: |
                            An array of QA codes for the underlying question. Each
                            array element is a 2-element array of the QA code
                            (e.g. "SHF\(r\)") and the human readable explanation
                            (e.g. "Rows are shuffled")
                        intent:
                          type: string
                          description: |
                            This is `null` for all tables except net summaries, where
                            it's `summary`
                        obj:
                          type: string
                          description: |
                            The XML object that is the primary object driving this
                            table.  For a question that generates a single table, this
                            will be e.g. "q1".  For question that consists of multiple
                            tables (e.g. 2D radio grouped by rows), "q1,r1" .. "q1,r5".
                        tableType:
                          type: string
                          enum:
                            - simple
                            - numeric
                            - net
                            - stat
                          description: |
                            Set to `simple` (table contains percentages), `numeric`
                            (table contains stats such as mean), `net`" (additional
                            table  created for variable nets) or `stat` (summary table
                            for stats).
                  dlident:
                    type: string
                    description: |
                      The "DownLoad IDENT" value can be used to create a direct link
                      to a report run or to download data matching the report
                      segments.
  /surveys/{survey}/crosstabs/nets:
    put:
      operationId: updateSurveyCrosstabsNets
      summary: Create or update nets
      description: |
        Create or overwrite all nets on a table, or update the nest setting on
        existing nets.
      tags:
        - Crosstabs Nets
      parameters:
        - name: survey
          description: survey path to run crosstabs in
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                tables:
                  description: an array of the tables and their updated nets.
                  type: array
                  items:
                    type: object
                    properties:
                      table:
                        type: string
                        description: The label of the target question
                      nest:
                        type: boolean
                        description: |
                          When set to `true` the net rows will appear nested under the
                          nets in the crosstab tables
                      nets:
                        description: An array of the new nets.
                        type: array
                        items:
                          type: object
                          properties:
                            label:
                              type: string
                              description: |
                                A label used to identify a net so that it may be included
                                in the `items` of another net
                            summary:
                              type: boolean
                              description: |
                                Adds a summary table for the net (multidimensional
                                questions only)
                            title:
                              type: string
                              description: |
                                The title to be shown in the crosstabs table for the net
                            items:
                              description: |
                                An array of the question's row labels to be included in
                                this net
                              type: array
                              items:
                                type: string
                            op:
                              type: string
                              enum:
                                - or
                                - and
                                - count
                                - mean
                                - median
                                - max
                                - min
                                - sum
                                - se
                                - stddev
                              description: |
                                The operation of the net. May be one of the following:

                                + `or` -- generates an "OR" net
                                + `and` -- generates an "AND" net
                                + `count` -- generates a "Count" net
                                + `mean` -- generates a "Mean" net
                                + `median` -- generate a "Median" net
                                + `max` -- generate a "Maximum" net
                                + `min` -- generate a "Minimum" net
                                + `sum` -- generate a "Sum" net
                                + `se` -- generate a "Standard Error" net
                                + `stddev` -- generate a "Standard Deviation" net
                          required:
                            - title
                            - items
                            - op
                    required:
                      - table
              required:
                - tables
            examples:
              New nets:
                description: |
                  Providing a nets key in the table will trigger an overwrite of all
                  existing nets in the table.
                value:
                  tables:
                    - table: q1
                      nest: true
                      nets:
                        - title: 1 or 2
                          op: or
                          items:
                            - r1
                            - r2
                          summary: false
                        - title: 3 or 4
                          op: and
                          items:
                            - r3
                            - r4
              Nested nets:
                description: |
                  A nested net requires defining a sub net first with a unique `label`
                  added in `items` in a parent net.
                value:
                  tables:
                    - table: q1
                      nest: true
                      nets:
                        - label: subnet
                          title: subnet for 1 or 2
                          op: or
                          items:
                            - r1
                            - r2
                        - title: parent net
                          op: or
                          items:
                            - subnet
                            - r3
              Toggle nesting:
                description: |
                  To update only the 'Nest Rows under Nets' setting without overwriting
                  existing nets.
                value:
                  tables:
                    - table: q1
                      nest: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/crosstabs/saved:
    get:
      operationId: getSurveyCrosstabsSaved
      summary: List saved reports
      tags:
        - Saved Crosstabs
      description: |
        Lists "saved reports" and "saved crosstabs" created on a survey.
      parameters:
        - name: survey
          description: the survey to list saved reports for
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      description: the unique ID of the report; use it to execute it
                      type: string
                    title:
                      description: the title
                      type: string
                    description:
                      description: the full description
                      type: string
                    visibility:
                      description: |
                        (deprecated) one of `public` (anyone -- even without login --
                        can view), `protected` (only owner can edit), or `shared`
                        (anyone with survey access can edit)
                      type: string
                      enum:
                        - public
                        - protected
                        - shared
                    access:
                      description: one of `public` (anyone -- even without login -- can view), `private` (only owner can view/edit), or `readonly` (anyone with survey access can view)
                      type: string
                      enum:
                        - public
                        - private
                        - readonly
                    updated_on:
                      description: when this report was last changed
                      type: string
                      format: datetime
                    created_on:
                      description: when this report was created
                      type: string
                      format: datetime
                    updated_by:
                      description: id of user who modified this report last
                      type: integer
                    tmp:
                      description: indicates if this report has been saved
                      type: boolean
  /surveys/{survey}/crosstabs/saved/{saved}/execute:
    post:
      operationId: createSurveyCrosstabsSavedExecute
      summary: Execute saved report
      description: |
        This runs the saved report/crosstab, outputting the same format as an
        ordinary crosstab.
      tags:
        - Saved Crosstabs
      parameters:
        - name: survey
          description: survey path to run crosstabs in
          in: path
          required: true
          schema:
            type: string
        - name: saved
          description: the 12 or 16 character report ID
          example: 1h7c1s5znuk1
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                simplified:
                  description: Generate vastly simplified output rather than the full.
                  default: false
                  type: boolean
                aggregates:
                  description: |
                    Show output matching report grid tables. If set to `false`,
                    question tables are not aggregated and a separate table is shown
                    for each data variable. Not Applicable for saved reports.
                  default: true
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  segments:
                    type: array
                    description: An array of the segment objects you requested.
                    items:
                      type: object
                      properties:
                        count:
                          type: integer
                          description: Count of participants matching the segment.
                        abbr:
                          type: string
                          description: Label used for stat testing.
                        sg:
                          type: string
                          description: |
                            If is set and not null, this segment was stat tested
                            against only other segments within the same `sg` value.
                        cond:
                          type: string
                          description: |
                            Segment condition (Python expression, e.g. "ALL" or
                            "q1.r1")
                        title:
                          type: string
                          description: Segment's title.
                  objects:
                    type: array
                    description: An array of the table data.
                    items:
                      type: object
                      properties:
                        label:
                          type: string
                          description: |
                            The table label. This uniquely identifies a table. The
                            table label consists of the question's system label (i.e.
                            label as specified in the XML file, and not through e.g.
                            variables.xls or data export customization), a $ sign then
                            a sub-label.  For example, if question q1 has only one
                            table it will be labelled `q1$`. Multiple tables might be
                            labelled `q1$r1` and `q1$mean` (for Mean Summary table).
                        qlabel:
                          type: string
                          description: The label of the underlying question.
                        title:
                          type: string
                          description: |
                            The main title of this table. This will be the question's
                            title.
                        subtitle:
                          type: string
                          description: |
                            When a question has multiple tables, each will have a
                            different subtitle. May be null if no subtitle.
                        rows:
                          description: |
                            An array of objects defining the table row structures.
                          type: array
                          items:
                            type: object
                            properties:
                              obj:
                                type: string
                                description: |
                                  The underlying object for the row (e.g. "q1,c1" would
                                  mean the row was created from the definition of
                                  column "c1" within question "q1").
                              title:
                                type: string
                                description: |
                                  The reporting title to be displayed for the row (the
                                  reporting title starts out as what is specified in
                                  the survey.xml with HTML etc. stripped; it can be
                                  customized in the report).
                              label:
                                type: string
                                description: |
                                  The row label. This is typically the label of the
                                  underlying row or column, e.g. "c1".
                              cond:
                                type: string
                                description: |
                                  The Python logic condition that was used to generate
                                  the data for the table row.
                              dv:
                                type: integer
                                description: |
                                  The data value used for statistical calculation (e.g.
                                  if showing a rating question table with 5 rows, the
                                  data values might span from 5 to 1 or 1 to 5
                                  depending on whether the scale is ascending or
                                  descending).
                              intent:
                                type: string
                                enum:
                                  - total
                                  - data
                                  - numnet
                                  - net
                                  - stat
                                description: |
                                  Set to `total` for the total row, `data` for ordinary
                                  data rows showing a percentage, `numnet` for numeric
                                  nets, `net` for normal nets and `stat` for statistic
                                  rows.
                              stat:
                                type: string
                                enum:
                                  - counts
                                  - mean
                                  - stddev
                                  - median
                                  - se
                                  - sum
                                description: |
                                  If intent="stat", this describes what stat is being
                                  shown in this row. One of `counts` (checkbox count),
                                  `mean`, `stddev`, `median`, `se` (Standard Error) or
                                  `sum`.
                              qa:
                                type: array
                                items:
                                  type: string
                                description: |
                                  optional property: If it exists it's an array of QA
                                  codes specific to the underlying survey row or
                                  column.
                              pct:
                                type: string
                                description: |
                                  Hint on how to display percentages. If `null` then
                                  percentages should not be disabled for this table
                                  row. This value is set on rows that are not included
                                  in the total base (I.e. "Refuse to Answer") which in
                                  the survey.xml are configured as `aggregates="0"`.
                        data:
                          type: array
                          items:
                            type: array
                            items:
                              type: array
                              items:
                                type: number
                          description: |
                            The `data` array contains one entry per item in the `rows`.
                            Each entry in data is another array, containing one item
                            per segment in this table. That final item is an array
                            again with two possible layouts. If the row's `intent` is
                            `stat` then this is a statistical row with 3 items:

                            * `0` the stat value (mean, median etc. depending on the
                              `stat` property of the matching row)
                            * `1` the count of items matching the condition
                            * `2` stat testing data (see below).

                            If `intent` is set to anything but `stat` the row is a
                            percentage row, i.e. displaying a count and percentages.
                            It will have 5 items:

                            * `0` vertical percentage, relative to the effective base
                              for this row. This percentage is emitted with 6 digits
                              of precision
                            * `1` weighted count (rounded to nearest number)
                            * `2` unweighted count. This will be the same as item #1
                              unless weighting was applied
                            * `3` effective base. This is used for stat testing
                              calculations and will be slightly different from normal
                              base if weighting was used.
                            * `4` stat testing data. Either `null` or an array
                              containing references to other columns where a stat test
                              was successful. The reference is either the upper or
                              lower-case variant of the row's `abbr` property.

                            If you specify `simplified` = true, the output is vastly
                            simplified. It will be an object with one property by table
                            label, for example `q1$r1`. The value is an array of the
                            rows displayed: the first element is the row's title and
                            the next N*2 elements are the percentage or stat value and
                            count, one per segment.
                        qtype:
                          type: string
                          description: |
                            Question type of the underlying question (corresponds to
                            the lower-case XML tag, e.g. "radio").
                        segments:
                          description: |
                            Segments that were applied to this particular table. When
                            using pinned reports, tables display may have non-uniform
                            segments.
                          type: array
                          items:
                            type: object
                            properties:
                              title:
                                type: string
                                description: Segment's title.
                              cond:
                                type: string
                                description: |
                                  Segment condition (Python expression ,e.g. "ALL" or
                                  "q1.r1").
                              sg:
                                type: string
                                description: |
                                  If is set and not null, this segment was stat
                                  tested against only other segments within the same
                                  `sg` value.
                        qa:
                          type: array
                          items:
                            type: array
                            minItems: 2
                            maxItems: 2
                            items:
                              type: string
                          description: |
                            An array of QA codes for the underlying question. Each
                            array element is a 2-element array of the QA code
                            (e.g. "SHF\(r\)") and the human readable explanation
                            (e.g. "Rows are shuffled")
                        intent:
                          type: string
                          description: |
                            This is `null` for all tables except net summaries, where
                            it's `summary`
                        obj:
                          type: string
                          description: |
                            The XML object that is the primary object driving this
                            table.  For a question that generates a single table, this
                            will be e.g. "q1".  For question that consists of multiple
                            tables (e.g. 2D radio grouped by rows), "q1,r1" .. "q1,r5".
                        tableType:
                          type: string
                          enum:
                            - simple
                            - numeric
                            - net
                            - stat
                          description: |
                            Set to `simple` (table contains percentages), `numeric`
                            (table contains stats such as mean), `net`" (additional
                            table  created for variable nets) or `stat` (summary table
                            for stats).
                  dlident:
                    type: string
                    description: |
                      The "DownLoad IDENT" value can be used to create a direct link
                      to a report run or to download data matching the report
                      segments.
  /surveys/{survey}/crosstabs/saved/{saved}/export/{format}:
    post:
      operationId: createSurveyCrosstabsSavedExport
      summary: Export saved report
      description: |
        Request a conversion of a saved report. The requested file type is
        immediately returned.
      tags:
        - Saved Crosstabs
      parameters:
        - name: survey
          description: The survey whose saved report you want to execute
          in: path
          required: true
          schema:
            type: string
        - name: saved
          description: The 12 or 16 character report ID
          example: 1h7c1s5znuk1
          in: path
          required: true
          schema:
            type: string
        - name: format
          description: |
            One of "pptx" (Microsoft PowerPoint), "excel" (Excel) or "pdf"
            (Adobe PDF)
          in: path
          required: true
          schema:
            type: string
            enum:
              - pptx
              - excel
              - pdf
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                aggregates:
                  description: |
                    Show output matching report grid tables. If set to `false`,
                    question tables are not aggregated and a separate table is shown
                    for each data variable. Not Applicable for saved reports.
                  default: true
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
  /surveys/{survey}/crosstabs/tablesettings:
    delete:
      operationId: deleteSurveyCrosstabsTablesettings
      summary: Delete crosstabs table settings
      description: |
        Reset all tables or just the given table to their "as programmed" state,
        removing any customization. Requires reporting: edit permission for the
        project.
      tags:
        - Crosstabs Table Settings
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                tablename:
                  description: |
                    Table to reset. If supplied, only this table will be reset,
                    otherwise all tables will be reset.
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/crosstabs/validate:
    get:
      operationId: getSurveyCrosstabsValidate
      summary: Validate logic
      description: |
        Check whether the logic is valid for crosstabs.
      tags:
        - Crosstabs Validation
      parameters:
        - name: survey
          description: survey path to run crosstabs in
          in: path
          required: true
          schema:
            type: string
        - name: logic
          description: the quoted logic to be tested
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  valid:
                    type: boolean
  /surveys/{survey}/crosstabs/weighting/rim/{var}:
    put:
      operationId: updateSurveyCrosstabsWeightingRim
      summary: Update rim weighting
      tags:
        - Crosstabs Rim Weighting
      description: Create per-record weights based on a set of RIM variables and breaks. The algorithm as described in the Wincross manual is used.
      parameters:
        - name: survey
          description: survey path to run crosstabs in
          in: path
          required: true
          schema:
            type: string
        - name: var
          description: The target var to save the data in. This will be created as a new or updated column in the `nweight.txt` file.
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                iterations:
                  description: |
                    How many times should we try to approximate the variables.
                  default: 50
                  type: integer
                minWeight:
                  description: Minimum acceptable record weight.
                  default: 0.0001
                  type: number
                maxWeight:
                  description: |
                    Maximum acceptable record weight (by default, no limit).
                  default: 999999
                  type: number
                converge:
                  description: |
                    Acceptable convergence to consider the test done before
                    completing all iterations.
                  default: 0.000005
                  type: number
                test:
                  description: |
                    In test mode, do not save the data but still run the calculations.
                  default: false
                  type: boolean
                chunks:
                  description: |
                    An array of objects, containing `precondition` and `variables`.
                    Each variable is an array for each variable (e.g. Gender) to test
                    containing an array of objects that are values. Each value is a
                    crosstabs condition and the desired percentage ratio (must add up
                    to 100%).
                  type: array
                  items:
                    type: object
                    properties:
                      precondition:
                        type: string
                      variables:
                        type: array
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              condition:
                                type: string
                              ratio:
                                type: array
                                minItems: 2
                                maxItems: 2
              required:
                - chunks
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    success:
                      type: boolean
                      description: |
                        True if we managed to hit convergence within the required
                        number of iterations.
                    rms:
                      type: number
                      description: |
                        Root mean square of the last iteration, which is compared to
                        the desired convergence.
                    debug:
                      type: string
                      description: |
                        Textual debug information about what happened in each
                        iteration.
                    efficiency:
                      type: number
                      description: Efficiency factor of generated weights.
                    wprop:
                      type: object
                      description: achieved weights per break in each variable.
  /surveys/{survey}/dashboards:
    get:
      operationId: getSurveyDashboards
      summary: List dashboards
      description: |
        Returns a list of all dashboards for the given survey.
      tags:
        - Dashboards
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      description: The unique identifier for the dashboard
                      example: 7dzxw12nm3f0
                      type: string
                    title:
                      description: The title of the dashboard
                      example: Private Dashboard
                      type: string
                    public:
                      description: Is the dashboard public?
                      example: false
                      type: boolean
                    published:
                      description: Has the dashboard been published?
                      example: true
                      type: boolean
                    published_link:
                      description: |
                        If the dashboard has been published, it may be viewed at this
                        link. If it is a private dashboard, the user must be logged
                        in to view it.
                      example: https://example.decipherinc.com/apps/dashboard/selfserve/1a/123456:view/7dzxw12nm3f0
                      type: string
  /surveys/{survey}/dashboards/{id}:
    get:
      operationId: getSurveyDashboard
      summary: Get dashboard
      description: |
        Returns the dashboard with the given id for the given survey.
      tags:
        - Dashboards
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: id
          in: path
          description: The id of the dashboard you wish to get
          example: 7dzxw12nm3f0
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    description: The unique identifier for the dashboard
                    example: 7dzxw12nm3f0
                    type: string
                  title:
                    description: The title of the dashboard
                    example: Private Dashboard
                    type: string
                  public:
                    description: Is the dashboard public?
                    example: false
                    type: boolean
                  published:
                    description: Has the dashboard been published?
                    example: true
                    type: boolean
                  published_link:
                    description: |
                      If the dashboard has been published, it may be viewed at this
                      link. If it is a private dashboard, the user must be logged
                      in to view it.
                    example: https://example.decipherinc.com/apps/dashboard/selfserve/1a/123456:view/7dzxw12nm3f0
                    type: string
    put:
      operationId: updateSurveyDashboard
      summary: Update dashboard
      description: |
        Publish or unpublish a dashboard.
      tags:
        - Dashboards
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: id
          in: path
          description: The unique identifier of the dashboard
          example: 7dzxw12nm3f0
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                published:
                  description: Should the dashboard be published?
                  type: boolean
              required:
                - published
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    description: The unique identifier for the dashboard
                    example: 7dzxw12nm3f0
                    type: string
                  title:
                    description: The title of the dashboard
                    example: Private Dashboard
                    type: string
                  public:
                    description: Is the dashboard public?
                    example: false
                    type: boolean
                  published:
                    description: Has the dashboard been published?
                    example: true
                    type: boolean
                  published_link:
                    description: |
                      If the dashboard has been published, it may be viewed at this
                      link. If it is a private dashboard, the user must be logged
                      in to view it.
                    example: https://example.decipherinc.com/apps/dashboard/selfserve/1a/123456:view/7dzxw12nm3f0
                    type: string
    delete:
      operationId: deleteSurveyDashboard
      summary: Delete dashboard
      description: |
        Deletes the given dashboard.
      tags:
        - Dashboards
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: id
          in: path
          description: The unique identifier for the dashboard
          example: 7dzxw12nm3f0
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: {}
  /surveys/{survey}/dqapi/{label}/{name}:
    get:
      operationId: getSurveyDqapiLabelName
      summary: Call an DQ-specific API function
      description: |
        Calls an DQ-specific API function
      tags:
        - DQ-Specific API Calls
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: label
          in: path
          description: the label of the question with a DQ that has API functions
          example: q1
          required: true
          schema:
            type: string
        - name: name
          in: path
          description: API function name (will look for api_{name} in code.py)
          example: myFunction
          required: true
          schema:
            type: string
        - name: allArgs
          in: query
          description: All arguments passed in by the caller, passed on to the DQ API function
          example: var1=data
          required: false
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                description: will depend on the api_function called
  /surveys/{survey}/dqapi/{label}/hitrate:
    get:
      operationId: getSurveyDqapiLabelMaxdiffHitrate
      summary: Calculates the coefficients
      description: |
        Calculate how often some of the stored coefficients match the answered questions.
        Coefficient data is expected to be in {question label}_{suffix}{attribute label}.
      tags:
        - MaxDiff API Calls
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: label
          in: path
          description: label is the label of the question with a DQ that has API functions
          example: q1
          required: true
          schema:
            type: string
        - name: holdout
          in: query
          description: If holdout is set, test only that task, otherwise if set to “all” test all tasks.
          example: all
          required: true
          schema:
            type: string
        - name: suffix
          in: query
          description: suffix of the coefficient
          example: score
          required: true
          schema:
            type: string
        - name: include_correct
          in: query
          description: if set true it will show all the data rather than just misses.
          example: true
          required: false
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  hitrate:
                    type: number
                  total:
                    type: integer
                  score:
                    type: integer
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        best:
                          type: string
                        coeff:
                          type: object
                        predicted_best:
                          type: string
                        predicted_worst:
                          type: string
                        uuid:
                          type: string
                        visible:
                          type: array
                        worst:
                          type: string
              example:
                hitrate: 41.7
                total: 12
                data:
                  - visible:
                      - r8
                      - r2
                      - r3
                      - r6
                    worst: r6
                    uuid: cwyte1a68y4fu97e
                    coeff:
                      r6: 33.335
                      r8: 66.665
                      r2: 66.665
                      r3: 16.665
                    predicted_best: r8
                    best: r2
                    predicted_worst: r3
                  - visible:
                      - r8
                      - r1
                      - r3
                      - r4
                    worst: r3
                    uuid: cwyte1a68y4fu97e
                    coeff:
                      r4: 83.335
                      r8: 66.665
                      r1: 33.335
                      r3: 16.665
                    predicted_best: r4
                    best: r8
                    predicted_worst: r3
                score: 5
  /surveys/{survey}/dqapi/{label}/mxd:
    get:
      operationId: getSurveyDqapiLabelMaxdiffMxd
      summary: Output data in a format suitable for Sawtooth
      description: |
        Output data in a format suitable for Sawtooth
      tags:
        - MaxDiff API Calls
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: label
          in: path
          description: label is the label of the question with a DQ that has API functions
          example: q1
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                example:
                  - MXD_6_w: '7'
                    MXD_4_w: '1'
                    MXD_3_w: '3'
                    MXD_5_b: '7'
                    sys_RespStatus: 5
                    MXD_1_b: '4'
                    MXD_2_w: '6'
                    MXD_4_b: '2'
                    MXD_3_b: '8'
                    sys_MXDVersion_MXD: '90'
                    MXD_1_w: '3'
                    MXD_2_b: '2'
                    MXD_5_w: '2'
                    MXD_6_b: '4'
                    sys_RespNum: '1'
  /surveys/{survey}/dqapi/{label}/tricked:
    get:
      operationId: getSurveyDqapiLabelMaxdiffTricked
      summary: Output respondent data in so-called “tricked” format
      description: |
        Output respondent data in so-called “tricked” format, suitable for input into tools like R’s mlogit.
      tags:
        - MaxDiff API Calls
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: label
          in: path
          description: label is the label of the question with a DQ that has API functions
          example: q1
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                type: object
                properties:
                  alternatives:
                    type: integer
                  attribute_labels:
                    type: array
                    items:
                      type: string
                  data:
                    type: array
                    items:
                      type: object
                example:
                  alternatives: 4
                  data:
                    - r4: 0
                      r5: 0
                      r6: 0
                      Task: 1
                      uuid: 1
                      r2: 0
                      r3: 1
                      r8: 0
                      Choice: 0
                      r7: 0
                      r1: 0
                    - r4: 0
                      r5: 0
                      r6: -1
                      Task: 2
                      uuid: 1
                      r2: 0
                      r3: 0
                      r8: 0
                      Choice: 0
                      r7: 0
                      r1: 0
                    - r4: 0
                      r5: 0
                      r6: 0
                      Task: 3
                      uuid: 1
                      r2: 0
                      r3: 0
                      r8: 1
                      Choice: 0
                      r7: 0
                      r1: 0
                  attribute_labels:
                    - r1
                    - r2
                    - r3
                    - r4
                    - r5
                    - r6
                    - r7
                    - r8
  /surveys/{survey}/conjoint/status:
    get:
      operationId: getSurveyConjointStatus
      summary: Get survey conjoint statuses
      description: Retrieves a list of statuses for all Discrete Choice Model questions in a survey
      tags:
        - Discrete Choice Model API Calls
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    question_label:
                      type: string
                      description: The question label for the DCM question
                      example: q1
                    design_filename:
                      type: string
                      description: The filename of the design file
                      example: q1_design_abcd.dat
                    design_status:
                      type: string
                      description: 'Status for the creation of the design file,  one of `in_progress`, `completed`, or `failed: <message>`'
                      example: completed
                    design_timestamp:
                      type: string
                      description: Timestamp of the latest design status
                      example: '2025-02-10T21:14:50Z'
                    report_status:
                      type: string
                      description: 'Status for the creation of the report files, one of `in_progress`, `completed`, or `failed: <message>`'
                      example: in_progress
                    report_timestamp:
                      type: string
                      description: Timestamp of the latest report status
                      example: '2025-02-10T22:10:37Z'
  /surveys/{survey}/conjoint/report/{question_label}:
    get:
      operationId: getSurveyConjointReport
      summary: Get survey conjoint utilities
      description: Retrieves a utilities report for a specific Discrete Choice Model question in a survey. Utilities report must have already been run for this question.
      tags:
        - Discrete Choice Model API Calls
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: question_label
          in: path
          required: true
          schema:
            type: string
          description: The question label for the DCM question
        - name: data
          in: query
          required: true
          schema:
            type: array
            items:
              type: string
              enum:
                - raw_utilities
                - zeroed_utilities
                - utility_ranges
                - importance_ratios
                - importances
                - preferences
                - zc_diffs
          description: List of data types to include in the report
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    attribute_name:
                      type: string
                      description: The name of the attribute
                      example: Brand
                    aggregate_data:
                      type: object
                      properties:
                        importance:
                          type: string
                          description: The importance of the attribute
                          example: '0.12417560023'
                    respondent_data:
                      type: array
                      items:
                        type: object
                        properties:
                          utility_range:
                            type: string
                            description: The utility range for the respondent
                            example: '0.70357261395'
                          importance_ratio:
                            type: string
                            description: The importance ratio for the respondent
                            example: '0.11114124767'
                          respondent_id:
                            type: string
                            description: The identifier for the respondent
                            example: jwy3kwppp4yuqg86
                    levels:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                            description: The name of the level
                            example: Decipher
                          aggregate_data:
                            type: object
                            properties:
                              preference:
                                type: string
                                description: The preference for the level
                                example: '0.01928257183'
                          respondent_data:
                            type: array
                            items:
                              type: object
                              properties:
                                raw_utility:
                                  type: string
                                  description: The raw utility for the respondent
                                  example: '0.42836917022'
                                zeroed_utility:
                                  type: string
                                  description: The zeroed utility for the respondent
                                  example: '0.0'
                                respondent_id:
                                  type: string
                                  description: The identifier for the respondent
                                  example: jwy3kwppp4yuqg86
                                zc_diff:
                                  type: string
                                  description: The zero-centered difference for the respondent
                                  example: '54.13455054824'
        '404':
          description: Not Found
        '409':
          description: Conflict
  /surveys/{survey}/summary/share_link:
    post:
      operationId: postSurveySummaryShareLink
      summary: Create share link
      description: |
        Enable or disable a response summary share link. Either generate the token url or
        invalidate the token so the link no longer works.
      tags:
        - Share Link
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                enabled:
                  description: True to enable, False to disable share link.
                  example: true
              required:
                - enabled
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  enabled:
                    description: True if enabled, False if disabled
                    example: true
                    type: boolean
                  url:
                    description: Share link URL
                    example: '{domain}/login/auth-token?token={token}'
                    type: string
    get:
      operationId: getSurveySummaryShareLink
      summary: Get share link
      description: |
        Generate a link that can be shared by using the start URL and token. This link can be used
        by un-authenticated users to view the response summary. A share link must be first generated 
        from the POST request before being able to retreive the link with this request.
      tags:
        - Share Link
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  enabled:
                    description: True if enabled, False if disabled
                    example: true
                    type: boolean
                  url:
                    description: Share link URL
                    example: '{domain}/login/auth-token?token={token}'
                    type: string
  /bulk/bounced:
    post:
      operationId: createBulkBounced
      summary: Check for known bounce-backs
      description: |
        Send a list of emails to check for known bounce-backs. Staff access required.
      tags:
        - Bounced Emails
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                emails:
                  description: list of email addresses to check.
                  type: array
                  items:
                    type: string
                    format: email address
              required:
                - emails
              example:
                emails:
                  - gooduser@example.com
                  - baduser@example.com
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  bounced:
                    type: array
                    description: list of details about each bounce
                    items:
                      type: object
                      properties:
                        reason:
                          type: string
                          description: the reason for the bounce
                        code:
                          type: string
                          description: the error code
                        email:
                          type: string
                          format: email
                          description: the email address that bounced
                        tstamp:
                          type: string
                          format: ISO 8601 timestamp with timezone
                          description: time of bounce
                  misses:
                    type: integer
                    description: count of misses
                  hits:
                    type: integer
                    description: count of hits
              example:
                bounced:
                  - reason: Mailbox unavailable
                    code: 550
                    email: baduser@example.com
                    tstamp: '2020-05-02T19:19:27Z'
                misses: 1
                hits: 1
      x-codeSamples:
        - lang: beacon
          source: |
            beacon post bulk/bounced emails="gooduser@example.com,baduser@example.com"
        - lang: curl
          source: |
            curl --location \
              --request POST '{server}/api/v1/bulk/bounced' \
              --header 'x-apikey: {api_key}' \
              --header 'Content-Type: application/json' \
              --data-raw '{
                "emails": ["gooduser@example.com", "baduser@example.com"]
              }'
  /surveys/{survey}/sample/{listId}/links:
    get:
      operationId: getSurveySampleLinks
      summary: Get participant sources
      description: Retrieves a list of links for all uploaded external sample.
      tags:
        - Participant Sources
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: listId
          description: the `list` value of the participant source.
          example: '299'
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  links:
                    type: object
                    description: an object mapping participant souce identifier to link url
              examples:
                response:
                  value:
                    links:
                      respondent.1415833683.1: http://yourserver.decipherinc.com/survey/selfserve/84d/141100?id=respondent.1415833683.1&list=299
                      respondent.1415833683.2: http://yourserver.decipherinc.com/survey/selfserve/84d/141100?id=respondent.1415833683.2&list=299
                      respondent.1415833683.3: http://yourserver.decipherinc.com/survey/selfserve/84d/141100?id=respondent.1415833683.3&list=299
                      respondent.1415833683.4: http://yourserver.decipherinc.com/survey/selfserve/84d/141100?id=respondent.1415833683.4&list=299
                      respondent.1415833683.5: http://yourserver.decipherinc.com/survey/selfserve/84d/141100?id=respondent.1415833683.5&list=299
                      respondent1: http://yourserver.decipherinc.com/survey/selfserve/84d/141100?id=respondent1&list=299
                      respondent2: http://yourserver.decipherinc.com/survey/selfserve/84d/141100?id=respondent2&list=299
                      respondent3: http://yourserver.decipherinc.com/survey/selfserve/84d/141100?id=respondent3&list=299
                      respondent4: http://yourserver.decipherinc.com/survey/selfserve/84d/141100?id=respondent4&list=299
                      respondent5: http://yourserver.decipherinc.com/survey/selfserve/84d/141100?id=respondent5&list=299
  /surveys/{survey}/samplesources/{listId}/sign:
    post:
      operationId: createSurveySamplesourceSign
      summary: Create signed links
      description: Add signatures to survey links for a samplesource with a keyring.
      tags:
        - Participant Sources
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: listId
          description: The `list` value of the participant source. A keyring must be attached to it.
          example: '299'
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                urls:
                  description: Array of URLs to sign.
                  type: array
                  items:
                    type: string
                    example: http://yourserver.decipherinc.com/survey/selfserve/123/140001?list=299
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: Array of signed URLs.
                items:
                  description: Signed URL
                  type: string
                  example: http://yourserver.decipherinc.com/survey/selfserve/123/140001?list=299&_k=1000&_s=589eeddfc25911255f69c5a5ddef58ece72dcd8b
        '400':
          description: Samplesource not found or no keyring for samplesource
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error.
                    type: string
                    example: no keyring for samplesource
                  $code:
                    description: The HTTP error code.
                    type: integer
                    example: 400
                  extra:
                    description: Extra information about the error.
                    type: string
                    example: null
        '404':
          description: Survey not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error.
                    type: string
                    example: 'Cannot load survey ''selfserve/123/140001'' specified as survey: does not exist'
                  $code:
                    description: The HTTP error code.
                    type: integer
                    example: 404
                  extra:
                    description: Extra information about the error.
                    type: string
                    example: null
  /surveys/{survey}/samplesources/{listId}/verify:
    post:
      operationId: createSurveySamplesourceVerify
      summary: Verify signed links
      description: Verify signatures for survey links for a samplesource with a keyring.
      tags:
        - Participant Sources
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: listId
          description: The `list` value of the participant source. A keyring must be attached to it.
          example: '299'
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                urls:
                  description: Array of URLs to verify.
                  type: array
                  items:
                    type: string
                    example: http://yourserver.decipherinc.com/survey/selfserve/123/140001?list=299&_k=1000&_s=589eeddfc25911255f69c5a5ddef58ece72dcd8b
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: An array of objects, one for the incoming array containing the results.
                items:
                  type: object
                  example:
                    valid: true
                    error: null
                  properties:
                    valid:
                      type: boolean
                      description: true/false
                      example: true
                    error:
                      type: string
                      description: textual error description
                      example: null
        '400':
          description: Samplesource not found or no keyring for samplesource
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error.
                    type: string
                    example: no keyring for samplesource
                  $code:
                    description: The HTTP error code.
                    type: integer
                    example: 400
                  extra:
                    description: Extra information about the error.
                    type: string
                    example: null
        '404':
          description: Survey not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error.
                    type: string
                    example: 'Cannot load survey ''selfserve/123/140001'' specified as survey: does not exist'
                  $code:
                    description: The HTTP error code.
                    type: integer
                    example: 404
                  extra:
                    description: Extra information about the error.
                    type: string
                    example: null
  /distribute/email:
    post:
      operationId: createDistributeEmail
      summary: Send API to Email
      description: |
        This meta-API call requires you to specify another API call as input,
        although you can also omit the sub-calls and send an email with subject
        and body of your choosing.

        You can specify any number of API calls that generate attachments (i.e.
        non-JSON output). Some useful calls are:

        * [saved crosstabs export](#reporting-exports)
        * [datamap](#data-input-and-output-datamap)
        * [data out](#data-input-and-output-data-get)

        **Acceptable Use Policy**: all recipients must have given opt-in to
        receive the emails you sent. You may contact solely your business associates,
        i.e. not invite survey participants.
      tags:
        - Email Distribution
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                sources:
                  description: |
                    any number of API data sources to call to get the data. Note that
                    URL arguments must be passed via args only.
                  type: array
                  items:
                    type: object
                    properties:
                      api:
                        type: string
                        description: the path of the api to call
                        example: /api/v1/surveys/your/survey/datamap
                      args:
                        type: object
                        description: arguments to pass to the api call
                      method:
                        type: string
                        description: the http method to use
                        default: GET
                recipients:
                  description: list of email addresses to send this to
                  type: array
                  items:
                    type: string
                    format: email address
                subject:
                  description: the subject of the email that will be sent out
                  type: string
                sender:
                  description: |
                    the name that will appear as sender. Defaults to the full name of
                    the account behind the API key
                  type: string
                body:
                  description: message to put in the body. HTML capable.
                  type: string
                colors:
                  description: set of colors to override the default email template.
                  type: object
                  properties:
                    linkTextColor:
                      type: string
                      format: css color
                      example: '#E15603'
                    emailBackgroundColor:
                      type: string
                      format: css color
                      example: '#2A4068'
                    emailForegroundColor:
                      type: string
                      format: css color
                      example: '#FFFFFF'
                    emailContentAlignment:
                      type: string
                      example: center
                    emailPageColor:
                      type: string
                      format: css color
                      example: '#FFFFFF'
                    linkButtonColor:
                      type: string
                      format: css color
                      example: '#5B9FFFF'
                    linkButtonTextColor:
                      type: string
                      format: css color
                      example: '#EDF8FF'
                    defaultTextColor:
                      type: string
                      format: css color
                      example: '#333'
              required:
                - sources
                - recipients
                - subject
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /distribute/ftp:
    post:
      operationId: createDistributeFtp
      summary: Send API to SFTP
      description: |
        Upload data via FTP or SFTP. This meta-API call requires you to specify
        another API call as input

        You can specify any amount of API calls that generate attachments (i.e.
        non-JSON output). Some useful calls are:

        * [saved crosstabs export](#reporting-exports)
        * [datamap](#data-input-and-output-datamap)
        * [data out](#data-input-and-output-data-get)

        If successful, a log of the connection is returned.
      tags:
        - SFTP Distribution
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                sources:
                  description: |
                    any number of API data sources to call to get the data. Note that
                    URL arguments must be passed via args only.
                  type: array
                  items:
                    type: object
                    properties:
                      api:
                        type: string
                        description: the path of the api to call
                        example: /api/v1/surveys/your/survey/datamap
                      args:
                        type: object
                        description: arguments to pass to the api call
                      method:
                        type: string
                        description: the http method to use
                        default: GET
                      filename:
                        type: string
                        description: filename to use for the upload
                username:
                  description: user name to login with
                  type: string
                password:
                  description: password for the user
                  type: string
                host:
                  description: remote hostname
                  type: string
                protocol:
                  description: |
                    either ftp or sftp. SFTP is "FTP" over SSH and is the only
                    recommended transfer method.
                  default: sftp
                  type: string
                  enum:
                    - ftp
                    - sftp
                directory:
                  description: switch to this directory before uploading the files.
                  type: string
              required:
                - sources
                - username
                - password
                - host
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  debug:
                    type: string
                    description: log of the ftp session
              example:
                debug: |
                  [28/Jul/15 20:31:58] 220 (vsFTPd 2.3.5)
                  [28/Jul/15 20:31:58] 220 (vsFTPd 2.3.5)
                  [28/Jul/15 20:31:58] 230 Login successful.
                  [28/Jul/15 20:31:58] 250 Directory successfully changed.
                  [28/Jul/15 20:31:58] 226 Transfer complete.
                  [28/Jul/15 20:31:58] /home/bgates/Private/h/dev/data/tmp/tmpCEi7Qf transferred to localhost
  /distribute/slack:
    post:
      operationId: createDistributeSlack
      summary: Send API to Slack
      description: |
        Send a message to a [Slack](https://slack.com/) channel or user. Together
        with hooks this can be used to notify users of certain happenings in their
        surveys or systems. Visit https://api.slack.com/ to receive an integration
        token you can immediately use below. The message will be sent from the user
        `BeaconBot (username)`.
      tags:
        - Slack Distribution
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                company:
                  description: your company ID at Slack
                  type: string
                token:
                  description: the API token Slack has given you
                  type: string
                text:
                  description: text to post
                  type: string
                target:
                  description: |
                    Either a `#channelname` or `@user` for a private message.
                  type: string
              required:
                - company
                - token
                - text
                - target
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/campaigns:
    get:
      operationId: getSurveyCampaigns
      summary: Get campaigns
      description: |
        Returns a list of basic information about the Campaign Manager campaigns
        associated with this survey.
      tags:
        - Campaigns
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      description: Name of campaign
                      type: string
                    replyTo:
                      description: |
                        Reply-To email address used when sending emails
                      type: string
                    fromName:
                      description: Sender name used when sending emails
                      type: string
                    fromAddress:
                      description: |
                        Sender email address used when sending emails
                      type: string
                    link:
                      description: Survey link
                      type: string
                    subject:
                      description: Subject used when sending emails
                      type: string
                    requireSeed:
                      description: |
                        Whether or not the campaign is required to use seed sends. When `false`,
                        the campaign cannot be edited or launched via Campaign Manager.
                      default: true
                      type: boolean
                    oneClickOptOutUrl:
                      description: |
                        One-Click Opt-Out URL, used in email headers with One-Click Unsubscribe
                      type: string
    post:
      operationId: createSurveyCampaign
      summary: Create campaign
      description: |
        Creates a new campaign for the given survey.

        A campaign created through this endpoint allows sends to be scheduled while
        other sends are already scheduled.
      tags:
        - Campaigns
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  description: Name of campaign
                  type: string
                replyTo:
                  description: |
                    Reply-To email address to use when sending emails, must be a
                    valid email address
                  type: string
                fromName:
                  description: Sender name to use when sending emails
                  type: string
                fromAddress:
                  description: |
                    Sender email address to use when sending emails, must be an email
                    address that the user and project has permission to send emails
                    from
                  type: string
                link:
                  description: Survey link, must be a link to the appropriate survey
                  type: string
                subject:
                  description: Subject to use when sending emails
                  type: string
                requireSeed:
                  description: |
                    Requires the campaign to use seed sends. When `false`, the
                    campaign cannot be edited or launched via Campaign Manager.
                  default: true
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/campaigns/{campaign}:
    get:
      operationId: getSurveyCampaign
      summary: Get campaign
      description: Returns basic information about an individual campaign.
      tags:
        - Campaigns
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: ID of the campaign
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    description: Name of campaign
                    type: string
                  replyTo:
                    description: |
                      Reply-To email address used when sending emails
                    type: string
                  fromName:
                    description: Sender name used when sending emails
                    type: string
                  fromAddress:
                    description: |
                      Sender email address used when sending emails
                    type: string
                  link:
                    description: Survey link
                    type: string
                  subject:
                    description: Subject used when sending emails
                    type: string
                  requireSeed:
                    description: |
                      Whether or not the campaign is required to use seed sends. When `false`,
                      the campaign cannot be edited or launched via Campaign Manager.
                    default: true
                    type: boolean
                  oneClickOptOutUrl:
                    description: |
                      One-Click Opt-Out URL, used in email headers with One-Click Unsubscribe
                    type: string
    put:
      operationId: updateSurveyCampaign
      summary: Edit campaign
      description: |
        Modifies `name`, `replyTo`, `fromName`, `fromAddress`, `link`,
        `subject`, and/or `requireSeed` of an individual campaign.
      tags:
        - Campaigns
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: ID of the campaign
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  description: Name of campaign
                  type: string
                replyTo:
                  description: |
                    Reply-To email address to use when sending emails, must be a
                    valid email address
                  type: string
                fromName:
                  description: Sender name to use when sending emails
                  type: string
                fromAddress:
                  description: |
                    Sender email address to use when sending emails, must be an email
                    address that the user and project has permission to send emails
                    from
                  type: string
                link:
                  description: Survey link, must be a link to the appropriate survey
                  type: string
                subject:
                  description: Subject to use when sending emails
                  type: string
                requireSeed:
                  description: |
                    Requires the campaign to use seed sends. Cannot be changed once a
                    soft send is done.
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
    delete:
      operationId: deleteSurveyCampaign
      summary: Delete campaign
      description: Deletes and individual campaign as well as its seed and list files.
      tags:
        - Campaigns
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: ID of the campaign.
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                force:
                  description: Flag to force campaign deletion on surveys with ADB.
                  default: false
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    type: string
                    description: error description
                  $code:
                    type: integer
                    description: http error code (400)
                  extra:
                    type: string
                    nullable: true
              example:
                $error: Cannot delete campaign for a survey with ADB enabled. Use 'force' to override.
                $code: 400
                extra: null
  /surveys/{survey}/campaigns/{campaign}/invite:
    get:
      operationId: getSurveyCampaignInvite
      summary: Get Invite
      description: Retrieve the content body and other attributes of the email invite and of the reminder email.
      tags:
        - Campaign Email Invites
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: ID of the campaign.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    description: Content of the email to use for the email campaign.
                    type: string
                  reminder:
                    description: |
                      Content of the reminder email to use for any reminder email sends.
                    type: string
                  subject:
                    description: Subject line of the email.
                    type: string
                  reminder_subject:
                    description: Subject line of the reminder email.
                    type: string
                  fromName:
                    description: Sender name to use when sending emails.
                    type: string
                  reminder_fromName:
                    description: Sender name to use when sending reminder emails.
                    type: string
                  fromAddress:
                    description: Sender email address to use when sending emails, must be an email address that the user and project has permission to send emails from.
                    type: string
                  reminder_fromAddress:
                    description: Sender email address to use when sending reminder emails, must be an email address that the user and project has permission to send emails from.
                    type: string
                  replyTo:
                    description: Reply-To email address to use when sending emails, must be a valid email address.
                    type: string
                  reminder_replyTo:
                    description: Reply-To email address to use when sending reminder emails, must be a valid email address.
                    type: string
                  styles:
                    description: Edits email styling.
                    type: object
                    properties:
                      emailBackgroundColor:
                        description: Changes the color that appears behind the framed body of the email, in the background.
                        type: string
                      emailForegroundColor:
                        description: Changes the color that appears behind the text, in the foreground.
                        type: string
                      linkTextColor:
                        description: Updates the color of the survey and opt-out links in the email.
                        type: string
                  reminder_styles:
                    description: Edits reminder email styling.
                    type: object
                    properties:
                      emailBackgroundColor:
                        description: Changes the color that appears behind the framed body of the email, in the background.
                        type: string
                      emailForegroundColor:
                        description: Changes the color that appears behind the text, in the foreground.
                        type: string
                      linkTextColor:
                        description: Updates the color of the survey and opt-out links in the email.
                        type: string
              example:
                content: |-
                  <div style="margin:0 auto;">
                  <div id="emailBody" style="min-width: 240px; max-width: 780px; display: block; margin: 0 auto; padding: 20px;">
                  <p style="text-align: left;">
                  Dear Sir or Madam,
                  <br /><br />
                  We are conducting research on your usage of our products and services.  This is your chance to make a difference in the way we do business.  Please take a moment to fill out this short survey.   Your answers will only be used in aggregate, and no personal information will be shared independent of the aggregated results.  Please be honest, as we take your answers and suggestions to heart.
                  <br /><br />
                  Click below to get started:
                  </p>
                  <p style="text-align: center;">
                  <a href="[surveyLink]">Take our survey</a><br/>
                  </p>
                  <p style="text-align: center;">
                  Research By Example | 1234 N Main St. | Anytown, CA 22313
                  </p>
                  <p style="text-align: center;">
                  <span style="font-size: 11px;">
                  If you no longer wish to receive these emails, you may unsubscribe by clicking <a
                  href="[optOutLink]">here</a>.
                  </span>
                  </p>
                  </div>
                  </div>
                  &nbsp; <br/>
                reminder: |-
                  <div style="margin:0 auto;">
                  <div id="emailBody" style="min-width: 240px; max-width: 780px; display: block; margin: 0 auto; padding: 20px;">
                  <p style="text-align: left;">
                  Dear Sir or Madam,
                  <br /><br />
                  We are conducting research on your usage of our products and services.  This is your chance to make a difference in the way we do business.  Please take a moment to fill out this short survey.   Your answers will only be used in aggregate, and no personal information will be shared independent of the aggregated results.  Please be honest, as we take your answers and suggestions to heart.
                  <br /><br />
                  Click below to get started:
                  </p>
                  <p style="text-align: center;">
                  <a href="[surveyLink]">Take our survey</a><br/>
                  </p>
                  <p style="text-align: center;">
                  Research By Example | 1234 N Main St. | Anytown, CA 22313
                  </p>
                  <p style="text-align: center;">
                  <span style="font-size: 11px;">
                  If you no longer wish to receive these emails, you may unsubscribe by clicking <a
                  href="[optOutLink]">here</a>.
                  </span>
                  </p>
                  </div>
                  </div>
                  &nbsp; <br/>
                subject: Share your feedback
                reminder_subject: Reminder -- Share your feedback
                fromName: Forsta
                reminder_fromName: Forsta
                fromAddress: invite@decipherinc.com
                reminder_fromAddress: invite@decipherinc.com
                replyTo: invite@decipherinc.com
                reminder_replyTo: invite@decipherinc.com
                styles:
                  emailBackgroundColor: '#002F4D'
                  emailForegroundColor: red
                  linkTextColor: blue
                reminder_styles:
                  emailBackgroundColor: '#002F4D'
                  emailForegroundColor: red
                  linkTextColor: blue
    put:
      operationId: editSurveyCampaignInvite
      summary: Edit Invite
      description: |
        Update the content body and other attributes of the email invite or of the reminder email.  Note
        that the invite content that is used for any in-progress sends are not
        editable until the send is either cancelled or completed.
      tags:
        - Campaign Email Invites
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: ID of the campaign.
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  description: Content of the email to use for the email campaign.
                  type: string
                  example: |-
                    <div style="margin:0 auto;">
                    <div id="emailBody" style="min-width: 240px; max-width: 780px; display: block; margin: 0 auto; padding: 20px;">
                    <p style="text-align: left;">
                    Dear Sir or Madam,
                    <br /><br />
                    We are conducting research on your usage of our products and services.  This is your chance to make a difference in the way we do business.  Please take a moment to fill out this short survey.   Your answers will only be used in aggregate, and no personal information will be shared independent of the aggregated results.  Please be honest, as we take your answers and suggestions to heart.
                    <br /><br />
                    Click below to get started:
                    </p>
                    <p style="text-align: center;">
                    <a href="[surveyLink]">Take our survey</a><br/>
                    </p>
                    <p style="text-align: center;">
                    Research By Example | 1234 N Main St. | Anytown, CA 22313
                    </p>
                    <p style="text-align: center;">
                    <span style="font-size: 11px;">
                    If you no longer wish to receive these emails, you may unsubscribe by clicking <a
                    href="[optOutLink]">here</a>.
                    </span>
                    </p>
                    </div>
                    </div>
                    &nbsp; <br/>
                reminder:
                  description: Content of the reminder email to use for any reminder email sends.
                  type: string
                  example: |-
                    <div style="margin:0 auto;">
                    <div id="emailBody" style="min-width: 240px; max-width: 780px; display: block; margin: 0 auto; padding: 20px;">
                    <p style="text-align: left;">
                    Dear Sir or Madam,
                    <br /><br />
                    We are conducting research on your usage of our products and services.  This is your chance to make a difference in the way we do business.  Please take a moment to fill out this short survey.   Your answers will only be used in aggregate, and no personal information will be shared independent of the aggregated results.  Please be honest, as we take your answers and suggestions to heart.
                    <br /><br />
                    Click below to get started:
                    </p>
                    <p style="text-align: center;">
                    <a href="[surveyLink]">Take our survey</a><br/>
                    </p>
                    <p style="text-align: center;">
                    Research By Example | 1234 N Main St. | Anytown, CA 22313
                    </p>
                    <p style="text-align: center;">
                    <span style="font-size: 11px;">
                    If you no longer wish to receive these emails, you may unsubscribe by clicking <a
                    href="[optOutLink]">here</a>.
                    </span>
                    </p>
                    </div>
                    </div>
                    &nbsp; <br/>
                subject:
                  description: Subject line of the email.
                  type: string
                  example: Share your feedback
                reminder_subject:
                  description: Subject line of the reminder email.
                  type: string
                  example: Reminder -- Share your feedback
                fromName:
                  description: Sender name to use when sending emails.
                  type: string
                  example: Forsta
                reminder_fromName:
                  description: Sender name to use when sending reminder emails.
                  type: string
                  example: Forsta
                fromAddress:
                  description: Sender email address to use when sending emails, must be an email address that the user and project has permission to send emails from.
                  type: string
                  example: invite@decipherinc.com
                reminder_fromAddress:
                  description: Sender email address to use when sending reminder emails, must be an email address that the user and project has permission to send emails from.
                  type: string
                  example: invite@decipherinc.com
                replyTo:
                  description: Reply-To email address to use when sending emails, must be a valid email address.
                  type: string
                  example: invite@decipherinc.com
                reminder_replyTo:
                  description: Reply-To email address to use when sending reminder emails, must be a valid email address.
                  type: string
                  example: invite@decipherinc.com
                styles:
                  description: Edits email styling.
                  type: object
                  properties:
                    emailBackgroundColor:
                      description: Changes the color that appears behind the framed body of the email, in the background.
                      type: string
                      example: '#002F4D'
                    emailForegroundColor:
                      description: Changes the color that appears behind the text, in the foreground.
                      type: string
                      example: red
                    linkTextColor:
                      description: Updates the color of the survey and opt-out links in the email.
                      type: string
                      example: blue
                reminder_styles:
                  description: Edits reminder email styling.
                  type: object
                  properties:
                    emailBackgroundColor:
                      description: Changes the color that appears behind the framed body of the email, in the background.
                      type: string
                      example: '#002F4D'
                    emailForegroundColor:
                      description: Changes the color that appears behind the text, in the foreground.
                      type: string
                      example: red
                    linkTextColor:
                      description: Updates the color of the survey and opt-out links in the email.
                      type: string
                      example: blue
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    description: Content of the email to use for the email campaign.
                    type: string
                  reminder:
                    description: |
                      Content of the reminder email to use for any reminder email sends.
                    type: string
                  subject:
                    description: Subject line of the email.
                    type: string
                  reminder_subject:
                    description: Subject line of the reminder email.
                    type: string
                  fromName:
                    description: Sender name to use when sending emails.
                    type: string
                  reminder_fromName:
                    description: Sender name to use when sending reminder emails.
                    type: string
                  fromAddress:
                    description: Sender email address to use when sending emails, must be an email address that the user and project has permission to send emails from.
                    type: string
                  reminder_fromAddress:
                    description: Sender email address to use when sending reminder emails, must be an email address that the user and project has permission to send emails from.
                    type: string
                  replyTo:
                    description: Reply-To email address to use when sending emails, must be a valid email address.
                    type: string
                  reminder_replyTo:
                    description: Reply-To email address to use when sending reminder emails, must be a valid email address.
                    type: string
                  styles:
                    description: Edits email styling.
                    type: object
                    properties:
                      emailBackgroundColor:
                        description: Changes the color that appears behind the framed body of the email, in the background.
                        type: string
                      emailForegroundColor:
                        description: Changes the color that appears behind the text, in the foreground.
                        type: string
                      linkTextColor:
                        description: Updates the color of the survey and opt-out links in the email.
                        type: string
                  reminder_styles:
                    description: Edits reminder email styling.
                    type: object
                    properties:
                      emailBackgroundColor:
                        description: Changes the color that appears behind the framed body of the email, in the background.
                        type: string
                      emailForegroundColor:
                        description: Changes the color that appears behind the text, in the foreground.
                        type: string
                      linkTextColor:
                        description: Updates the color of the survey and opt-out links in the email.
                        type: string
              example:
                content: |-
                  <div style="margin:0 auto;">
                  <div id="emailBody" style="min-width: 240px; max-width: 780px; display: block; margin: 0 auto; padding: 20px;">
                  <p style="text-align: left;">
                  Dear Sir or Madam,
                  <br /><br />
                  We are conducting research on your usage of our products and services.  This is your chance to make a difference in the way we do business.  Please take a moment to fill out this short survey.   Your answers will only be used in aggregate, and no personal information will be shared independent of the aggregated results.  Please be honest, as we take your answers and suggestions to heart.
                  <br /><br />
                  Click below to get started:
                  </p>
                  <p style="text-align: center;">
                  <a href="[surveyLink]">Take our survey</a><br/>
                  </p>
                  <p style="text-align: center;">
                  Research By Example | 1234 N Main St. | Anytown, CA 22313
                  </p>
                  <p style="text-align: center;">
                  <span style="font-size: 11px;">
                  If you no longer wish to receive these emails, you may unsubscribe by clicking <a
                  href="[optOutLink]">here</a>.
                  </span>
                  </p>
                  </div>
                  </div>
                  &nbsp; <br/>
                reminder: |-
                  <div style="margin:0 auto;">
                  <div id="emailBody" style="min-width: 240px; max-width: 780px; display: block; margin: 0 auto; padding: 20px;">
                  <p style="text-align: left;">
                  Dear Sir or Madam,
                  <br /><br />
                  We are conducting research on your usage of our products and services.  This is your chance to make a difference in the way we do business.  Please take a moment to fill out this short survey.   Your answers will only be used in aggregate, and no personal information will be shared independent of the aggregated results.  Please be honest, as we take your answers and suggestions to heart.
                  <br /><br />
                  Click below to get started:
                  </p>
                  <p style="text-align: center;">
                  <a href="[surveyLink]">Take our survey</a><br/>
                  </p>
                  <p style="text-align: center;">
                  Research By Example | 1234 N Main St. | Anytown, CA 22313
                  </p>
                  <p style="text-align: center;">
                  <span style="font-size: 11px;">
                  If you no longer wish to receive these emails, you may unsubscribe by clicking <a
                  href="[optOutLink]">here</a>.
                  </span>
                  </p>
                  </div>
                  </div>
                  &nbsp; <br/>
                subject: Share your feedback
                reminder_subject: Reminder -- Share your feedback
                fromName: Forsta
                reminder_fromName: Forsta
                fromAddress: invite@decipherinc.com
                reminder_fromAddress: invite@decipherinc.com
                replyTo: invite@decipherinc.com
                reminder_replyTo: invite@decipherinc.com
                styles:
                  emailBackgroundColor: '#002F4D'
                  emailForegroundColor: red
                  linkTextColor: blue
                reminder_styles:
                  emailBackgroundColor: '#002F4D'
                  emailForegroundColor: red
                  linkTextColor: blue
  /surveys/{survey}/campaigns/{listfile}/blocks:
    get:
      operationId: getSurveyCampaignBlocks
      summary: Get campaign blocks
      description: |
        Get all blocks for the given campaign including a code and reason when
        available.
      tags:
        - Campaign Exports
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/cm_listfile'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    code:
                      description: The error code for the block
                      example: '500'
                      type: string
                    email:
                      description: |
                        The recipient to whom the email that was blocked was addressed
                      example: test@example.com
                      type: string
                    reason:
                      description: A description of the reason for the block
                      example: sender ip address found on block list
                      type: string
        '403':
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error
                    example: permission denied (need cm.edit) for selfserve/53a/240300
                  $code:
                    description: The HTTP status code
                    example: 403
                  extra:
                    description: Extra information about this error if applicable
                    example: null
        '404':
          description: Campaign not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error
                    example: 'Campaign # ''1000'' not found'
                  $code:
                    description: The HTTP status code
                    example: 404
                  extra:
                    description: Extra information about this error if applicable
                    example: null
  /surveys/{survey}/campaigns/{listfile}/bounces:
    get:
      operationId: getSurveyCampaignBounces
      summary: Get campaign bounce-backs
      description: |
        Get all bounce-backs for the given campaign including a code and reason when
        available.
      tags:
        - Campaign Exports
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/cm_listfile'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    code:
                      description: The error code for the bounce
                      example: '500'
                      type: string
                    email:
                      description: |
                        The recipient to whom the email that bounced was addressed
                      example: test@example.com
                      type: string
                    reason:
                      description: A description of the reason for the bounce
                      example: unknown recipient
                      type: string
        '403':
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error
                    example: permission denied (need cm.edit) for selfserve/53a/240300
                  $code:
                    description: The HTTP status code
                    example: 403
                  extra:
                    description: Extra information about this error if applicable
                    example: null
        '404':
          description: Campaign not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error
                    example: 'Campaign # ''1000'' not found'
                  $code:
                    description: The HTTP status code
                    example: 404
                  extra:
                    description: Extra information about this error if applicable
                    example: null
  /surveys/{survey}/campaigns/{listfile}/optouts:
    get:
      operationId: getSurveyCampaignOptouts
      summary: Get campaign optouts
      description: |
        Get all global and company level optouts for email addresses in this campaign.

        Note that global optouts that match email addresses in this campaign will
        always be returned, but the global optout list is only used to suppress
        emails in a campaign if that campaign is not fully branded. If your campaign
        is fully branded, you can effectively ignore any global optouts that are
        returned, though that information may still be useful for future unbranded
        campaigns if applicable.
      tags:
        - Campaign Exports
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/cm_listfile'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    email:
                      description: The email address that opted out
                      type: string
                    list:
                      description: The list where the optout was found
                      type: string
              example:
                - email: company@example.com
                  list: selfserve/53a/remove
                - email: global@example.com
                  list: global
        '403':
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error
                    example: permission denied (need cm.edit) for selfserve/53a/240300
                  $code:
                    description: The HTTP status code
                    example: 403
                  extra:
                    description: Extra information about this error if applicable
                    example: null
        '404':
          description: Campaign not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error
                    example: 'Campaign # ''1000'' not found'
                  $code:
                    description: The HTTP status code
                    example: 404
                  extra:
                    description: Extra information about this error if applicable
                    example: null
  /surveys/{survey}/campaigns/{listfile}/spam:
    get:
      operationId: getSurveyCampaignSpam
      summary: Get campaign spam reports
      description: |
        Returns the list of unique email addresses that have reported an email from
        the given campaign as spam.
      tags:
        - Campaign Exports
      parameters:
        - $ref: '#/components/parameters/survey'
        - $ref: '#/components/parameters/cm_listfile'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    email:
                      description: |
                        The email address of the recipient who reported spam.
                      type: string
              example:
                - email: someone@example.com
                - email: another@example.com
        '403':
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error
                    example: permission denied (need cm.edit) for selfserve/53a/240300
                  $code:
                    description: The HTTP status code
                    example: 403
                  extra:
                    description: Extra information about this error if applicable
                    example: null
        '404':
          description: Campaign not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  $error:
                    description: A description of the error
                    example: 'Campaign # ''1000'' not found'
                  $code:
                    description: The HTTP status code
                    example: 404
                  extra:
                    description: Extra information about this error if applicable
                    example: null
  /surveys/{survey}/campaigns/{campaign}/list:
    get:
      operationId: getSurveyCampaignList
      summary: Get list
      description: |
        Retrieve a list or seed list for a specific campaign along with details
        for each entry in the list.

        The response will be a tab-delimited file with email, source, decSent,
        status, and extra columns. decSent will be a 1 or 0 depending on if an email
        has been sent to that recipient. The extra column will provide additional
        details on optouts and suppressions, such as which list resulted in that
        status.
      tags:
        - Campaign Lists
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: |
            The numeric campaign ID. The ID can be seen when editing the campaign or
            retrieved using the get campaigns method.
          in: path
          required: true
          schema:
            type: integer
        - name: seed
          description: |
            Pass true if you would like to retreive the seed list, or omit this
            parameter to retrieve the standard list.
          in: query
          required: false
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: OK
          content:
            text/tab-separated-values:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    email:
                      description: The email address of the recipient
                      type: string
                    source:
                      description: The unique source value for this list entry
                      type: string
                    decSent:
                      description: 1 if email has been sent to this source, 0 otherwise
                      type: integer
                    status:
                      description: The send status for this entry
                      type: string
                    extra:
                      description: Additional information about this status
                      type: string
              example: "email\tsource\tdecSent\tstatus\textra\nfoo@example.com\t123456\t1\tok\t\nbar@example.com\t234567\t1\toptout\tselfserve/53a/remove\n"
    put:
      operationId: updateSurveyCampaignList
      summary: Create/replace list
      description: |
        Create a recipient list or seed list for this campaign. If the campaign has
        an existing list, the list will be replaced.
      tags:
        - Campaign Lists
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: |
            numeric campaign ID. The ID can be seen when editing the campaign or
            retrieved using the GET method above.
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  description: |
                    either an array of JSON objects, a tab-delimited string with the
                    data (UTF-8) or a base-64 encoded Excel 97 or 2007 file with data
                    in the first sheet only
                  type: string
                seed:
                  description: |
                    if the file being created or replaced should be a seed list.
                  type: boolean
                  default: false
              required:
                - data
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/campaigns/shared:
    post:
      operationId: createSurveyCampaignShared
      summary: Create shared list
      description: |
        Upload a recipient list which will be available for campaigns in this
        survey. The recipient list is created, encrypted and immediately marked
        as "shared". Using Campaign Manager the recipient list can be assigned
        to a campaign that doesn't already have a recipient list.
      tags:
        - Shared Campaign Lists
      parameters:
        - name: survey
          description: 'path to survey. Requires Campaign Manager: Build permission.'
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  description: |
                    either an array of JSON objects, a tab-delimited string with the
                    data (UTF-8) or a base-64 encoded Excel 97 or 2007 file with data
                    in the first sheet only
                  type: string
                name:
                  description: |
                    Shared recipient list description which will be visible in
                    Campaign Manager
                  type: string
              required:
                - data
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  basename:
                    type: string
                  filename:
                    type: string
  /surveys/{survey}/campaigns/{campaign}/sends:
    get:
      operationId: getSurveyCampaignSends
      summary: Get sends
      description: Retrieve a list of sends for a specific campaign.
      tags:
        - Campaign Sends
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: |
            numeric campaign ID. The ID can be seen when editing the campaign or
            retrieved using the GET method above.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      operationId: createSurveyCampaignSend
      summary: Create a send
      description: Start a send for a specific campaign.
      tags:
        - Campaign Sends
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: |
            numeric campaign ID. The ID can be seen when editing the campaign or
            retrieved using the GET method above.
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  description: send type
                  type: string
                  enum:
                    - seed
                    - soft
                    - rest
                count:
                  description: |
                    number for participants to send (defaults to soft send maximum
                    if not specified).
                  type: integer
                when:
                  description: |
                    scheduled time in epoch format (default delay will be used
                    if not specified).
                  type: string
                reminder:
                  description: |
                    indicate reminder sends. must be used with reminderFor (not
                    required for reminder seed sends)
                  type: boolean
                reminderFor:
                  description: |
                    list of valid send_id(s) of reminders to be sent
                  type: array
                  items:
                    type: integer
                filters:
                  description: |
                    filter sends by variables in survey or campaign email list
                  type: array
                  items:
                    type: object
                suppressionListId:
                  description: add suppression email list to the send
                  type: string
                fullThrottle:
                  description: setting true turns off email throttling entirely
                  type: boolean
              required:
                - type
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/campaigns/{campaign}/sends/{send}:
    get:
      operationId: getSurveyCampaignSend
      summary: Get a send
      description: Retrieve a send for a specific campaign.
      tags:
        - Campaign Sends
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: numeric campaign ID. The ID can be seen when editing the campaign or retrieved using the GET method above.
          in: path
          required: true
          schema:
            type: string
        - name: send
          description: numeric send ID. The ID can be seen when editing the send, or retrieved using the GET method above.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
  /surveys/{survey}/campaigns/{campaign}/sends/{send}/cancel:
    post:
      operationId: createSurveyCampaignSendCancel
      summary: Cancel a send
      description: Cancel a send for a specific campaign.
      tags:
        - Campaign Sends
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: |
            numeric campaign ID. The ID can be seen when editing the campaign or
            retrieved using the GET method above.
          in: path
          required: true
          schema:
            type: string
        - name: send
          description: |
            numeric send ID. The ID can be seen when editing the send, or
            retrieved using the GET method above.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
  /surveys/{survey}/campaigns/{campaign}/list/{send}:
    get:
      operationId: getSurveyCampaignListSend
      summary: Get email status list
      description: Retrieve the status of the emails sent out on a specific send.
      tags:
        - Campaign Status Lists
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: campaign
          description: numeric campaign ID.
          in: path
          required: true
          schema:
            type: string
        - name: send
          description: numeric send ID.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
  /surveys/{survey}/campaigns/suppressions:
    get:
      operationId: getSurveyCampaignsSupressions
      summary: Get suppression lists
      description: Returns a list of available suppression lists for the specific project.
      tags:
        - Supression Lists
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    count:
                      type: integer
                    date:
                      type: string
                      format: ISO 8601 timestamp with timezone
                    suppression_id:
                      type: string
              example:
                - count: 3
                  date: '2020-05-01T18:03:50Z'
                  suppression_id: 7ZO4Xg
                - count: 10
                  date: '2020-05-05T18:04:38Z'
                  suppression_id: wmAevJ
    put:
      operationId: updateSurveyCampaignsSupression
      summary: Create suppression list
      description: Creates a list of emails to be suppressed when scheduling an email send.
      tags:
        - Supression Lists
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                emails:
                  description: array of emails to be suppressed
                  type: array
                  items:
                    type: string
                    format: email address
              required:
                - emails
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  invalid:
                    type: array
                    items:
                      type: string
                  invalid_count:
                    type: integer
                  suppression_id:
                    type: string
                  total:
                    type: integer
                  valid_count:
                    type: integer
              example:
                invalid:
                  - john@smith@example.com
                invalid_count: 1
                suppression_id: 7ZO4Xg
                total: 4
                valid_count: 3
  /surveys/{survey}/campaigns/suppressions/{suppression}:
    get:
      operationId: getSurveyCampaignsSupression
      summary: Get suppression list
      description: Returns the emails of a suppression list.
      tags:
        - Supression Lists
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: suppression
          description: suppression id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  format: email address
              example:
                - larry@example.com
                - curly@example.com
                - moe@example.com
  /libraries/{company}/elements/{eid}:
    post:
      operationId: createLibrariesCompanyElement
      summary: Add element
      description: Add a new element to the library.
      tags:
        - Company Element
      parameters:
        - name: company
          description: company ID or name
          in: path
          required: true
          schema:
            type: string
        - name: eid
          description: |
            the unique element ID of the element to upload (use `_` to generate one
            randomly)
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  description: the name/description of the element
                  type: string
                xml:
                  description: the survey XML representation of the element
                  type: string
                xml_from_label:
                  description: |
                    the label of the question in the survey to use as the xml
                    instead of specifying `xml`
                  type: string
                tags:
                  description: |
                    a list of phrases to improve search/organization of the element
                  type: string
                private:
                  description: |
                    use true to indicate the element should be private and visible
                    to the original author only
                  type: boolean
                locked:
                  description: use true to indicate this is a permanent element
                  type: boolean
                shared:
                  description: |
                    use true to indicate this element should be available to all
                    authors on a server (staff)
                  type: boolean
              required:
                - name
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  added:
                    type: object
                    properties:
                      name:
                        type: string
                        description: a description of the element
                      eid:
                        type: string
                        description: the element's id (unique per server)
                      xml:
                        type: string
                        description: the element's survey XML representation
                      type:
                        type: string
                        description: |
                          the type or class of element (e.g. radio, html, set,
                          subset (for answers))
                      tags:
                        type: array
                        description: |
                          the element's tags (e.g. short phrases to improve search)
                        items:
                          type: string
                      private:
                        type: boolean
                        description: |
                          true when the element is only accessible to the original
                          author
                      locked:
                        type: boolean
                        description: |
                          true when an element has reach a final state in development
                          and should no longer change
                      shared:
                        type: boolean
                        description: |
                          true when an element is global and available to all authors
                          on the server
                      user_id:
                        type: integer
                        description: the original author's user ID
                      user_ids:
                        type: array
                        description: the list of user IDs the element is shared with
                        items:
                          type: integer
                      group_ids:
                        type: array
                        description: the list of group IDs the element is shared with
                        items:
                          type: integer
                      id:
                        type: integer
                        description: the system ID of the element
                      uuid:
                        type: integer
                        description: the database record ID of the element
                      element_uuids:
                        type: array
                        description: a list of database record IDs of child elements
                        items:
                          type: integer
                      survey_attrs:
                        type: object
                        description: survey attributes
                      report:
                        type: string
                        format: json
                        description: reports json
    get:
      operationId: getLibrariesCompanyElement
      summary: Get element
      description: Retrieves a list containing a single library element.
      tags:
        - Company Element
      parameters:
        - description: company ID or name
          in: path
          name: company
          required: true
          schema:
            type: string
        - description: the unique element ID of the element to download
          in: path
          name: eid
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                      description: a description of the element
                    eid:
                      type: string
                      description: the element's id (unique per server)
                    xml:
                      type: string
                      description: the element's survey XML representation
                    type:
                      type: string
                      description: |
                        the type or class of element (e.g. radio, html, set,
                        subset (for answers))
                    tags:
                      type: array
                      description: |
                        the element's tags (e.g. short phrases to improve search)
                      items:
                        type: string
                    private:
                      type: boolean
                      description: |
                        true when the element is only accessible to the original
                        author
                    locked:
                      type: boolean
                      description: |
                        true when an element has reach a final state in development
                        and should no longer change
                    shared:
                      type: boolean
                      description: |
                        true when an element is global and available to all authors
                        on the server
                    user_id:
                      type: integer
                      description: the original author's user ID
                    user_ids:
                      type: array
                      description: the list of user IDs the element is shared with
                      items:
                        type: integer
                    group_ids:
                      type: array
                      description: the list of group IDs the element is shared with
                      items:
                        type: integer
                    id:
                      type: integer
                      description: the system ID of the element
                    uuid:
                      type: integer
                      description: the database record ID of the element
                    element_uuids:
                      type: array
                      description: a list of database record IDs of child elements
                      items:
                        type: integer
                    survey_attrs:
                      type: object
                      description: survey attributes
                    report:
                      type: string
                      format: json
                      description: reports json
    put:
      operationId: updateLibrariesCompanyElement
      summary: Update element
      description: Update an element in the library.
      tags:
        - Company Element
      parameters:
        - name: company
          description: company ID or name
          in: path
          required: true
          schema:
            type: string
        - name: eid
          description: the unique element ID of the element to edit
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  description: the name/description of the element
                  type: string
                tags:
                  description: |
                    a list of phrases to improve search/organization of the element
                  type: string
                private:
                  description: |
                    use true to indicate the element should be private and visible
                    to the original author only
                  type: boolean
                locked:
                  description: use true to indicate this is a permanent element
                  type: boolean
                shared:
                  description: |
                    use true to indicate this element should be available to all
                    authors on a server (staff)
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
    delete:
      operationId: deleteLibrariesCompanyElement
      summary: Delete element
      description: Remove an element from the library.
      tags:
        - Company Element
      parameters:
        - description: company ID or name
          in: path
          name: company
          required: true
          schema:
            type: string
        - description: the unique element ID of the element to remove
          in: path
          name: eid
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /libraries/{company}/elements:
    post:
      operationId: createLibrariesCompanyElements
      summary: Add elements
      description: Add new elements to the library.
      tags:
        - Company Elements
      parameters:
        - description: company ID or name
          in: path
          name: company
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                elements:
                  description: list of element objects to upload
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        description: a description of the element
                      eid:
                        type: string
                        description: the element's id (unique per server)
                      xml:
                        type: string
                        description: the element's survey XML representation
                      tags:
                        type: array
                        description: |
                          the element's tags (e.g. short phrases to improve search)
                        items:
                          type: string
                      private:
                        type: boolean
                        description: |
                          true when the element is only accessible to the original
                          author
                      locked:
                        type: boolean
                        description: |
                          true when an element has reach a final state in development
                          and should no longer change
                      shared:
                        type: boolean
                        description: |
                          true when an element is global and available to all authors
                          on the server
              required:
                - elements
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  added:
                    type: integer
                    description: number of elements added
              example:
                added: 1
    get:
      operationId: getLibrariesCompanyElements
      summary: Get elements
      description: Retrieves a list of all available survey elements.
      tags:
        - Company Elements
      parameters:
        - description: company ID or name
          in: path
          name: company
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                      description: a description of the element
                    eid:
                      type: string
                      description: the element's id (unique per server)
                    xml:
                      type: string
                      description: the element's survey XML representation
                    type:
                      type: string
                      description: |
                        the type or class of element (e.g. radio, html, set,
                        subset (for answers))
                    tags:
                      type: array
                      description: |
                        the element's tags (e.g. short phrases to improve search)
                      items:
                        type: string
                    private:
                      type: boolean
                      description: |
                        true when the element is only accessible to the original
                        author
                    locked:
                      type: boolean
                      description: |
                        true when an element has reach a final state in development
                        and should no longer change
                    shared:
                      type: boolean
                      description: |
                        true when an element is global and available to all authors
                        on the server
                    user_id:
                      type: integer
                      description: the original author's user ID
                    user_ids:
                      type: array
                      description: the list of user IDs the element is shared with
                      items:
                        type: integer
                    group_ids:
                      type: array
                      description: the list of group IDs the element is shared with
                      items:
                        type: integer
                    id:
                      type: integer
                      description: the system ID of the element
                    uuid:
                      type: integer
                      description: the database record ID of the element
                    element_uuids:
                      type: array
                      description: a list of database record IDs of child elements
                      items:
                        type: integer
                    survey_attrs:
                      type: object
                      description: survey attributes
                    report:
                      type: string
                      format: json
                      description: reports json
  /libraries/{company}/surveys/{survey}/elements:
    get:
      operationId: getLibrariesCompanySurveyElements
      summary: Get survey elements
      description: Retrieve the survey elements from a specified survey.
      tags:
        - Survey Elements
      parameters:
        - description: company ID or name
          in: path
          name: company
          required: true
          schema:
            type: string
        - description: survey to retrieve the links for.
          example: selfserve/123/140001
          in: path
          name: survey
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      description: the element type
                    xml:
                      type: string
                      format: xml
                      description: the element xml
                    children:
                      type: array
                      items:
                        type: object
                        properties:
                          type:
                            type: string
                            description: the element type
                          xml:
                            type: string
                            format: xml
                            description: the element xml
              example:
                - children:
                    - type: html
                      xml: <html label="q1">Hello</html>
                    - type: suspend
                      xml: <suspend />
                  type: block
                  xml: |
                    <block label="b1">
                        <html id="ObIIe" label="q1">Hello</html>
                        <suspend id="Z396J"/>
                      </block>
  /libraries/{company}/surveys/{survey}/report/{eid}:
    post:
      operationId: createLibrariesCompanySurveyReport
      summary: Save library report settings for a library element
      description: |
        Save library report settings based on the company, project and library
        element id.
      tags:
        - Survey Element Report Settings
      parameters:
        - name: company
          description: company ID or name
          in: path
          required: true
          schema:
            type: string
        - name: survey
          description: ''
          example: selfserve/123/140001
          in: path
          required: true
          schema:
            type: string
        - name: eid
          description: element id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                questionLabel:
                  description: ''
                  type: string
              required:
                - questionLabel
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/mls/application/data:
    get:
      operationId: getSurveyMLSApplicationData
      summary: Get Language Manager application data
      description: |
        Returns data for the Language Manager application
      tags:
        - LM Application Data
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  DUPES:
                    type: integer
                    description: number of translations with duplicates
                  PRIMARY_LANGUAGE:
                    type: string
                    description: current primary language of the survey
                  RESOURCES:
                    type: array
                    description: information about each resource's current status
                    items:
                      type: object
                      properties:
                        dupeCount:
                          type: integer
                          nullable: true
                        resource:
                          type: string
                        resourceName:
                          type: string
                        status:
                          type: array
                          items:
                            type: object
                            properties:
                              identical:
                                type: boolean
                                description: |
                                  is this translation the same as the original
                              isDisplayedInThisLanguage:
                                type: boolean
                              isPrimary:
                                type: boolean
                              language:
                                type: string
                              missing:
                                type: boolean
                                description: is this translation missing
                              outdated:
                                type: boolean
                                description: |
                                  has this resource changed, therefore making this
                                  translation outdated
                              text:
                                type: string
                  SUMMARY:
                    type: object
                    description: |
                      summary of each language present in the survey; keys are
                      language identifiers
                    additionalProperties:
                      type: object
                      properties:
                        identical:
                          type: integer
                        missing:
                          type: integer
                        name:
                          type: string
                        nameFormatted:
                          type: string
                        ok:
                          type: integer
                        outdated:
                          type: integer
                        primary:
                          type: boolean
                        qualifieds:
                          type: integer
                        total:
                          type: integer
                        version:
                          type: integer
                  SURVEY_LANGUAGE_LIST:
                    type: array
                    description: languages present in the survey
                    items:
                      type: string
                  SYS_LANGUAGES:
                    type: object
                    description: |
                      system languages available for use, mapping language identifier
                      to language name
                    additionalProperties:
                      type: string
                  UNIQUE_DUPES:
                    type: integer
                    description: number of unique duplicates
                  UNUSED_LANGUAGE_LIST:
                    type: array
                    description: languages marked as unused in this survey
                    items:
                      type: string
              example:
                DUPES: 2
                PRIMARY_LANGUAGE: english_ca
                RESOURCES:
                  - dupeCount: null
                    resource: general,name
                    resourceName: general,name
                    status:
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: false
                        language: english
                        missing: true
                        outdated: false
                        text: ''
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: true
                        language: english_ca
                        missing: false
                        outdated: false
                        text: Survey
                  - dupeCount: null
                    resource: samplesources,0,invalid
                    resourceName: samplesources,0,invalid
                    status:
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: false
                        language: english
                        missing: true
                        outdated: false
                        text: ''
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: true
                        language: english_ca
                        missing: false
                        outdated: false
                        text: You are missing information in the URL. Please verify the URL with the original invite.
                  - dupeCount: null
                    resource: samplesources,0,completed
                    resourceName: samplesources,0,completed
                    status:
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: false
                        language: english
                        missing: true
                        outdated: false
                        text: ''
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: true
                        language: english_ca
                        missing: false
                        outdated: false
                        text: It seems you have already entered this survey.
                  - dupeCount: null
                    resource: samplesources,0,inuse
                    resourceName: samplesources,0,inuse
                    status:
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: false
                        language: english
                        missing: true
                        outdated: false
                        text: ''
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: true
                        language: english_ca
                        missing: false
                        outdated: false
                        text: Our records show that you are already taking this survey. If that's not correct, please wait 15 minutes and refresh this page. Thank you.
                  - dupeCount: 2
                    resource: samplesources,0,exit:terminated,cdata
                    resourceName: samplesources,0,exit:terminated,cdata
                    status:
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: false
                        language: english
                        missing: true
                        outdated: false
                        text: ''
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: true
                        language: english_ca
                        missing: false
                        outdated: false
                        text: Thank you for taking our survey.
                  - dupeCount: null
                    resource: samplesources,0,exit:qualified,cdata
                    resourceName: samplesources,0,exit:qualified,cdata
                    status:
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: false
                        language: english
                        missing: true
                        outdated: false
                        text: ''
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: true
                        language: english_ca
                        missing: false
                        outdated: false
                        text: Thank you for taking our survey. Your efforts are greatly appreciated!
                  - dupeCount: 2
                    resource: samplesources,0,exit:overquota,cdata
                    resourceName: samplesources,0,exit:overquota,cdata
                    status:
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: false
                        language: english
                        missing: true
                        outdated: false
                        text: ''
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: true
                        language: english_ca
                        missing: false
                        outdated: false
                        text: Thank you for taking our survey.
                  - dupeCount: null
                    resource: q1,title
                    resourceName: q1,title
                    status:
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: false
                        language: english
                        missing: true
                        outdated: false
                        text: ''
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: true
                        language: english_ca
                        missing: false
                        outdated: false
                        text: New Single Select Question
                  - dupeCount: null
                    resource: q1,comment
                    resourceName: q1,comment
                    status:
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: false
                        language: english
                        missing: true
                        outdated: false
                        text: ''
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: true
                        language: english_ca
                        missing: false
                        outdated: false
                        text: Select one
                  - dupeCount: null
                    resource: q1,r1,cdata
                    resourceName: q1,r1,cdata
                    status:
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: false
                        language: english
                        missing: true
                        outdated: false
                        text: ''
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: true
                        language: english_ca
                        missing: false
                        outdated: false
                        text: 'Sample Row #1'
                  - dupeCount: null
                    resource: q1,r2,cdata
                    resourceName: q1,r2,cdata
                    status:
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: false
                        language: english
                        missing: true
                        outdated: false
                        text: ''
                      - identical: false
                        isDisplayedInThisLanguage: true
                        isPrimary: true
                        language: english_ca
                        missing: false
                        outdated: false
                        text: 'Sample Row #2'
                SUMMARY:
                  english:
                    identical: 0
                    missing: 11
                    name: english
                    nameFormatted: English
                    ok: 0
                    outdated: 0
                    primary: false
                    qualifieds: 0
                    total: 11
                    version: 0
                  english_ca:
                    identical: 0
                    missing: 0
                    name: english_ca
                    nameFormatted: English (Canada)
                    ok: 11
                    outdated: 0
                    primary: true
                    qualifieds: 0
                    total: 11
                    version: 0
                SURVEY_LANGUAGE_LIST:
                  - english_ca
                  - english
                SYS_LANGUAGES:
                  afrikaans: Afrikaans
                  albanian: Albanian
                  arabic: Arabic
                  arabic_egypt: Arabic (Egypt)
                  arabic_lebanon: Arabic (Lebanon)
                  arabic_morocco: Arabic (Morocco)
                  arabic_qatar: Arabic (Qatar)
                  arabic_saudiarabia: Arabic (Saudi Arabia)
                  arabic_uae: Arabic (UAE)
                  aus: English (Australia)
                  bulgarian: Bulgarian
                  burmese: Burmese (Myanmar)
                  canadian: French (Canada)
                  chinese: Chinese
                  croatian: Croatian
                  czech: Czech
                  danish: Danish
                  dutch: Dutch
                  dutch_belgium: Dutch (Belgium)
                  english: English
                  english_ca: English (Canada)
                  english_china: English (China)
                  english_g1: English (Generic 1)
                  english_g2: English (Generic 2)
                  english_g3: English (Generic 3)
                  english_g4: English (Generic 4)
                  english_hk: English (Hong Kong)
                  english_id: English (Indonesia)
                  english_india: English (India)
                  english_ireland: English (Ireland)
                  english_my: English (Malaysia)
                  english_nigeria: English (Nigeria)
                  english_sg: English (Singapore)
                  english_tw: English (Taiwan)
                  english_za: English (South Africa)
                  estonian: Estonian
                  finnish: Finnish
                  french: French
                  french_belgium: French (Belgium)
                  french_lu: French (Luxemborg)
                  german: German
                  german_austria: German (Austria)
                  german_lu: German (Luxemborg)
                  greek: Greek
                  hebrew: Hebrew
                  hindi: Hindi
                  hungarian: Hungarian
                  icelandic: Icelandic
                  indonesian: Indonesian
                  italian: Italian
                  japanese: Japanese
                  kannada: Kannada
                  khmer: Khmer
                  korean: Korean
                  latvian: Latvian
                  lithuanian: Lithunian
                  macedonian: Macedonian
                  malay: Malay
                  malay_sg: Malay (Singapore)
                  mongolian: Mongolian
                  norwegian: Norwegian
                  persian: Persian
                  polish: Polish
                  portuguese: Portuguese
                  portuguese_br: Portuguese (Brazil)
                  punjabi: Punjabi
                  romanian: Romanian
                  russian: Russian
                  samoan: Samoan
                  serbian: Serbian
                  simplifiedchinese: Chinese Simplified
                  simplifiedchinese_my: Simplified Chinese (Malaysia)
                  simplifiedchinese_sg: Simplified Chinese (Singapore)
                  slovak: Slovak
                  slovene: Slovene
                  slovenian: Slovenian
                  spanish: Spanish
                  spanish_argentina: Spanish (Argentina)
                  spanish_brazil: Spanish (Brazil)
                  spanish_chile: Spanish (Chile)
                  spanish_colombia: Spanish (Colombia)
                  spanish_ecuador: Spanish (Ecuador)
                  spanish_eu: Spanish (EU)
                  spanish_latin: Spanish (Latin America)
                  spanish_mexico: Spanish (Mexico)
                  spanish_peru: Spanish (Peru)
                  spanish_south: Spanish (South America)
                  spanish_venezuela: Spanish (Venezuela)
                  swahili: Swahili
                  swedish: Swedish
                  tagalog: Tagalog
                  tamil: Tamil
                  telugu: Telugu
                  thai: Thai
                  tongan: Tongan
                  traditionalchinese: Chinese Traditional
                  traditionalchinese_tw: Traditional Chinese (Taiwan)
                  turkish: Turkish
                  uk: English (UK)
                  ukrainian: Ukrainian
                  vietnamese: Vietnamese
                UNIQUE_DUPES: 1
                UNUSED_LANGUAGE_LIST: []
  /surveys/{survey}/mls/application/translations:
    put:
      operationId: updateSurveyMLSApplicationTranslations
      summary: Update app translations
      description: Updates translations for Language Manager application.
      tags:
        - LM Application Translations
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                resourceTranslations:
                  type: array
                  items:
                    type: object
                    properties:
                      language:
                        type: string
                      text:
                        type: string
                      resources:
                        type: array
                        items:
                          type: string
              required:
                - resourceTranslations
              example:
                resourceTranslations:
                  - language: french
                    text: Translated title text
                    resources:
                      - q2,title
                  - language: french
                    text: Translated row 1 text
                    resources:
                      - q2,r1,cdata
                  - language: french
                    text: Translated row 2 text
                    resources:
                      - q2,r2,cdata
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  resourceTranslations:
                    type: array
                    items:
                      type: object
                      properties:
                        language:
                          type: string
                        text:
                          type: string
                        resources:
                          type: array
                          items:
                            type: string
  /surveys/{survey}/mls/translation/{resource}:
    put:
      operationId: updateSurveyMLSTranslationResource
      summary: Update translation
      description: Updates a single translation resource
      tags:
        - Translation Resources
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: resource
          description: resource to be translated
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                lang:
                  description: target language for the translation
                  type: string
                text:
                  description: translated resource
                  type: string
              required:
                - lang
                - text
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /translation:
    post:
      operationId: createTranslation
      summary: Post translations
      description: |
        Add in translations for a specified survey and language.  When translations
        are added any reservation for that survey and language combination are
        removed. NOTE: if sourceString no longer matches the text in XML, the
        translation will be accepted but the ID will appear in the "oudated" output
        array.
      tags:
        - Translations
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                targetLanguages:
                  description: |
                    An array containing a string of the language to be translated
                  type: array
                  items:
                    type: string
                requests:
                  description: |
                    A list of objects containing a document id and a list of elements.
                  type: array
                  items:
                    type: object
                    properties:
                      documentId:
                        type: string
                        format: survey path
                      elements:
                        type: array
                        items:
                          type: object
                          properties:
                            elementId:
                              type: string
                            sourceString:
                              type: string
                            targetString:
                              type: string
                postbackJobId:
                  description: |
                    The jobId for the reservation that was created for this document.
                  type: string
                aggregateDupes:
                  description: |
                    Defaults to false. Set to true if dupes were aggregated
                    when pulling translations.
                  type: boolean
              required:
                - targetLanguages
                - requests
                - postbackJobId
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  changed:
                    type: integer
                  identical:
                    type: integer
                  invalid_label:
                    type: array
                    items:
                      type: string
                  outdated:
                    type: array
                    items:
                      type: string
              example:
                changed: 10
                identical: 0
                invalid_label: []
                outdated: []
    get:
      operationId: getTranslation
      summary: Get translations
      description: |
        Translations are returned for the first survey found or the one
        specified by `start`. A `lastRetrievedId` argument is returned with the
        result that can be specified as the start to get translations for the
        next survey.

        This endpoint can gather translations for multiple surveys but requires the
        survey attribute `tapiDue`.
      tags:
        - Translations
      parameters:
        - name: start
          description: |
            If specified, translations for the survey provided will be returned
            otherwise it will be the first survey found
          in: query
          required: false
          schema:
            type: string
        - name: paths
          description: |
            An array of paths to include. If not provided all surveys with
            tapiDue set are considered. tapiDue is set as a survey attribute
            (not an API param) using the date format: `tapiDue="2023-09-13"`

            The date within the survey attribute is relatively arbitrary but may
            help prioritize what gets translated first.
          in: query
          required: false
          schema:
            type: array
        - name: aggregateDupes
          description: |
            Defaults to false. Set to true if duplicate translations should
            only appear once.
          in: query
          required: false
          schema:
            type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  expectedDueDate:
                    type: integer
                    format: unix timestamp
                  lastRetrievedId:
                    type: string
                    format: survey path
                  postbackJobId:
                    type: string
                  projectId:
                    type: string
                  requests:
                    type: array
                    items:
                      type: object
                      properties:
                        documentId:
                          type: string
                          format: survey path
                        elements:
                          type: array
                          items:
                            type: object
                            properties:
                              elementId:
                                type: string
                              sourceString:
                                type: string
                              targetString:
                                type: string
                        icuFormat:
                          type: boolean
                  schemaId:
                    type: string
                  sourceLanguage:
                    type: string
                  targetLanguages:
                    type: array
                    items:
                      type: string
              example:
                expectedDueDate: 1355270400
                lastRetrievedId: selfserve/53a/171202
                postbackJobId: abc123
                projectId: abc123
                requests:
                  - documentId: selfserve/53a/171201
                    elements:
                      - elementId: samplesources,1,invalid
                        sourceString: The URL above does not include the proper information to be included in this survey. Please review your invite email for the proper URL, and contact the individual specified if problems persist.
                        targetString: The URL above does not include the proper information to be included in this survey. Please review your invite email for the proper URL, and contact the individual specified if problems persist.
                      - elementId: samplesources,1,completed
                        sourceString: Thank you for your interest but it seems you have already finished this survey.
                        targetString: Thank you for your interest but it seems you have already finished this survey.
                      - elementId: samplesources,1,inuse
                        sourceString: Our records show that you are already taking this survey. If that's not correct, please wait 15 minutes and refresh this page. Thank you.
                        targetString: Our records show that you are already taking this survey. If that's not correct, please wait 15 minutes and refresh this page. Thank you.
                    icuFormat: false
                schemaId: v1
                sourceLanguage: en-US
                targetLanguages: []
  /translation/delta:
    get:
      operationId: getTranslationDelta
      summary: Get translation delta
      description: |
        Return any untranslated (or outdated) unreserved resources translations
        for a survey
      tags:
        - Translation Deltas
      parameters:
        - name: start
          description: If specified, translations for the survey provided will be returned otherwise it will be the first survey found
          in: query
          required: false
          schema:
            type: string
        - name: paths
          description: An array of paths to include. If not provided all surveys with tapiDue set are considered
          in: query
          required: false
          schema:
            type: array
        - name: aggregateDupes
          description: Defaults to false. Set to true if duplicate translations should only appear once.
          in: query
          required: false
          schema:
            type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  schemaId:
                    type: string
                  expectedDueDate:
                    type: string
                  sourceLanguage:
                    type: string
                  targetLanguages:
                    type: array
                    items:
                      type: string
                  projectId:
                    type: string
                  postbackJobId:
                    type: string
                  requests:
                    type: array
                    items:
                      type: object
                      properties:
                        documentId:
                          type: string
                        icuFormat:
                          type: boolean
                        elements:
                          type: array
                          items:
                            type: object
                            properties:
                              elementId:
                                type: string
                              sourceString:
                                type: string
                              targetString:
                                type: string
  /translation/delta/reservation:
    get:
      operationId: getTranslationDeltaReservations
      summary: Get translation reservations
      description: Returns active reservations
      tags:
        - Translation Reservations
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ackDatas:
                    type: array
                    items:
                      type: object
                      properties:
                        jobId:
                          type: string
                        targetLanguages:
                          type: array
                          items:
                            type: string
                        requests:
                          type: array
                          items:
                            type: object
                            properties:
                              documentId:
                                type: string
              example:
                ackDatas:
                  - requests:
                      - documentId: selfserve/53a/171200
                      - documentId: selfserve/53a/171201
                    targetLanguages:
                      - es
                      - ja
                    jobId: 01e80a5cb03e4aa19521513c57e91f08
                  - requests:
                      - documentId: selfserve/53a/171202
                    targetLanguages:
                      - ar-LB
                    jobId: 1195619ab8854e3ca81b593183edd398
    post:
      operationId: createTranslationDeltaReservation
      summary: Add translation reservation
      description: Add a new reservation
      tags:
        - Translation Reservations
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                ackDatas:
                  type: array
                  items:
                    type: object
                    properties:
                      targetLanguages:
                        type: array
                        description: an array of languages to be reserved
                        items:
                          type: string
                      requests:
                        type: array
                        description: |
                          an array of objects with documentId which should be the
                          path to the survey
                        items:
                          type: object
                          properties:
                            documentId:
                              type: string
                              format: survey path
                      jobId:
                        type: string
                        description: a unique jobId to identify the reservation
              required:
                - ackDatas
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    targetLanguages:
                      type: array
                      items:
                        type: string
                    requests:
                      type: array
                      items:
                        type: object
                        properties:
                          documentId:
                            type: string
                    jobId:
                      type: string
              example:
                - targetLanguages:
                    - es
                  requests:
                    - documentId: selfserve/53a/170201
                  jobId: e724ce5c5b8b4eb08e50dda26ee89aac
  /translation/delta/reservation/delete:
    post:
      operationId: createTranslationDeltaReservationsDelete
      summary: Delete translation reservation
      description: Delete reservations by their jobIds
      tags:
        - Translation Reservations
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  description: A reason for the reservation cancellation
                  type: string
                cancelledBy:
                  description: Who is canceling this reservation
                  type: string
                jobIds:
                  description: An array of jobIds to cancel
                  type: array
                  items:
                    type: string
              required:
                - reason
                - cancelledBy
                - jobIds
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/mls/languages/primary/{lang}:
    put:
      operationId: updateSurveyMLSLanguagesPrimary
      summary: Update primary language
      description: Changes the surveys primary language.
      tags:
        - Primary Survey Language
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: lang
          description: language to set as the primary language of the project
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/mls/languages/{lang}:
    put:
      operationId: updateSurveyMLSLanguage
      summary: Put
      description: Adds a language to the survey (otherLanguages)
      tags:
        - Other Survey Languages
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: lang
          description: language to add to the survey
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
    delete:
      operationId: deleteSurveyMLSLanguage
      summary: Delete
      description: Removes a language from the survey (otherLanguages)
      tags:
        - Other Survey Languages
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: lang
          description: language to remove from the survey
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/mls/languages/unused/{lang}:
    put:
      operationId: updateSurveyMLSLanguagesUnused
      summary: Put
      description: Marks a language as unused (unusedLanguages)
      tags:
        - Unused Survey Languages
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: lang
          description: language to set as unused
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
    delete:
      operationId: deleteSurveyMLSLanguagesUnused
      summary: Delete
      description: Restores a language previously marked as 'unused' (unusedLanguages)
      tags:
        - Unused Survey Languages
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: lang
          description: language to remove from unused languages
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /parameters/list/{survey}:
    get:
      operationId: getParametersListSurvey
      summary: Get available project parameters
      description: |
        Returns an object of available project parameters. Requires survey edit
        or data edit permission for the project.
      tags:
        - Available Project Parameters
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /parameters/{survey}:
    get:
      operationId: getParametersSurvey
      summary: Get saved project parameters
      description: |
        Returns an object of saved project parameters. Requires survey edit or data
        edit permission for the project.
      tags:
        - Saved Project Parameters
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /parameters/validate/{survey}:
    get:
      operationId: getParametersValidateSurvey
      summary: Validate saved project parameters
      description: |
        Validates saved project parameters and returns an array of errors.
        Requires survey edit or data edit permission for the project.
      tags:
        - Saved Project Parameters
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    label:
                      type: string
                    title:
                      type: string
                    error:
                      type: string
  /parameters/update/{survey}:
    put:
      operationId: updateParametersUpdateSurvey
      summary: Update saved project parameters
      description: |
        Sends an object of selected project parameters. Requires survey edit or data
        edit permission for the project.
      tags:
        - Saved Project Parameters
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                parameters:
                  description: project parameters
                  type: object
              required:
                - parameters
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /parameters/config:
    post:
      operationId: createParametersConfig
      summary: Set project parameters configuration
      description: |
        Set project parameters configuration to a company/subdirectory folder.
        Requires supervisor access.
      tags:
        - Project Parameters Configuration
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                company:
                  description: company name
                  type: string
                subdirectory:
                  description: subdirectory name
                  type: string
                parameters:
                  description: project parameters configuration
                  type: string
              required:
                - company
                - parameters
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /parameters/disable:
    put:
      operationId: updateParametersConfig
      summary: Disable project parameters configuration
      description: Disable project parameters configuration. Requires supervisor access.
      tags:
        - Project Parameters Configuration
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                company:
                  description: company name
                  type: string
                subdirectory:
                  description: subdirectory name
                  type: string
                disabled:
                  description: disable project parameters
                  type: boolean
              required:
                - company
                - disabled
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/sections:
    get:
      operationId: getSurveySections
      summary: Get survey sections
      description: |
        Returns a list of survey sections available for multi-user editing.
      tags:
        - Available Sections
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    builder_path:
                      description: Path to the section's temporary directory used by the Survey Editor.
                      example: 53a/210203/temp-subsection-b1
                      type: string
                    checked_out:
                      description: Date and time when survey was last updated.
                      format: ISO 8601 timestamp with timezone
                      example: '2021-06-11T21:01:36Z'
                      type: string
                    editor:
                      description: Name or email address of the user who performed a check out or edited the section.
                      example: Jane Doe
                      type: string
                    is_available:
                      description: True if a section is available for check out.
                      example: false
                      type: boolean
                    label:
                      description: Label for the section (i.e. block element).
                      example: b1
                      type: string
                    path:
                      description: Path to the section's temporary directory.
                      example: selfserve/53a/210203/temp-subsection-b1
                      type: string
                    title:
                      description: Section's (i.e. block element) title.
                      example: My Block
                      type: string
                    updates:
                      description: True if there have been any updates to the main survey while this section is checked out.
                      example: false
                      type: boolean
  /surveys/{survey}/sections/{section}/checkin:
    post:
      operationId: createSurveySectionCheckin
      summary: Check in survey section
      description: |
        Merge checked out section of survey into main survey.
      tags:
        - Check In Section
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: section
          in: path
          description: Label for the section (i.e. block) to check in.
          example: b1
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  checked_in:
                    description: Date and time when survey was last updated, after checking in.
                    format: ISO 8601 timestamp with timezone
                    example: '2021-06-22T21:47:47Z'
                    type: string
                  checked_out:
                    description: |
                      Date and time when survey was last updated.
                      Always `null` for this endpoint.
                    example: null
                    type: string
                  checked_out_sections:
                    description: List of sections that are checked out.
                    type: array
                    items:
                      type: object
                      properties:
                        builder_path:
                          type: string
                        checked_out:
                          type: string
                        editor:
                          type: string
                        is_available:
                          type: boolean
                        label:
                          type: string
                        path:
                          type: string
                        title:
                          type: string
                        updates:
                          type: string
                    example:
                      - builder_path: 53a/210203/temp-subsection-b2
                        checked_out: '2021-06-22T21:22:35Z'
                        editor': Jane Doe
                        is_available: false
                        label: b2
                        path: selfserve/53a/210203/temp-subsection-b2
                        title: Block two
                        updates: true
                  disableSections:
                    description: Number of checked out sections for the survey.
                    example: 3
                    type: integer
                  editor:
                    description: |
                      `null` if the operation was successful.
                      Name or email address of the editor user if there were errors while syncing with the main survey.
                    example: null
                    type: string
                  errors:
                    description: List of errors found if the operation was not successful.
                    example: []
                    type: array
                  is_available:
                    description: True if the section is available for check out again.
                    example: true
                    type: boolean
                  success:
                    description: True if the operation completed without errors.
                    example: true
                    type: boolean
                  title:
                    description: Section's (i.e. block element) title.
                    example: Block One
                    type: string
                  updates:
                    description: |
                      True if there have been any updates to the main survey. Can be false or null.
                      Always `null` for this endpoint.
                    example: null
                    type: string
  /surveys/{survey}/sections/{section}/checkout:
    post:
      operationId: createSurveySectionCheckout
      summary: Check out survey section
      description: |
        Make temp copy of survey (xml only) to edit the section labeled with `section` argument.
      tags:
        - Check Out Section
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: section
          in: path
          description: Label for the section (i.e. block) to check out.
          example: b1
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  checked_out:
                    description: Date and time when survey was last updated.
                    format: ISO 8601 timestamp with timezone
                    example: '2021-06-22T20:42:05Z'
                    type: string
                  editor:
                    description: Name or email address of the user who checked out the section.
                    example: Jane Doe
                    type: string
                  is_available:
                    description: True if the section is available for check out.
                    example: false
                    type: boolean
                  updates:
                    description: True if there have been any updates to the main survey. Can be false or null.
                    example: false
                    type: boolean
  /surveys/{survey}/sections/{section}/editor:
    get:
      operationId: getSurveySectionEditor
      summary: Get section's editor
      description: |
        Get section editor's name or email address if no name is registered.
      tags:
        - Section Editor
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: section
          in: path
          description: Label for the section.
          example: b1
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  email:
                    description: Editor's name or email address.
                    example: Jane Doe
                    type: string
                  last_activity:
                    description: Date and time of editor's latest action (check in or check out).
                    format: ISO 8601 timestamp with timezone
                    example: '2021-06-22T21:48:59Z'
                    type: string
  /surveys/{survey}/sections/{section}/revert:
    post:
      operationId: createSurveySectionRevert
      summary: Abandon section changes
      description: |
        Abandon changes to a block.
      tags:
        - Abandon Section
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: section
          in: path
          description: Section with changes you'd like to abandon.
          example: b1
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  checked_in:
                    description: |
                      Date and time when survey was last updated.
                      Always `null` for this endpoint.
                    example: null
                    type: string
                  checked_out:
                    description: |
                      Date and time when survey was last updated.
                      Always `null` for this endpoint.
                    example: null
                    type: string
                  disableSections:
                    description: Number of checked out sections for the survey.
                    example: 3
                    type: integer
                  editor:
                    description: Editor's name or email address. Always `null` for this endpoint.
                    example: null
                    type: string
                  is_available:
                    description: True if the section is available for check out. Always true for this endpoint.
                    example: true
                    type: boolean
                  reverted:
                    description: Date and time when survey was last updated.
                    format: ISO 8601 timestamp with timezone
                    example: '2021-06-23T06:00:15Z'
                    type: string
  /surveys/{survey}/sections/{section}/sync:
    post:
      operationId: createSurveySectionSync
      summary: Sync section to main survey
      description: |
        Merge main survey into checked out copy.
      tags:
        - Sync Section
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: section
          in: path
          description: Section you'd like to merge your main survey into.
          example: b1
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  checked_out:
                    description: Date and time when survey was last updated.
                    format: ISO 8601 timestamp with timezone
                    example: '2021-06-23T06:13:22Z'
                    type: string
                  errors:
                    description: List of errors if the operation wasn't successful.
                    example: []
                    type: array
                  success:
                    description: |
                      True if the operation was successful.
                      False if there were errors while trying to merge.
                    example: true
                    type: boolean
                  updates:
                    description: |
                      True if there were changes to the main survey.
                      Always false for this endpoint.
                    example: false
                    type: boolean
  /surveys/{survey}/sections/{section}/validate:
    get:
      operationId: getSurveySectionValidate
      summary: Validate survey section
      description: |
        Run validations for specified survey section.
      tags:
        - Validate Section
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: section
          in: path
          description: Label of the section you'd like to validate.
          example: b1
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    description: List of errors if validation fails.
                    example: []
                    type: array
                  isValid:
                    description: True if validation is successful.
                    example: true
                    type: boolean
                  path:
                    description: Path for section's temporary directory.
                    example: selfserve/53a/210203/temp-subsection-b1
                    type: string
                  success:
                    description: True if the operation completed successfully.
                    example: true
                    type: boolean
  /surveys/{survey}/videos:
    get:
      operationId: getSurveyVideos
      summary: Get videos
      description: Get the list of all video files.
      tags:
        - Videos
      parameters:
        - $ref: '#/components/parameters/survey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    description:
                      type: string
                    filename:
                      type: string
                    keep:
                      type: boolean
                    privacy:
                      type: string
                    status:
                      type: string
                    video_id:
                      type: string
                    watermarked:
                      type: boolean
                    watermarked_quantity:
                      type: integer
              example:
                - description: Video Description
                  filename: filename.mp4
                  keep: true
                  privacy: company
                  status: processing
                  video_id: '93472979349'
                  watermarked: false
                  watermarked_quantity: 0
                - description: Video Description
                  filename: filename.mp4
                  keep: false
                  privacy: project
                  status: processing
                  video_id: '43597293'
                  watermarked: true
                  watermarked_quantity: 50
    post:
      operationId: createSurveyVideo
      summary: Upload video file
      description: ''
      tags:
        - Videos
      parameters:
        - $ref: '#/components/parameters/survey'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                source:
                  description: |
                    This is the URL (must include filename and extension) to upload.
                  type: string
                description:
                  description: |
                    The video description that will be displayed in file manager.
                    Defaults to the filename if not supplied.
                  type: string
                privacy:
                  description: |
                    Where the videos will be displayed in file manager.

                    + `project`: shows only to the project it was uploaded to.
                    + `company`: shows to all projects in the user's company.
                  default: project
                  type: string
                  enum:
                    - project
                    - company
                unique_watermarks:
                  description: |
                    should the video be processed with burned-in watermarking?
                  default: false
                  type: boolean
                quantity:
                  description: |
                    If `unique_watermarks` is true, this sets the number of unique
                    videos that will be created. Must be between 1 and 10,000.
                  type: integer
                unique_watermark_options:
                  description: Customizations to the watermark.
                  type: object
                  properties:
                    position:
                      description: Position of the watermark on the video.
                      default: middle center
                      type: string
                      enum:
                        - top left
                        - top center
                        - top right
                        - middle left
                        - middle center
                        - middle right
                        - bottom right
                        - bottom center
                        - bottom left
                    color:
                      description: |
                        Color of the watermarked text

                        Acceptable Formats:

                        + HEX `#FFFFFF`
                        + RGB/A `rgb(0, 0, 0) rgba(255, 255, 255, 128)`
                        + HSL `hsl(0, 100%, 50%)`
                        + Common HTML colors `red`, `yellow`, `green`, etc.
                      default: rgba(255, 255, 255, 64)
                      type: string
                    size:
                      description: |
                        Size of the watermark as a percentage of the video width
                        in increments of 10.
                      default: 70%
                      type: string
                      enum:
                        - 10%
                        - 20%
                        - 30%
                        - 40%
                        - 50%
                        - 60%
                        - 70%
                        - 80%
                        - 90%
                        - 100%
              required:
                - source
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  video_id:
                    type: string
              example:
                video_id: '93472979349'
  /surveys/{survey}/videos/{video_id}:
    get:
      operationId: getSurveyVideo
      summary: Get video
      description: Get an individual video.
      tags:
        - Videos
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: video_id
          description: ID of the video to retrieve.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  description:
                    type: string
                  filename:
                    type: string
                  keep:
                    type: boolean
                  privacy:
                    type: string
                  quantity:
                    type: integer
                  ready:
                    type: integer
                  status:
                    type: string
                  video_id:
                    type: string
                  watermarked:
                    type: boolean
              example:
                description: Video Description
                filename: filename.mp4
                keep: false
                privacy: company
                quantity: 100
                ready: 75
                status: processing
                video_id: '93472979349'
                watermarked: true
    put:
      operationId: updateSurveyVideo
      summary: Increase unique watermarked videos
      description: Increases the number of unique videos
      tags:
        - Watermarked Videos
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: video_id
          description: The ID of the video to update.
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                quantity:
                  description: |
                    The new total number of unique videos. Difference between old and
                    new quantities cannot exceed 10,000 (i.e., only 10,000 more can
                    be requested at a time.)
                  type: string
                keep:
                  description: |
                    If true then the video will be flagged so as it is not deleted
                    by the cleanup scripts.
                  type: boolean
                privacy:
                  description: |
                    Set this to change the privacy level of the video.
                  type: string
                  enum:
                    - unused
                    - survey
                    - company
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/videos/{video_id}/create_db_file:
    post:
      operationId: createSurveyVideoCreateDBFile
      summary: Create watermark file
      description: |
        Create a file containing a single column of `{video_id}.{watermark_id}`,
        which the Video Player DQ uses to uniquely assign videos to participants.
      tags:
        - Watermarked Videos
      parameters:
        - $ref: '#/components/parameters/survey'
        - description: ID of the watermarked video.
          in: path
          name: video_id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  database_file:
                    type: string
              example:
                database_file: watermark_videos_12323543345.txt
  /surveys/{survey}/videos/{video_id}/watermark_videos:
    get:
      operationId: getSurveyVideosWatermarkVideos
      summary: List watermarked videos
      description: Get the list of watermarks and video IDs.
      tags:
        - Watermarked Videos
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: video_id
          description: ID of the watermarked video to retrieve.
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    video_id:
                      type: string
                    watermark_id:
                      type: string
                example:
                  - video_id: '93472979349'
                    watermark_id: 87fg8gd8
                  - video_id: '93472979349'
                    watermark_id: 87fg8gd8
  /sysinfo:
    get:
      operationId: getSysinfo
      summary: Get system information
      description: |
        Retrieve interesting data about the current version of Beacon software as
        well as the hardware. Requires Staff.
      tags:
        - System Information
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  autoDeploy:
                    type: boolean
                    description: flag that informs whether the deployment is automatic
                  timezone:
                    type: string
                    description: server timezone
                  appliedDefaults:
                    type: array
                    description: Values that were set from default system metadata values
                  production:
                    type: boolean
                    description: flag that informs if is production server
                  lastDeploy:
                    type: string
                    description: the date of the last deployment
                  changeset:
                    type: string
                    description: |
                      internal version control ID describing the exact software
                      version
                  clientContact:
                    type: string
                    description: who at the client is responsible for the server
                  client:
                    type: string
                    description: |
                      Name of the client (i.e. company we run this Beacon instance
                      for)
                  cloudfront:
                    type: string
                    description: URL of the Amazon Cloudfront host used if any
                  coordinates:
                    type: array
                    items:
                      type: number
                    description: latitude and longitude for the server's location
                  cpuCount:
                    type: integer
                    description: number of virtual CPUs
                  cpu:
                    type: string
                    description: CPU used in the server
                  datacenter:
                    type: string
                    description: the codename for ISP's datacenter
                  decipherContact:
                    type: string
                    description: |
                      who at Decipher is responsible for the server (typically
                      account manager)
                  development:
                    type: boolean
                    description: is this a development instance?
                  disk:
                    type: object
                    description: disk space available on disks used by Beacon.
                    properties:
                      bytes:
                        type: integer
                      freeInodes:
                        type: integer
                      freeBytes:
                        type: integer
                  evalErrors:
                    type: string
                    description: email address for delivering survey-level errors
                  geoip:
                    type: boolean
                    description: Does this server have a geoIP license?
                  hostname:
                    type: string
                    description: internal host name
                  hostmap:
                    type: string
                    description: |
                      A space-separated list of additional hostnames that support valid 
                      HTTPS connections to this server.
                  instance:
                    type: string
                    description: |
                      The instance is the instance you're currently interacting with,
                      typically always "v2"
                  instances:
                    type: string
                    description: List of all the instances on the given server
                  isp:
                    type: string
                    description: |
                      Name of the ISP used to host the server (e.g. "Rackspace")
                  MAX_COMPAT:
                    type: integer
                    description: maximum compat level for surveys
                  memoryFree:
                    type: integer
                    description: Free memory (unused memory plus buffers and cache)
                  memoryTotal:
                    type: integer
                    description: Total amount of installed memory (in kiloBytes)
                  oauth2:
                    type: boolean
                    description: Is Oauth2 authentication enabled?
                  protos:
                    type: boolean
                    description: is the PRO-T-S system enabled?
                  release:
                    type: integer
                    description: release number (e.g. Beacon 25 is returned as 25)
                  saml:
                    type: boolean
                    description: Is SAML2 authentication enabled?
                  secure:
                    type: string
                    description: base secure URL (normally the https version of url)
                  systemErrors:
                    type: string
                    description: email address for delivering system-level errors
                  uglify:
                    type: boolean
                    description: |
                      post-process Javascript files using jsuglify to optimize them
                  url:
                    type: string
                    description: base URL prefixed to any pages such as /survey
              example:
                changeset: 20cff65b27677f4268752038f3e638315221845b
                secure: https://yourserver.example.com
                evalErrors: hermes-eval-errors@decipherinc.com
                decipherContact: helpdesk@decipherinc.com
                MAX_COMPAT: 146
                instances: main
                protos: true
                hostname: yourserver.example.com
                disk:
                  /home/hermes/v2:
                    bytes: 127990572777472
                    freeInodes: 4882132894
                    freeBytes: 110302574149632
                uglify: true
                saml: false
                coordinates:
                  - 41.9932891
                  - -87.9577367
                instance: v2
                systemErrors: hermes-system-errors@decipherinc.com
                development: false
                cloudfront: yourserver.surveyfiles.com
                hostmap: survey.nocompany.com survey.example.com
                cpuCount: 8
                datacenter: ORD
                oauth2: true
                url: http://yourserver.example.com
                geoip: true
                memoryTotal: 6092576
                isp: Rackspace
                client: Your Company
                memoryFree: 5509596
                release: 46
                cpu: Intel(R) Core(TM) i9-9880H CPU @ 2.30GHz
                clientContact: helpdesk@example.com
                autoDeploy: false
                timezone: PDT
                appliedDefaults: []
                production: false
                lastDeploy: Wed Jun 18 09:59:19 2025
    put:
      operationId: updateSysinfo
      summary: Update system information
      description: |
        This can be used to modify the configurable settings such as client name,
        client contact etc.
      tags:
        - System Information
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                values:
                  description: |
                    object containing the new values. Values not referenced are left
                    unchanged.
                  type: object
              required:
                - values
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /sysinfo/config:
    get:
      operationId: getSysinfoConfig
      summary: Get system configuration
      description: |
        Retrieve relevant configuration settings from the server
      tags:
        - System Information
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  STRIKES:
                    type: integer
                    description: Number of times a client can exceed spam rating for a list before the client is blocked.
                    example: 3
                  dateFormat:
                    type: string
                    description: Default date format for data downloads.
                    example: '%m/%d/%Y %H:%M'
                  enableCachedVersioning:
                    type: boolean
                    description: Rewrites static URLs to a subdirectory with no expiry.
                    example: false
                  errorTargetEval:
                    type: string
                    description: Mailing list for survey errors.
                    example: eval-errors@mail.com
                  errorTargetSystem:
                    type: string
                    description: Mailing list for survey errors.
                    example: system-errors@mail.com
                  maxReportMemory:
                    type: integer
                    description: A limit on virtual memory usage per process is imposed.
                    example: 8000
                  maxSurveyMemory:
                    type: integer
                    description: A limit on virtual memory usage that applies to survey processes only.
                    example: 4000
                  rebrandCname:
                    type: object
                    description: Maps domains to the directory name containing an nstyles file to use for rebranding.
                    example: {}
                  retention.audit.performance:
                    type: integer
                    description: Internal performance storage retention.
                    example: 180
                  retention.audit.respondent:
                    type: integer
                    description: Respondent accounting data retention.
                    example: 1095
                  retention.survey.abandoned:
                    type: integer
                    description: A survey that has been abandoned in the UI. Its directory is archived after this number of days.
                    example: 21
                  retention.survey.archived:
                    type: integer
                    description: Files archived are erased after this number of days. Set to None to disable
                    example: 365
                  retention.survey.data_mode_only:
                    type: integer
                    description: Number of days to retain data mode (no xml) surveys.
                    example: 1
                  retention.survey.deleted_data:
                    type: integer
                    description: Number of days to retain deleted respondent data in Delphi surveys.
                    example: 30
                  retention.survey.main:
                    type: integer
                    description: Number of days after which a non-temporary survey CAN be archived.
                    example: 270
                  retention.survey.state.complete:
                    type: integer
                    description: For Delphi surveys, retain completed data records for this number of days.
                    example: 21
                  retention.survey.state.partial:
                    type: integer
                    description: For Delphi surveys only, how long to retain non-final state for partial respondents.
                    example: 90
                  retention.survey.temp_directories:
                    type: integer
                    description: Number of days after which a temporary survey CAN be archived.
                    example: 21
                  retention.survey.unsent_lists:
                    type: integer
                    description: Number of days to retain unsent bulk email lists.
                    example: 30
                  secureHostMap:
                    type: object
                    description: Domains with https support.
                    example: {}
                  sharedUsersCanWrite:
                    type: boolean
                    description: Set to True to enable granting write access to a shared user to a project.
                    example: false
                  unsafeQuote:
                    type: boolean
                    description: Interpolating extra variables in Python code quotes them by default. Setting this to True allows legacy unsafe behaviour.
                    example: false
                  userRetentionDays:
                    type: integer
                    description: Users that do not login after this number of days are disabled.
                    example: 180
  /surveys/{survey}/logic/{label}/trigger:
    post:
      operationId: createSurveyLogicTrigger
      summary: Trigger logic node
      description: Run the code associated with this logic node.
      tags:
        - Logic Nodes
      parameters:
        - name: survey
          description: survey to trigger in. You must be able to edit the survey to trigger the action
          in: path
          required: true
          schema:
            type: string
        - name: label
          description: label of the logic to trigger
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reschedule:
                  description: |
                    after triggering, reschedule a periodic logic to its next
                    execution time. Internal use only.
                  default: false
                  type: boolean
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /surveys/{survey}/logic/{label}/debug:
    get:
      operationId: getSurveyLogicDebug
      summary: Debug logic node
      description: Retrieve a list of debug messages for a given logic node.
      tags:
        - Logic Nodes
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: label
          description: Label of the logic node
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    uuid:
                      type: string
                    label:
                      type: string
                    tstamp:
                      type: string
                      format: ISO 8601 timestamp with timezone
                    content:
                      type: string
  /schedule:
    get:
      operationId: getSchedule
      summary: Get logic events
      description: |
        Retrieve an array of events scheduled for any survey that you are able to
        access. Those events can only be created by logic nodes.
      tags:
        - Logic Events
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    retries:
                      type: integer
                      description: |
                        number of times execution of this event has been retried due
                        to some API error
                    completed:
                      type: boolean
                      description: |
                        true if that item has been completed, false if it was
                        scheduled
                    tstamp:
                      type: string
                      format: ISO 8601 timestamp with timezone
                      description: |
                        the timestamp of next attempted execution of the event
                    element_type:
                      type: string
                      description: the logic node type responsible
                    element:
                      type: string
                      description: the label of the element responsible
                    originally_scheduled:
                      type: string
                      format: ISO 8601 timestamp with timezone
                      description: |
                        the time the event was originally scheduled for. This remains
                        fixed, while `tstamp` can update as the event is retried
                    scheduling:
                      type: string
                      description: |
                        English description of how this event is being scheduled
                    path:
                      type: string
                      description: path to the survey
                    id:
                      type: string
                      description: internal event ID
                    element_title:
                      type: string
                      description: |
                        English description of the action provided by the element
  /cati/server/{command}:
    put:
      operationId: updateCatiServer
      summary: Manage CATI server
      description: Used to start, stop, or restart the CATI server.
      tags:
        - CATI
      parameters:
        - name: command
          description: The command to issue
          in: path
          schema:
            type: string
            enum:
              - start
              - stop
              - restart
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    title: Start Response
                    properties:
                      status:
                        type: string
                        enum:
                          - Started
                          - Already Started
                  - type: object
                    title: Stop Response
                    properties:
                      status:
                        type: string
                        enum:
                          - Stopped
                          - No server to stop
                  - type: object
                    title: Restart Response
                    properties:
                      status:
                        type: string
                        enum:
                          - Started
  /globalsearch/emails:
    post:
      operationId: createGlobalsearchEmails
      summary: Search for email usage
      description: Find participants who were sent an email through our "bulk email" system (excludes e.g. email logic node). You must have download permission for the matched surveys to view the results. Only the initial (i.e. not reminder) send is output. A send must have been attempted to the recipient for this API to output the email.
      tags:
        - Global Search
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                emails:
                  type: array
                  description: an array of emails addresses to search for
                  items:
                    type: string
              required:
                - emails
            example:
              emails:
                - xhargn@aol.com
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    survey:
                      type: string
                      description: survey path from which the email send was done
                    date:
                      type: string
                      description: date and time of send
                    email:
                      type: string
                      description: email address
                    listfile:
                      type: string
                      description: |
                        full path to the list file that was sent (this file may have
                        been archived)
                    listvars:
                      type: object
                      nullable: true
                      description: |
                        object with data stored in the list file for that participant,
                        or null
                    uuid:
                      type: string
                      nullable: true
                      description: |
                        UUID of the user if they started the survey or null if we
                        couldn't find them (didn't click through)
                    error:
                      type: string
                      nullable: true
                      description: |
                        either null, no-listfile (list file does not exist), or
                        no-entry (email no longer exists in listfile)
                    status:
                      type: string
                      nullable: true
                      description: |
                        if not null, the participant started the survey and ended up
                        with this status code
              example:
                - date: '2014-11-20T00:27:12Z'
                  email: xhargn@aol.com
                  error: null
                  listfile: /home/erwin/h/portal/demo/tiny/mail/list.txt
                  listvars:
                    email: xhargn@aol.com
                    source: 9cdajm
                  status: p
                  survey: demo/tiny
                  uuid: ens2j0zfyc5swn79
                - date: '2016-05-18T20:43:56Z'
                  email: xhargn@aol.com
                  error: no-listfile
                  listfile: /home/erwin/h/portal/demo/tiny/mail/list2.txt
                  listvars: null
                  status: null
                  survey: demo/tiny
                  uuid: null
          description: OK
  /globalsearch/evars:
    post:
      operationId: createGlobalsearchEvars
      summary: Search for extra variable usage
      description: 'Find participants with certain extra variable values. Participant data is retained for three years by default, but may be configured differently on your server. A maximum of 1000 records are returned. Requires data:download permission for the matched surveys to view results. Note that for a full data search on a "v2" system, expect a latency of 180 seconds. Only one global search call can run at a time: if you get an error, prepare to retry with a delay.'
      tags:
        - Global Search
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                evars:
                  type: array
                  description: An array of 2-element arrays, where the first element is an evar name, and the second element is the value
                  items:
                    type: array
                    items:
                      type: string
                    minItems: 2
                    maxItems: 2
                start:
                  type: string
                  description: Minimum date. Set this to a more recent value for a faster response time.
                  default: '2015-01-01'
              required:
                - evars
            example:
              start: '2019-03-14'
              evars:
                - - list
                  - '1'
                - - list
                  - '3'
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    date:
                      type: string
                      description: date and time
                    survey:
                      type: string
                      description: survey path
                    uuid:
                      type: string
                      description: uuid of the participant
                    vars:
                      type: object
                      description: map of evars and values
              example:
                - date: '2016-02-24T21:46:06Z'
                  survey: demo/datain
                  uuid: e327es8jnzh74v39
                  vars:
                    list: '1'
                - date: '2016-02-24T21:46:06Z'
                  survey: demo/datain
                  uuid: j3hgwyh386qj253w
                  vars:
                    list: '1'
                - date: '2016-02-24T21:46:06Z'
                  survey: demo/datain
                  uuid: 5ebg11gh4xea266b
                  vars:
                    list: '3'
          description: OK
          headers: {}
  /hello:
    get:
      operationId: getHello
      summary: Hello there!
      description: This test call echos its `name` argument.
      tags:
        - Miscellaneous
      parameters:
        - name: name
          description: this value will be echoed back
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: string
                  hello:
                    type: string
              example:
                ok: '1'
                hello: Roy Fielding
  /meta:
    get:
      operationId: getMeta
      summary: Get API metadata
      description: Retrieve an array of all currently implemented API calls.
      tags:
        - Miscellaneous
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    endpoint:
                      type: string
                      description: |
                        name of the API call, excluding version but including the
                        placeholder for primary key of the source.
                    description:
                      type: string
                      description: description
                    title:
                      type: string
                      description: API title
                    url:
                      type: string
                      description: URL including current version prefix
                    args:
                      type: object
                      description: |
                        object containing arguments this API call will take, together
                        with type names
                    method:
                      type: string
                      description: |
                        method to use. Note: multiple entries will exist with same
                        endpoint but different methods
  /surveys/{survey}/test/token:
    get:
      operationId: getSurveyTestToken
      summary: Get survey test URL token
      description: |
        Generates a temporary token to access surveys for testing purposes. Data
        won't be collected
      tags:
        - Miscellaneous
      parameters:
        - $ref: '#/components/parameters/survey'
        - name: expires
          description: days to expire token
          in: query
          required: false
          schema:
            default: 7
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                  url:
                    type: string
              example:
                token: TOKEN
                url: https://release.decipherinc.com/survey/selfserve/53a/1234?v2test=TOKEN
  /exceptions/search:
    get:
      operationId: getExceptionsSearch
      summary: Find error
      description: Search for a logged error by lookup code.
      tags:
        - Miscellaneous
      parameters:
        - name: lookup_code
          description: lookup code
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  timestamp:
                    type: string
                    format: ISO 8601 timestamp with timezone
                    description: time that the error occurred
                  path:
                    type: string
                    description: survey path (if applicable)
                  full_text:
                    type: string
                    description: full error text and traceback (if applicable)
  /status:
    get:
      operationId: getStatus
      summary: Get task
      description: Retrieve the status of an async task started by another api call
      tags:
        - Miscellaneous
      parameters:
        - name: id
          description: id of the async task to get the status of
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  extra:
                    type: object
                    properties:
                      cpuTime:
                        type: number
                      dataCleared:
                        type: boolean
                      languages:
                        type: array
                        nullable: true
                      markerCount:
                        type: integer
                      maxStoredSize:
                        type: integer
                      progressCount:
                        type: integer
                  ident:
                    type: string
                  percentage:
                    type: integer
                  pid:
                    type: integer
                  progress:
                    type: integer
                  result:
                    type: string
                  status:
                    type: string
                  survey:
                    type: string
                  task:
                    type: string
                  timestamp:
                    type: integer
                  total:
                    type: integer
                  type:
                    type: string
                  what:
                    type: string
              example:
                extra:
                  cpuTime: 0.022321394999999997
                  dataCleared: false
                  languages: null
                  markerCount: 1
                  maxStoredSize: 0
                  progressCount: 200
                ident: 3jd7qyadpgjbxu6t
                percentage: 100
                pid: 3957
                progress: 100
                result: 100/100 succeeded
                status: finished
                survey: selfserve/53a/180109
                task: Survey Stress Test
                timestamp: 1516830993
                total: 100
                type: sst
                what: Finished
    delete:
      operationId: deleteStatus
      summary: Cancel task
      description: Cancel one or more async tasks
      tags:
        - Miscellaneous
      parameters:
        - name: all
          description: cancel all async tasks if true
          in: query
          required: false
          schema:
            type: boolean
        - name: id
          description: id of the async task to cancel
          in: query
          required: false
          schema:
            type: string
        - name: survey
          description: cancel all async tasks if true
          in: query
          required: false
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  tasks:
                    description: list of id's of the canceled tasks
                    example: []
                    type: array
  /status/content:
    get:
      operationId: getStatusContent
      summary: Get task content
      description: Retrieve the content of an async API call. This will return a request with a API-specific content, such as a ZIP file you asked to be generated.
      tags:
        - Miscellaneous
      parameters:
        - name: id
          description: id of the async task to get the content of
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Endpoint-specific result content
    delete:
      operationId: deleteStatusContent
      summary: Remove content
      description: Remove content for an asynchronous task. If you already downloaded the file through [/api/v1/status/content](/docs/decipher/api#operation/getStatusContent) you can use this call to immediately free up disk space. Otherwise, it will be deleted after 7 days.
      tags:
        - Miscellaneous
      parameters:
        - name: id
          description: id of the async task to delete content of
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
        '400':
          description: already removed
  /misc/scoreboard:
    get:
      operationId: getMiscScoreboard
      summary: Get light scoreboard
      description: Displays surveys and services using the most resources in a period of time, the default scoreboard retention is 7 days. Fetching non-current data will take additional time depending on system traffic. Only for staff users.
      tags:
        - Miscellaneous
      parameters:
        - name: hours
          in: query
          description: How many hours starting from `end` date looking for the past
          schema:
            type: integer
            default: 4
          example: 4
          required: false
        - name: end
          in: query
          description: Starting date of the review
          schema:
            type: string
            format: ISO 8601 date
            default: now
          example: 2022-10-10T00:00Z
          required: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  surveys:
                    description: |
                      Shows survey related data.
                    type: array
                    items:
                      type: object
                      properties:
                        views:
                          description: |
                            Pages viewed in the surveys.
                          type: string
                          example: 123
                        period:
                          description: |
                            Period when the survey was running.
                          type: string
                          format: date-time
                          example: '2022-11-16T20:49:24Z'
                        routing95:
                          description: |
                            5 percent of respondents wait this time or higher.
                            If this is many times higher then average, it may indicate traffic spikes.
                          type: integer
                          example: 12
                        avg_cpu:
                          description: |
                            The the average amount of computing time cores used to display the survey.
                          type: integer
                          example: 29
                        routing:
                          description: |
                            Average waiting time for the respondents.
                          type: integer
                          example: 28
                        path:
                          description: |
                            Path of the survey.
                          type: string
                          example: selfserve/53d/220000
                        cpu:
                          description: |
                            Total amount of computing time cores used to display the survey.
                          type: number
                          example: 0.4676
                  categories:
                    type: array
                    description: |
                      Data related to each module.
                      The modules are:
                      - survey
                      - response (Response Summary)
                      - v/e (view/edit respondents)
                      - portal
                      - builder
                      - report (includes Crosstabs and Reporting 2010)
                      - api
                      - script (SST, copy-survey and other things run from the command line)
                    items:
                      type: object
                      properties:
                        category:
                          type: string
                          description: |
                            Module which data belongs to.
                          example: v/e
                        surveys:
                          type: integer
                          description: |
                            How many surveys used the module.
                          example: 99
                        users:
                          type: integer
                          description: |
                            How many users used the module.
                          example: 29
                        views:
                          description: |
                            Pages viewed in the in the module.
                          type: string
                          example: 250
                        period:
                          description: |
                            Period when the module was being used.
                          type: string
                          example: '2022-11-16T20:49:24Z'
                        routing95:
                          description: |
                            5 percent of respondents wait this time or higher.
                            If this is many times higher then average, it may indicate traffic spikes.
                          type: string
                          example: 500
                        avg_cpu:
                          description: |
                            The the average amount of computing cores used to display the survey.
                            Different server configurations will have a different maximum of CPU cores
                            for all surveys.
                          type: string
                          example: 210
                        routing:
                          description: |
                            Average waiting time for the respondents using the module.
                          type: string
                          example: 300
                        cpu:
                          description: |
                            Total amount of computing cores used to display the survey.
                          type: number
                          example: 0.7584254
components:
  securitySchemes:
    APIKey:
      type: apiKey
      in: header
      name: x-apikey
      description: |
        In order to access the api, you'll need to generate an API key. Refer to the
        instructions [here](/docs/decipher/api#section/API-Keys) to generate and
        configure an API key with the appropriate permission sets. You can generate
        as many keys as required.

        Configure each request to include your API key in the request header. For example:

        ```
        x-apikey: dp48ss3mgsaucyjtybxw728h7s4cgnwzhejtszdwhf4xpe8yhmtdwpk2ntdhtwbs
        ```
  parameters:
    survey:
      name: survey
      in: path
      required: true
      description: The survey path.
      example: selfserve/1a/123456
      schema:
        type: string
        format: uri
    feed:
      name: feed
      in: path
      required: true
      description: |
        Any unique ID that will identify the feed. Feeds are namespaced
        per user, so your `all` feed is unique to you.
      schema:
        type: string
    split:
      name: split
      in: query
      description: If supplied, create segments for this split.
      schema:
        type: string
        example: list
    datasource:
      name: datasource
      in: path
      required: true
      description: Datasource label, must be composed of a-zA-Z_ characters only
      schema:
        type: string
    company:
      name: company
      in: path
      required: true
      description: |
        A company name, numeric company id, or "self" for your own company.
      schema:
        type: string
    cm_listfile:
      name: listfile
      in: path
      description: |
        The numeric campaign id or the listfile name relative to the survey mail
        directory. For example, either `42` or `list_42-p5xflU.txt`.
      example: 42
      required: true
      schema:
        oneOf:
          - type: integer
            description: The numeric campaign id
          - type: string
            description: The listfile name
  schemas:
    Error:
      $ref: '#/components/schemas/error'
    SurveyData:
      $ref: '#/components/schemas/surveyData'
    SurveyDatamap:
      $ref: '#/components/schemas/surveyDatamap'
    SurveyVariables:
      $ref: '#/components/schemas/surveyVariables'
    SurveyLayout:
      $ref: '#/components/schemas/surveyLayout'
    surveyData:
      type: object
      properties:
        status:
          description: The survey completion status.
          example: 1
          type: integer
        uuid:
          description: The survey `uuid`.
          example: jwy3kwppp4yuqg86
          type: string
          format: uuid
        vmobiledevice:
          description: The respondent's mobile device code.
          example: 5
          type: integer
        url:
          description: The survey builder url.
          example: http://release.decipherinc.com/survey/selfserve/1a/123456
          type: string
        vbrowser:
          description: The respondent's browser code.
          type: integer
          example: 11
        qtime:
          description: The elapsed time (seconds) from survey start to complete.
          example: 56.235
          type: number
          format: float
        list:
          example: 0
          type: integer
        dcua:
          example: ..
          type: string
        markers:
          example: qualified,/totalQuota/Total
          type: string
        record:
          example: 1
          type: integer
        session:
          description: Unique user session ID.
          example: cwsps4gewqc0p175
          type: string
          format: uuid
        vos:
          description: The respondent's operating system (os).
          example: 13
          type: integer
        date:
          example: 09/02/2020 14:52
          type: string
        vlist:
          example: 1
          type: integer
        Q1r1:
          description: An example question response
          example: '8'
          type: string
        Q2a:
          description: An example question response
          example: I thought it was great.
          type: string
        Q2b:
          description: An example question response
          example: I thought it was not so great.
          type: string
    surveyVariables:
      type: object
      properties:
        vgroup:
          type: string
        qtitle:
          type: string
        colTitle:
          type: string
        title:
          type: string
        rowTitle:
          type: string
        label:
          type: string
        row:
          type: string
        type:
          type: string
        col:
          type: string
        qlabel:
          type: string
        values:
          type: array
          items:
            type: object
            properties:
              value:
                type: integer
              title:
                type: string
    surveyDatamap:
      type: object
      properties:
        variables:
          type: array
          items:
            $ref: '#/components/schemas/surveyVariables'
        questions:
          type: array
          items:
            type: object
            properties:
              variables:
                type: array
                items:
                  $ref: '#/components/schemas/surveyVariables'
              grouping:
                type: string
                example: rows
              type:
                type: string
                example: number
              qtitle:
                type: string
                example: How likely are you to recommend our company, product or service to a friend or colleague?
              qlabel:
                type: string
                example: Q1
    surveyLayout:
      type: object
      properties:
        id:
          type: integer
          description: The resource ID.
        createdBy:
          type: string
          format: email
          description: Created by user email.
        createdOn:
          type: string
          format: date-time
          description: Layout creation timestamp.
        description:
          type: string
          description: The layout description.
        updatedOn:
          type: string
          format: date-time
          description: Last updated timestamp.
        updatedBy:
          type: string
          format: email
          description: Last updated by user email.
        variables:
          description: |
            List of survey variables
          type: array
          items:
            type: object
            properties:
              altlabel:
                type: string
                description: Alternative label for variable.
              fwidth:
                type: integer
                description: The number of characters variable occupies (for fixed-width layouts).
              label:
                type: string
                description: Unique variable label.
              minStart:
                type: integer
                description: The offset the variable should start at.
              new:
                type: boolean
                description: True if variable did NOT exist on previous datamap.
              qlabel:
                type: string
                description: The parent question label.
              qtype:
                type: string
                description: Question type of parent question.
                example: radio
              shown:
                type: boolean
                description: True if variable is shown in current layout.
              src:
                type: string
                description: |
                  The variable's source.

                  Value | Description
                  ----- | -----------
                  `g` | Virtual
                  `s` | Survey
                  `y` | System
                example: g
                enum:
                  - g
                  - s
                  - 'y'
              title:
                type: string
    error:
      type: object
      properties:
        $code:
          description: The error code.
          type: integer
        $error:
          description: The error message.
          type: string
        extra:
          description: Additional error information.
          type: object
          additionalProperties: true
    userPermissionsMap:
      type: object
      description: Information about the preset permissions for a user.
      properties:
        full:
          type: object
          description: Preset permissions for a user with full permissions.
          properties:
            admin:
              type: string
              nullable: true
            theme_editor:
              type: string
              nullable: true
            reporting_crosstabs:
              type: string
              nullable: true
            response_summary:
              type: string
              nullable: true
            campaign_manager:
              type: string
              nullable: true
            survey:
              type: string
              nullable: true
            research_dashboard:
              type: string
              nullable: true
            offline:
              type: string
              nullable: true
            data:
              type: string
              nullable: true
        edit:
          type: object
          description: Preset permissions for a user with edit permissions.
          properties:
            admin:
              type: string
              nullable: true
            theme_editor:
              type: string
              nullable: true
            reporting_crosstabs:
              type: string
              nullable: true
            response_summary:
              type: string
              nullable: true
            campaign_manager:
              type: string
              nullable: true
            survey:
              type: string
              nullable: true
            research_dashboard:
              type: string
              nullable: true
            offline:
              type: string
              nullable: true
            data:
              type: string
              nullable: true
        view_data:
          type: object
          description: Preset permissions for a user with view-only with data permissions.
          properties:
            admin:
              type: string
              nullable: true
            theme_editor:
              type: string
              nullable: true
            reporting_crosstabs:
              type: string
              nullable: true
            response_summary:
              type: string
              nullable: true
            campaign_manager:
              type: string
              nullable: true
            survey:
              type: string
              nullable: true
            research_dashboard:
              type: string
              nullable: true
            offline:
              type: string
              nullable: true
            data:
              type: string
              nullable: true
        view:
          type: object
          description: Preset permissions for a user with view-only permissions.
          properties:
            admin:
              type: string
              nullable: true
            theme_editor:
              type: string
              nullable: true
            reporting_crosstabs:
              type: string
              nullable: true
            response_summary:
              type: string
              nullable: true
            campaign_manager:
              type: string
              nullable: true
            survey:
              type: string
              nullable: true
            research_dashboard:
              type: string
              nullable: true
            offline:
              type: string
              nullable: true
            data:
              type: string
              nullable: true
        vendor:
          type: object
          description: Preset permissions for a user with vendor permissions.
          properties:
            admin:
              type: string
              nullable: true
            theme_editor:
              type: string
              nullable: true
            reporting_crosstabs:
              type: string
              nullable: true
            response_summary:
              type: string
              nullable: true
            campaign_manager:
              type: string
              nullable: true
            survey:
              type: string
              nullable: true
            research_dashboard:
              type: string
              nullable: true
            offline:
              type: string
              nullable: true
            data:
              type: string
              nullable: true
        interviewer_only:
          type: object
          description: Preset permissions for a user with interviewer-only permissions.
          properties:
            admin:
              type: string
              nullable: true
            theme_editor:
              type: string
              nullable: true
            reporting_crosstabs:
              type: string
              nullable: true
            response_summary:
              type: string
              nullable: true
            campaign_manager:
              type: string
              nullable: true
            survey:
              type: string
              nullable: true
            research_dashboard:
              type: string
              nullable: true
            offline:
              type: string
              nullable: true
            data:
              type: string
              nullable: true
        none:
          type: object
          description: Preset permissions for a user with no permissions.
          properties:
            admin:
              type: string
              nullable: true
            theme_editor:
              type: string
              nullable: true
            reporting_crosstabs:
              type: string
              nullable: true
            response_summary:
              type: string
              nullable: true
            campaign_manager:
              type: string
              nullable: true
            survey:
              type: string
              nullable: true
            research_dashboard:
              type: string
              nullable: true
            offline:
              type: string
              nullable: true
            data:
              type: string
              nullable: true
    surveyUserData:
      type: object
      properties:
        user_id:
          type: integer
          description: The ID of the user.
        added_on:
          type: string
          format: date-time
          description: Date when the user was added to the survey.
        group_id:
          type: integer
          description: The ID of the group the user belongs to, null if not in a group.
          nullable: true
        email:
          type: string
          format: email
          description: Email address of the survey user.
        added_by:
          type: object
          description: Information about the user that added the specified user to the survey.
          properties:
            email:
              type: string
              format: email
              description: Email address of the user that added the user to the survey.
            id:
              type: integer
              description: The ID of the user that added the user to the survey.
        permissions:
          description: Information about the user's permissions.
          oneOf:
            - type: string
              description: The grouped alias for the user's permissions.
              enum:
                - full
                - edit
                - view_data
                - view
                - vendor
                - interviewer_only
                - none
            - type: object
              description: |
                The user's permissions if they do not align with one of the standard aliases.
              properties:
                survey:
                  type: string
                  nullable: true
                  enum:
                    - build
                    - edit
                    - view
                    - none
                reporting_crosstabs:
                  type: string
                  nullable: true
                  enum:
                    - edit
                    - view
                    - none
                data:
                  type: string
                  nullable: true
                  enum:
                    - edit
                    - download
                    - none
                response_summary:
                  type: string
                  nullable: true
                  enum:
                    - edit
                    - view
                    - none
                campaign_manager:
                  type: string
                  nullable: true
                  enum:
                    - build
                    - none
                research_dashboard:
                  type: string
                  nullable: true
                  enum:
                    - build
                    - view
                    - none
                admin:
                  type: string
                  nullable: true
                  enum:
                    - full
                    - none
                theme_editor:
                  type: string
                  nullable: true
                  enum:
                    - full
                    - all
                    - company
                    - system
                    - none
                offline:
                  type: string
                  nullable: true
                  enum:
                    - full
                    - none
    userData:
      type: object
      properties:
        last_login_where:
          type: string
          format: ip address
          description: The IP address of the last login.
          example: 127.0.0.0
        supervisor:
          type: boolean
          description: Whether the user is a supervisor.
          example: false
        subdirectory:
          type: string
          description: The user's subdirectory, or null.
          example: null
        type:
          type: string
          description: The user type.
          example: f
        company:
          type: integer
          description: The company ID.
          example: 1
        id:
          type: integer
          description: The user ID.
          example: 1
        last_password_change:
          type: string
          format: ISO-8601 timestamp with timezone
          description: Date and time the password was last changed.
          example: '2025-03-07T23:45:45Z'
        last_login:
          type: string
          format: ISO-8601 timestamp with timezone
          description: Date and time the user last logged in.
          example: '2025-03-07T23:45:45Z'
        active:
          type: boolean
          description: Whether the user is active.
          example: true
        fullname:
          type: string
          description: The full name of the user.
          example: ''
        lockedout_until:
          type: string
          format: ISO-8601 timestamp with timezone
          description: User lockout expiration date and time, or null.
          example: null
        login:
          type: string
          format: email
          description: The user's email address.
          example: developer@decipherinc.com
        expires_on:
          type: string
          format: ISO-8601 timestamp with timezone
          description: Date and time the user will be deactivated, or null.
          example: null
        staff:
          type: boolean
          description: Whether the user is a staff user.
          example: true
        created_on:
          type: string
          format: ISO-8601 timestamp with timezone
          description: Date and time the user was created.
          example: '2025-03-07T23:45:45Z'
        created_by:
          type: string
          description: Email or name of the user that created this user.
          example: admin@example.com
        2fa_device_linked:
          type: boolean
          description: Whether the user has a 2FA device linked.
          example: false
    rhSurveyResponse:
      type: object
      properties:
        accessed:
          example: true
          type: boolean
          description: |
            Has the survey been accessed in the past 3 days? This is a subset of
            `active`.
        active:
          example: true
          type: boolean
          description: |
            `true` if the survey has been accessed, edited, or completed by a 
            participant in the past 3 days.
        archived:
          example: false
          type: boolean
          description: |
            `true` if the survey is hidden for your account via the 'Hide Survey' 
            option.
        averageQtime:
          example: null
          type: integer
          description: |
            Mean completion time (in seconds) for qualified participants. Not
            available (and always `null`) for Delphi surveys; use the response summary
            API instead.
        category:
          example: Business
          type: string
          description: Category of the survey.
        clickthrough:
          example: 0
          type: integer
          description: Number of clickthroughs.
        closedDate:
          example: null
          type: string
          format: ISO 8601 timestamp with timezone
          description: Date and time the survey was last closed, or `null`.
        compat:
          example: 153
          type: integer
          description: Compatibility level (`compat` attribute in `survey.xml`).
        createdBy:
          example:
            email: developer@decipherinc.com
            name: Developer
            id: 1
          type: object
          properties:
            email:
              type: string
            name:
              type: string
            id:
              type: integer
          description: |
            An object with user info about the user who created the survey, or `null`.
        createdOn:
          example: '2025-03-07T23:45:45Z'
          type: string
          format: ISO 8601 timestamp with timezone
          description: Date and time the survey was created.
        dateLaunched:
          example: null
          type: string
          format: ISO 8601 timestamp with timezone
          description: Date and time the survey was last set live.
        description:
          example: ''
          type: string
          description: |
            Additional description entered in the portal or project overview page.
        directory:
          example: Decipher
          type: string
          description: Combination of company name, subdirectory, and a client tag.
        favorite:
          example: false
          type: boolean
          description: |
            `true` if you marked the survey as favorite.
        finishTime:
          example: null
          type: string
          format: ISO 8601 timestamp with timezone
          description: Date and time of the last complete.
        groups:
          example:
            - - 2
              - admin cm dash dashboard data offline report survey themeEditor
          type: array
          items:
            type: array
            items:
              - type: integer
              - type: string
          description: User group ID and permissions.
        hasDashboard:
          example: true
          type: boolean
          description: |
            `true` if the survey has a dashboard.
        hasProjectParameters:
          example: false
          type: boolean
          description: |
            `true` if the survey has project parameters enabled.
        hasSavedReport:
          example: true
          type: boolean
          description: |
            `true` if the survey has a saved report.
        isCATI:
          example: false
          type: boolean
          description: |
            `true` if the survey has CATI enabled.
        isDeprecated:
          example: true
          type: boolean
          description: |
            `true` if the survey has a compat level that is scheduled to be retired.
        isRetired:
          example: false
          type: boolean
          description: |
            `true` if the survey has a compat level at or below the retired compat
            level.
        keep:
          example: false
          type: boolean
          description: |
            `true` if the survey has been marked to prevent archival.
        lang:
          example:
            - english
            - English (USA)
          type: array
          items:
            type: string
          description: |
            Primary language, generated as a pair of [language ID, language
            description].
        lastAccess:
          example: '2025-03-07T23:45:45Z'
          type: string
          format: ISO 8601 timestamp with timezone
          description: Date and time someone last accessed the survey.
        lastAccessBy:
          example:
            email: developer@decipherinc.com
            name: Developer
            id: 1
          type: object
          properties:
            email:
              type: string
            name:
              type: string
            id:
              type: integer
          description: |
            An object with info about the user who last accessed the survey, or 
            `null`.
        lastEdit:
          example: '2025-03-07T23:45:45Z'
          type: string
          format: ISO 8601 timestamp with timezone
          description: Date and time someone last edited the survey, or `null`.
        lastEditBy:
          example:
            email: developer@decipherinc.com
            name: Developer
            id: 1
          type: object
          properties:
            email:
              type: string
            name:
              type: string
            id:
              type: integer
          description: |
            An object with info about the user who last edited the survey, or `null`.
        lastQuotaEdit:
          example: null
          type: string
          format: ISO 8601 timestamp with timezone
          description: Date and time `quota.xls` was last modified, or `null`.
        lastSurveyEdit:
          example: '2025-03-18T21:38:25Z'
          type: string
          format: ISO 8601 timestamp with timezone
          description: Date and time `survey.xml` was last modified.
        matched:
          example: {}
          type: object
          description: |
            If `query` was passed, object containing the field matched and the
            content of that field with match highlighted.
        medianQtime:
          example: null
          type: integer
          description: |
            Median completion time (in seconds) for qualified participants. Not
            available (and always `null`) for Delphi surveys; use the response
            summary endpoint instead.
        myAccess:
          example: '2025-03-18T22:14:22Z'
          type: string
          format: ISO 8601 timestamp with timezone
          description: Date and time you last accessed the survey, or `null`.
        myEdit:
          example: '2025-03-18T22:14:22Z'
          type: string
          format: ISO 8601 timestamp with timezone
          description: Date and time you last edited the survey, or `null`.
        otherLanguages:
          example:
            - - arabic
              - Arabic
            - - dutch
              - Dutch
          type: array
          items:
            type: array
            items:
              type: string
          description: Other languages for the survey.
        owner:
          example: 1
          type: integer
          description: The ID of the company that owns the survey.
        path:
          example: selfserve/123/456789
          type: string
          description: Full survey path.
        qualified:
          example: 0
          type: integer
          description: Qualified completes.
        questions:
          example: 10
          type: integer
          description: Number of questions in the survey visible to the participant.
        retention:
          example:
            archive_days: null
            clear_data_days: null
            server_delete_days: 365
            server_archive_days: null
            server_clear_data_days: null
          type: object
          properties:
            archive_days:
              type: integer
              description: |
                `null`, or how many days must pass after the survey closes, before it
                becomes archived.
            clear_data_days:
              type: integer
              description: |
                `null`, or the number of days after the survey is archived before its
                data is cleared from the archive.
            server_delete_days:
              type: integer
              description: |
                `null` or the number of days an archive will remain before being
                deleted.
            server_archive_days:
              type: integer
              description: |
                `null` or the number of days after the survey is archived before the
                data is cleared from the archive. Server default value.
            server_clear_data_days:
              type: integer
              description: |
                `null` or the number of days an archive will remain before being
                deleted. Server default value.
          description: |
            An object that contains the number of days until a data retention event
            can occur.
        sampleSources:
          example:
            - '0'
            - '101'
          type: array
          items:
            type: string
          description: |
            Participant sources used. Each item in the array is a `list=""` value.
        startTime:
          example: null
          type: string
          format: ISO 8601 timestamp with timezone
          description: Date and time of the first complete.
        state:
          example: testing
          type: string
          enum:
            - dev
            - testing
            - live
            - closed
          description: Current state of the survey.
        tags:
          example:
            - Decipher
          type: array
          items:
            type: string
          description: Array of tags applied to the survey.
        title:
          example: New NPS Survey
          type: string
          description: Title of the survey.
        today:
          example: 0
          type: integer
          description: |
            Completes today * `averageQtime` — mean completion time (in seconds) for
            qualified participants. Not available (and always `null`) for Delphi
            surveys; use the response summary endpoint instead.
        total:
          example: 0
          type: integer
          description: Total participants (overquota + terminated + qualified).
        type:
          example: 1
          type: integer
          description: Beacon = 1, email = 2, SPSS = 4.
  responses:
    '400':
      description: The request is invalid.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/error'
          example:
            $code: 400
            $error: The request is invalid.
    '401':
      description: The request is unauthorized.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/error'
          example:
            $code: 401
            $error: The request is unauthorized.
    '402':
      description: Monthly API call limit has been exceeded.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/error'
          example:
            $code: 402
            $error: Monthly API call limit has been exceeded.
    '403':
      description: API key is valid but access to requested resource is forbidden.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/error'
          example:
            $code: 403
            $error: API key is valid but access to requested resource is forbidden.
    '404':
      description: The requested resource is not found.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/error'
          example:
            $code: 404
            $error: The requested resource is not found.
    '405':
      description: The request method is not supported.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/error'
          example:
            $code: 405
            $error: The request method is not supported.
    '429':
      description: The user has sent too many requests.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/error'
          example:
            $code: 429
            $error: The user has sent too many requests.
    '500':
      description: An unexpected server error.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/error'
          example:
            $code: 500
            $error: An unexpected server error.
    BadRequest:
      $ref: '#/components/responses/400'
    Unauthorized:
      $ref: '#/components/responses/401'
    PaymentRequired:
      $ref: '#/components/responses/402'
    Forbidden:
      $ref: '#/components/responses/403'
    NotFound:
      $ref: '#/components/responses/404'
    MethodNotAllowed:
      $ref: '#/components/responses/405'
    TooManyRequests:
      $ref: '#/components/responses/429'
    Unexpected:
      $ref: '#/components/responses/500'
x-tagGroups:
  - name: Autoclose
    tags:
      - Autoclose
  - name: Data Input and Output
    tags:
      - Data
      - Data Feed
      - Response Summary
      - Modifying Data
      - Datasources
      - Datasources Data
      - Umerge
  - name: Survey Metadata
    tags:
      - Simulated Data
      - Survey State
      - Survey Evaluate
      - Survey Quotas
      - Survey Files
      - Survey Warnings
      - Survey Terms
      - Survey Subscribers
      - Survey Users
  - name: Panels
    tags:
      - Panel Data
      - Panel Datapoints
      - Survey Panels
  - name: Research Hub
    tags:
      - Users
      - Companies
      - Categories
      - Surveys
      - Panels
      - Crosstabs
      - Archives
      - Archival Reports
      - API Keys
      - Usage
      - Warnings Summary
  - name: Crosstabs
    tags:
      - Crosstabs Configuration
      - Crosstabs Execution
      - Crosstabs Nets
      - Saved Crosstabs
      - Crosstabs Table Settings
      - Crosstabs Validation
      - Crosstabs Rim Weighting
  - name: Dashboards
    tags:
      - Dashboards
  - name: DQ APIs
    tags:
      - DQ-Specific API Calls
      - MaxDiff API Calls
      - Discrete Choice Model API Calls
  - name: Response Summary
    tags:
      - Share Link
  - name: Sample Management
    tags:
      - Bounced Emails
      - Participant Sources
  - name: Distribution
    tags:
      - Email Distribution
      - SFTP Distribution
      - Slack Distribution
  - name: Campaign Manager
    tags:
      - Campaigns
      - Campaign Email Invites
      - Campaign Exports
      - Campaign Lists
      - Shared Campaign Lists
      - Campaign Sends
      - Campaign Status Lists
      - Supression Lists
  - name: Question Library
    tags:
      - Company Element
      - Company Elements
      - Survey Elements
      - Survey Element Report Settings
  - name: Language Manager
    tags:
      - LM Application Data
      - LM Application Translations
      - Translation Resources
      - Translations
      - Translation Deltas
      - Translation Reservations
      - Primary Survey Language
      - Other Survey Languages
      - Unused Survey Languages
  - name: Project Parameters
    tags:
      - Available Project Parameters
      - Saved Project Parameters
      - Project Parameters Configuration
  - name: Multi-User Editing
    tags:
      - Available Sections
      - Check Out Section
      - Check In Section
      - Sync Section
      - Section Editor
      - Abandon Section
      - Validate Section
  - name: Video Management
    tags:
      - Videos
      - Watermarked Videos
  - name: Miscellaneous
    tags:
      - System Information
      - Logic Nodes
      - Logic Events
      - CATI
      - Global Search
      - Miscellaneous
